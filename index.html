
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Open Banking Brasil</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen-91ebee49.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-c427a123.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-c5541673.js"></script>
  </head>

  <body class="index" data-languages="[&quot;javascript&quot;,&quot;python&quot;,&quot;java&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-7ed2e1f6.png" class="logo" alt="" />
      <small style="padding: 23px; color: white">Versão: v1.0.0-rc5.3</small>
        <div class="lang-selector">
              <a href="#" data-language-name="javascript">javascript</a>
              <a href="#" data-language-name="python">python</a>
              <a href="#" data-language-name="java">java</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Buscar">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introducao" class="toc-h1 toc-link" data-title="Introdução">Introdução</a>
          </li>
          <li>
            <a href="#padroes" class="toc-h1 toc-link" data-title="Padrões">Padrões</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#principios" class="toc-h2 toc-link" data-title="Princípios">Princípios</a>
                  </li>
                  <li>
                    <a href="#versionamento" class="toc-h2 toc-link" data-title="Versionamento">Versionamento</a>
                  </li>
                  <li>
                    <a href="#estrutura-da-uri" class="toc-h2 toc-link" data-title="Estrutura da URI">Estrutura da URI</a>
                  </li>
                  <li>
                    <a href="#cabecalhos-http" class="toc-h2 toc-link" data-title="Cabeçalhos HTTP">Cabeçalhos HTTP</a>
                  </li>
                  <li>
                    <a href="#codigos-de-resposta-http" class="toc-h2 toc-link" data-title="Códigos de resposta HTTP">Códigos de resposta HTTP</a>
                  </li>
                  <li>
                    <a href="#convencoes-de-payload" class="toc-h2 toc-link" data-title="Convenções de payload">Convenções de payload</a>
                  </li>
                  <li>
                    <a href="#convencoes-de-nomenclatura" class="toc-h2 toc-link" data-title="Convenções de nomenclatura">Convenções de nomenclatura</a>
                  </li>
                  <li>
                    <a href="#tipos-de-dados-comuns" class="toc-h2 toc-link" data-title="Tipos de dados comuns">Tipos de dados comuns</a>
                  </li>
                  <li>
                    <a href="#paginacao" class="toc-h2 toc-link" data-title="Paginação">Paginação</a>
                  </li>
                  <li>
                    <a href="#formacao-e-estabilidade-do-id" class="toc-h2 toc-link" data-title="Formação e Estabilidade do ID">Formação e Estabilidade do ID</a>
                  </li>
                  <li>
                    <a href="#extensibilidade" class="toc-h2 toc-link" data-title="Extensibilidade">Extensibilidade</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#glossario" class="toc-h1 toc-link" data-title="Glossário">Glossário</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#glossario" class="toc-h2 toc-link" data-title="Glossário">Glossário</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#seguranca-consumo" class="toc-h1 toc-link" data-title="Segurança - Consumo">Segurança - Consumo</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#visao-geral" class="toc-h2 toc-link" data-title="Visão geral">Visão geral</a>
                  </li>
                  <li>
                    <a href="#cors" class="toc-h2 toc-link" data-title="CORS">CORS</a>
                  </li>
                  <li>
                    <a href="#endpoints" class="toc-h2 toc-link" data-title="Endpoints">Endpoints</a>
                  </li>
                  <li>
                    <a href="#glossario-de-seguranca" class="toc-h2 toc-link" data-title="Glossário de Segurança">Glossário de Segurança</a>
                  </li>
                  <li>
                    <a href="#referencias-normativas" class="toc-h2 toc-link" data-title="Referências normativas">Referências normativas</a>
                  </li>
                  <li>
                    <a href="#referencias-informativas" class="toc-h2 toc-link" data-title="Referências informativas">Referências informativas</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#seguranca-participantes" class="toc-h1 toc-link" data-title="Segurança - Participantes">Segurança - Participantes</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#governanca" class="toc-h2 toc-link" data-title="Governança">Governança</a>
                  </li>
                  <li>
                    <a href="#protecao" class="toc-h2 toc-link" data-title="Proteção">Proteção</a>
                  </li>
                  <li>
                    <a href="#deteccao" class="toc-h2 toc-link" data-title="Detecção">Detecção</a>
                  </li>
                  <li>
                    <a href="#reacao" class="toc-h2 toc-link" data-title="Reação">Reação</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#seguranca-guia" class="toc-h1 toc-link" data-title="Segurança - Guia">Segurança - Guia</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#introducao-seguranca" class="toc-h2 toc-link" data-title="Introdução - Segurança">Introdução - Segurança</a>
                  </li>
                  <li>
                    <a href="#perfil-de-seguranca" class="toc-h2 toc-link" data-title="Perfil de segurança">Perfil de segurança</a>
                  </li>
                  <li>
                    <a href="#openid-connect-oidc" class="toc-h2 toc-link" data-title="OpenID Connect (OIDC)">OpenID Connect (OIDC)</a>
                  </li>
                  <li>
                    <a href="#jwt" class="toc-h2 toc-link" data-title="JWT">JWT</a>
                  </li>
                  <li>
                    <a href="#fluxo-openid-connect-oidc" class="toc-h2 toc-link" data-title="Fluxo OpenID Connect (OIDC)">Fluxo OpenID Connect (OIDC)</a>
                  </li>
                  <li>
                    <a href="#financial-grade-api-fapi" class="toc-h2 toc-link" data-title="Financial-grade API (FAPI)">Financial-grade API (FAPI)</a>
                  </li>
                  <li>
                    <a href="#fluxos-de-autenticacao-e-autorizacao" class="toc-h2 toc-link" data-title="Fluxos de autenticação e autorização">Fluxos de autenticação e autorização</a>
                  </li>
                  <li>
                    <a href="#fluxo-de-consentimento" class="toc-h2 toc-link" data-title="Fluxo de Consentimento">Fluxo de Consentimento</a>
                  </li>
                  <li>
                    <a href="#assinatura-de-mensagens" class="toc-h2 toc-link" data-title="Assinatura de mensagens">Assinatura de mensagens</a>
                  </li>
                  <li>
                    <a href="#certificados" class="toc-h2 toc-link" data-title="Certificados">Certificados</a>
                  </li>
                  <li>
                    <a href="#csr" class="toc-h2 toc-link" data-title="CSR">CSR</a>
                  </li>
                  <li>
                    <a href="#diretorio-de-participantes" class="toc-h2 toc-link" data-title="Diretório de participantes">Diretório de participantes</a>
                  </li>
                  <li>
                    <a href="#registro-de-client-dinamico" class="toc-h2 toc-link" data-title="Registro de Client dinâmico">Registro de <em>Client</em> dinâmico</a>
                  </li>
                  <li>
                    <a href="#teste-e-homologacao" class="toc-h2 toc-link" data-title="Teste e homologação">Teste e homologação</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#especificacoes-de-registro-de-participantes" class="toc-h1 toc-link" data-title="Especificações de registro de participantes">Especificações de registro de participantes</a>
          </li>
          <li>
            <a href="#problemas-conhecidos-da-especificacao" class="toc-h1 toc-link" data-title="Problemas conhecidos da especificação">Problemas conhecidos da especificação</a>
          </li>
          <li>
            <a href="#diretrizes-de-experiencia-do-cliente" class="toc-h1 toc-link" data-title="Diretrizes de experiência do cliente">Diretrizes de experiência do cliente</a>
          </li>
          <li>
            <a href="#diretrizes-operacionais" class="toc-h1 toc-link" data-title="Diretrizes operacionais">Diretrizes operacionais</a>
          </li>
          <li>
            <a href="#diretrizes-tecnicas-do-diretorio" class="toc-h1 toc-link" data-title="Diretrizes técnicas do diretório">Diretrizes técnicas do diretório</a>
          </li>
          <li>
            <a href="#calendario-de-versoes-das-apis" class="toc-h1 toc-link" data-title="Calendário de versões das APIs">Calendário de versões das APIs</a>
          </li>
          <li>
            <a href="#guias-de-implementacao" class="toc-h1 toc-link" data-title="Guias de implementação">Guias de implementação</a>
          </li>
          <li>
            <a href="#tempo-de-indisponibilidade-das-apis" class="toc-h1 toc-link" data-title="Tempo de Indisponibilidade das APIs">Tempo de Indisponibilidade das APIs</a>
          </li>
          <li>
            <a href="#api-consentimento" class="toc-h1 toc-link" data-title="API – Consentimento">API – Consentimento</a>
          </li>
          <li>
            <a href="#divulgacao-dos-valores-de-tarifas-e-taxas-de-juros-remuneratorias" class="toc-h1 toc-link" data-title="Divulgação dos valores de tarifas e taxas de juros remuneratórias">Divulgação dos valores de tarifas e taxas de juros remuneratórias</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#tarifas-apuracao-frequencia-e-valores-correspondentes" class="toc-h2 toc-link" data-title="Tarifas – Apuração Frequência e valores correspondentes">Tarifas – Apuração Frequência e valores correspondentes</a>
                  </li>
                  <li>
                    <a href="#apuracao-frequencia-taxas-juros-remuneratorios" class="toc-h2 toc-link" data-title="Apuração Frequência Taxas Juros remuneratórios">Apuração Frequência Taxas Juros remuneratórios</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#apis-dados-cadastrais-e-transacionais-de-clientes" class="toc-h1 toc-link" data-title="APIs - Dados cadastrais e transacionais de clientes">APIs - Dados cadastrais e transacionais de clientes</a>
          </li>
          <li>
            <a href="#api-iniciacao-de-transacao-de-pagamentos" class="toc-h1 toc-link" data-title="API - Iniciação de transação de pagamentos">API - Iniciação de transação de pagamentos</a>
          </li>
          <li>
            <a href="#apis-diretorio-e-service-desk" class="toc-h1 toc-link" data-title="APIs - Diretório e Service Desk">APIs - Diretório e Service Desk</a>
          </li>
          <li>
            <a href="#requisitos-nao-funcionais" class="toc-h1 toc-link" data-title="Requisitos não funcionais">Requisitos não funcionais</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#nivel-de-servico-sla" class="toc-h2 toc-link" data-title="Nível de serviço (SLA)">Nível de serviço (SLA)</a>
                  </li>
                  <li>
                    <a href="#nivel-de-desempenho" class="toc-h2 toc-link" data-title="Nível de desempenho">Nível de desempenho</a>
                  </li>
                  <li>
                    <a href="#limites-de-trafego-de-requisicoes" class="toc-h2 toc-link" data-title="Limites de tráfego de requisições">Limites de tráfego de requisições</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#guia-de-versionamento" class="toc-h1 toc-link" data-title="Guia de Versionamento">Guia de Versionamento</a>
          </li>
          <li>
            <a href="#suporte-ao-desenvolvedor" class="toc-h1 toc-link" data-title="Suporte ao desenvolvedor">Suporte ao desenvolvedor</a>
          </li>
          <li>
            <a href="#participantes-open-banking-brasil" class="toc-h1 toc-link" data-title="Participantes Open Banking Brasil">Participantes Open Banking Brasil</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#acesso-a-json-com-dados-dos-participantes" class="toc-h2 toc-link" data-title="Acesso a JSON com dados dos participantes">Acesso a JSON com dados dos participantes</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#faq" class="toc-h1 toc-link" data-title="FAQ">FAQ</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#como-tratar-campos-obrigatorios" class="toc-h2 toc-link" data-title="Como tratar campos Obrigatórios?">Como tratar campos Obrigatórios?</a>
                  </li>
                  <li>
                    <a href="#como-tratar-campos-opcionais" class="toc-h2 toc-link" data-title="Como tratar campos Opcionais?">Como tratar campos Opcionais?</a>
                  </li>
                  <li>
                    <a href="#por-que-todos-os-campos-com-dominio-definidos-nao-tem-tamanho-explicitado-no-dicionario-de-dados" class="toc-h2 toc-link" data-title="Por que todos os campos com domínio definidos não tem tamanho explicitado no dicionário de dados?">Por que todos os campos com domínio definidos não tem tamanho explicitado no dicionário de dados?</a>
                  </li>
                  <li>
                    <a href="#no-momento-o-compartilhamento-dos-dados-relativos-aos-terminais-de-autoatendimento-compartilhados-e-facultativo" class="toc-h2 toc-link" data-title="No momento, o compartilhamento dos dados relativos aos Terminais de autoatendimento compartilhados é facultativo?">No momento, o compartilhamento dos dados relativos aos Terminais de autoatendimento compartilhados é facultativo?</a>
                  </li>
                  <li>
                    <a href="#de-que-tipo-de-terminal-o-regulador-esta-se-referindo-pois-temos-algumas-situacoes-distintas-em-nossa-instituicao" class="toc-h2 toc-link" data-title="De que tipo de terminal o regulador está se referindo, pois temos algumas situações distintas em nossa instituição:">De que tipo de terminal o regulador está se referindo, pois temos algumas situações distintas em nossa instituição:</a>
                  </li>
                  <li>
                    <a href="#na-normativa-n-35-do-bcb-para-correspondente-bancario-os-atributos-weekday-e-phonestype-aparecem-como-opcional-mas-no-github-aparecem-como-obrigatorios-isto-esta-correto" class="toc-h2 toc-link" data-title="Na normativa nº 35, do BCB, para Correspondente Bancário os atributos weekday e phonestype aparecem como opcional, mas no Github aparecem como obrigatórios isto está correto?">Na normativa nº 35, do BCB, para Correspondente Bancário os atributos weekday e phonestype aparecem como opcional, mas no Github aparecem como obrigatórios isto está correto?</a>
                  </li>
                  <li>
                    <a href="#sendo-consideradas-somente-as-operacoes-contratadas-no-mes-da-apuracao-no-calculo-e-disponibilizacao-de-informacoes-relativas-a-distribuicao-de-frequencia-de-taxas-remuneratorias" class="toc-h2 toc-link" data-title="Sendo consideradas somente as operações “contratadas” no mês da apuração no cálculo e disponibilização de informações relativas a distribuição de frequência de Taxas remuneratórias.">Sendo consideradas somente as operações “contratadas” no mês da apuração no cálculo e disponibilização de informações relativas a distribuição de frequência de Taxas remuneratórias.</a>
                  </li>
                  <li>
                    <a href="#sendo-consideradas-somente-as-operacoes-quot-contratadas-quot-no-mes-da-apuracao-no-calculo-e-disponibilizacao-de-informacoes-relativas-a-distribuicao-de-frequencia-de-tarifas" class="toc-h2 toc-link" data-title="Sendo consideradas somente as operações "contratadas" no mês da apuração no cálculo e disponibilização de informações relativas a distribuição de frequência de Tarifas.">Sendo consideradas somente as operações "contratadas" no mês da apuração no cálculo e disponibilização de informações relativas a distribuição de frequência de Tarifas.</a>
                  </li>
                  <li>
                    <a href="#orientacoes-padroes-e-exemplos-sobre-apuracao-dos-valores-para-a-distribuicao-de-frequencia-de-tarifas-e-taxas-remuneratorias" class="toc-h2 toc-link" data-title="Orientações, padrões e exemplos sobre apuração dos valores para a distribuição de frequência de Tarifas e Taxas Remuneratórias">Orientações, padrões e exemplos sobre apuração dos valores para a distribuição de frequência de Tarifas e Taxas Remuneratórias</a>
                  </li>
                  <li>
                    <a href="#e-possivel-incluir-novos-tipos-de-cartao" class="toc-h2 toc-link" data-title="É possível incluir novos Tipos de cartão?">É possível incluir novos Tipos de cartão?</a>
                  </li>
                  <li>
                    <a href="#como-reportar-agencias-digitais" class="toc-h2 toc-link" data-title="Como reportar Agências Digitais?">Como reportar Agências Digitais?</a>
                  </li>
                  <li>
                    <a href="#as-operacoes-de-repasse-sao-reportadas-no-documento-3050-estatisticas-agregadas-de-credito-e-arrendamento-mercantil-em-financiamento-de-investimentos-com-recursos-do-bndes-e-financiamento-agroindustrial-com-recurso-do-bndes-no-documento-3040-dados-individualizados-de-risco-de-credito-essas-operacoes-sao-reportadas-como-08-02-financiamentos-rurais-investimentos-porem-com-a-origem-do-recurso-como-direcionado-02-bndes-03-finame-devemos-incluir-essas-operacoes-de-repasse-dentro-do-reporte-do-open-banking" class="toc-h2 toc-link" data-title="As operações de repasse são reportadas no Documento 3050 – Estatísticas agregadas de Crédito e Arrendamento Mercantil em: Financiamento de investimentos com recursos do BNDES e Financiamento Agroindustrial com recurso do BNDES. No Documento 3040 – Dados Individualizados de Risco de Crédito, essas operações são reportadas como 08.02. Financiamentos Rurais – Investimentos, porém, com a origem do recurso como direcionado (02 – BNDES, 03- Finame). Devemos incluir essas operações de repasse dentro do reporte do Open Banking?">As operações de repasse são reportadas no Documento 3050 – Estatísticas agregadas de Crédito e Arrendamento Mercantil em: Financiamento de investimentos com recursos do BNDES e Financiamento Agroindustrial com recurso do BNDES. No Documento 3040 – Dados Individualizados de Risco de Crédito, essas operações são reportadas como 08.02. Financiamentos Rurais – Investimentos, porém, com a origem do recurso como direcionado (02 – BNDES, 03- Finame). Devemos incluir essas operações de repasse dentro do reporte do Open Banking?</a>
                  </li>
                  <li>
                    <a href="#temos-participacao-obrigatoria-na-fase-3-porem-queremos-saber-detalhes-sobre-a-participacao-optativa-da-fase-1-e-fase-2-as-duvidas-iniciais-sao" class="toc-h2 toc-link" data-title="Temos participação obrigatória na Fase 3, porém queremos saber detalhes sobre a participação optativa da Fase 1 e Fase 2. As dúvidas iniciais são:">Temos participação obrigatória na Fase 3, porém queremos saber detalhes sobre a participação optativa da Fase 1 e Fase 2. As dúvidas iniciais são:</a>
                  </li>
                  <li>
                    <a href="#considerar-data-da-concessao-ou-data-da-liberacao-para-o-calculo-da-distribuicao-de-frequencia-para-operacoes-com-caracteristica-de-liberacoes-parciais" class="toc-h2 toc-link" data-title="Considerar data da concessão ou data da liberação para o Cálculo da distribuição de frequência para operações com característica de liberações parciais?">Considerar data da concessão ou data da liberação para o Cálculo da distribuição de frequência para operações com característica de liberações parciais?</a>
                  </li>
                  <li>
                    <a href="#como-devemos-tratar-distribuicao-de-frequencia-sobre-taxas-remuneratorias-para-outras-operacoes-de-credito-relacionadas-ao-produto-cartao" class="toc-h2 toc-link" data-title="Como devemos tratar distribuição de frequência sobre taxas remuneratórias para outras operações de crédito relacionadas ao Produto Cartão?">Como devemos tratar distribuição de frequência sobre taxas remuneratórias para outras operações de crédito relacionadas ao Produto Cartão?</a>
                  </li>
              </ul>
          </li>
      </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introducao'>Introdução</h1>
<p>Sejam bem-vindos à área do desenvolvedor do Portal do Open Banking Brasil</p>

<p>Nessa área os desenvolvedores encontrarão informações para observância obrigatória de todos os participantes, sejam eles obrigatórios ou voluntários, incluindo padrões técnicos de interfaces, glossário de termos técnicos, especificações dos diferentes tipos de APIs - incluindo seu versionamento, requisitos não funcionais como SLAs e limites de tráfego de requisições, informações de desempenho e disponibilidade, FAQ com diversas orientações aos desenvolvedores, entre outros elementos necessários à implementação do Sistema Financeiro Aberto.  Todas as informações foram definidas de acordo com a regulamentação vigente no País, respeitando instruções normativas e resoluções do Banco Central do Brasil e do Conselho Monetário Nacional.</p>

<p>Este sítio eletrônico e seu conteúdo foram criados e são mantidos pela Estrutura responsável pela Governança do Open Banking Brasil, formada por integrantes de múltiplas associações: Febraban, ABBC, ACREFI, ABBI, OCB, Abecs, Abipag, Abranet, Câmara e-net, ABCD e ABFintechs.</p>
<h1 id='padroes'>Padrões</h1>
<p>Estes padrões representam a versão 1.0.0, a qual fornece uma visão alto nível dos padrões. Consulte a seção <a href="#guia-de-versionamento">versionamento</a> para obter mais informações sobre como as versões são gerenciadas com o padrão.</p>

<p>Observe que, nesta proposta, as palavras-chave DEVEM, NÃO DEVEM, NECESSÁRIAS, RECOMENDADO, PODE e OPCIONAL, devem ser interpretadas conforme descrito na RFC2119.</p>

<h2 id='principios'>Princípios</h2>

<p>Os seguintes princípios técnicos não exaustivos constituem a base para o desenvolvimento e implementação das APIs para o Open Banking no Brasil.</p>

<h3 id='principio-1-seguranca'>Princípio 1: Segurança</h3>

<p>A adoção de mecanismos de segurança no design e implementação das APIs do Open Banking no Brasil deverá considerar os padrões aplicáveis a cada uma de suas fases, visando a proteção e a disponibilidade do ecossistema como um todo, considerando clientes, participantes e os dados específicos compartilhados em cada fase.</p>

<h3 id='principio-2-restful-apis'>Princípio 2: RESTful APIs</h3>

<p>A API irá aderir aos conceitos de RESTful API sempre que for possível e sensato.</p>

<h3 id='principio-3-padroes-existentes'>Princípio 3: Padrões existentes</h3>

<p>Os padrões existentes serão adotados sempre que sua aplicação for relevante/apropriada e desde que não violem nenhum dos demais princípios, com foco na experiência do desenvolvedor e do usuário, e ainda, prevendo a extensibilidade, resiliência e a evolução do Open Banking no Brasil.</p>

<h3 id='principio-4-iso-20022'>Princípio 4: ISO 20022</h3>

<p>Os payloads das APIs serão desenvolvidos utilizando como base os elementos e componentes de mensagem ISO 20022, que poderão ser modificados, caso necessário, para deixar o payload mais simples e/ou atender às características locais, tal como implementado em diferentes jurisdições.</p>

<h3 id='principio-5-extensibilidade'>Princípio 5: Extensibilidade</h3>

<p>Os fluxos das APIs serão estendidos para atender a casos de uso mais complexos em futuros releases, e, portanto, esse princípio será mantido em mente durante o design, e os procedimentos serão detalhados durante a implementação.</p>

<h3 id='principio-6-codigos-de-status'>Princípio 6: Códigos de Status</h3>

<p>A API usará dois códigos de status que atendem a dois propósitos diferentes: (i) o HTTP status code reflete o resultado da chamada da API e (ii) um campo status em alguns resource payloads reflete o status dos resources nos casos de acesso write (p.ex. iniciação de pagamento).</p>

<h3 id='principio-7-identificadores-unicos'>Princípio 7: Identificadores únicos</h3>

<p>Um recurso REST deverá ter um identificador exclusivo que possa ser usado para identificar o recurso, com formato e padrão a ser definido a partir da Fase 2 do Open Banking no Brasil.</p>

<h3 id='principio-8-categorizacao-dos-requisitos-de-implementacao'>Princípio 8: Categorização dos requisitos de implementação</h3>

<p>Quando um requisito estiver sendo implementado por um transmissor e/ou um receptor, uma categorização diferente será aplicada. As funcionalidades, endpoints e campos em cada recurso serão categorizados como &#39;Obrigatório&#39;, &#39;Condicional&#39; ou &#39;Opcional&#39;.</p>

<h3 id='principio-9-agnosticas'>Princípio 9: Agnósticas</h3>

<p>As APIs serão agnósticas à implementação onde elas poderão ser consumidas independente das tecnologias adotadas no ecossistema, porém com aderência aos princípios contidos nesta documentação.</p>

<h2 id='versionamento'>Versionamento</h2>

<p>O controle de versão contemplará 4 tipos de lançamento (p.ex. <em>major</em>, <em>minor</em>, <em>patch</em> e <em>release candidate</em>) e terá
prazos definidos para lançamento e implementação de novas versões <em>major</em>, bem como suporte de versões anteriores.</p>

<p>No link Anexo: <a href="#guia-de-versionamento">Guia de Versionamento</a>, integrante desta documentação, estão documentados os casos previstos em que uma nova versão de API poderá vir a quebrar o contrato estabelecido</p>

<blockquote>
<p>O versionamento terá o seguinte formato contemplando 4 tipos de lançamentos de versões:
<code>1.12.2.rc1 - significando  versão major 1,  versão minor 12 , aplicação de patchs  versão 2 e release candidate 1</code></p>
</blockquote>

<ul>
<li><strong>Major</strong>: inclui novas características da implementação, mudanças, correções a serem incorporadas e que poderão vir a quebrar o contrato.

<ul>
<li>P.ex. v1.0.0, v2.0.0.</li>
</ul></li>
<li><strong>Minor</strong>: pequenas mudanças nos elementos já existentes, com manutenção da compatibilidade e sem quebra de contrato.

<ul>
<li>P.ex. v1.1.0, v1.2.0</li>
</ul></li>
<li><strong>Patch</strong>: esclarecimentos às especificações publicadas pelo diretório, não incluem alterações funcionais.

<ul>
<li>P.ex. v1.1.1, v1.1.2</li>
</ul></li>
<li><strong>Release candidate</strong>: versões de pré-lançamento de qualquer patch futuro, minor ou major.

<ul>
<li>P.ex. v1.0.0-rc , v1.0.0-rc2</li>
</ul></li>
</ul>

<p>Será definido um cronograma de novas versões dos padrões para que os participantes consigam se planejar e desenvolver novas APIs, com cada um dos lançamentos tendo um prazo pré-estabelecido para ser implementado pelos participantes, mitigando, desta forma, o risco de múltiplas versões.</p>

<p>Não serão feitos mais do que um lançamento de versão <em>major</em> em um período de 6 meses. No entanto, serão previstas exceções para atender às alterações urgentes que não podem esperar até a próxima versão principal <em>(major</em>). Lançamentos de versões <em>minor</em> e <em>patch</em> podem ocorrer a qualquer momento. </p>

<p>Lançamentos <em>minor</em> não podem configurar em quebra de contrato, impactar significativamente <em>endpoints</em> e/ou exigir manutenção crítica.    </p>

<p>Por fim, credenciais de acesso associadas às APIs deverão ser agnósticas à versão.</p>

<h2 id='estrutura-da-uri'>Estrutura da URI</h2>

<p>A estrutura da URI para os endpoints deve ser implementada conforme abaixo:<br>
<code>&lt;host&gt; / open-banking / &lt;api&gt; / &lt;versão&gt; / &lt;recurso&gt;</code></p>

<p>Os componentes desta estrutura de URI estão descritos abaixo:</p>

<ul>
<li><strong>Host</strong>: O host de API da entidade financeira implementadora é um endereço base definido pela entidade transmissora de dados.</li>
<li><strong>“open-banking”</strong>: Esta é uma string constante que representa a finalidade desta API.</li>
<li><strong>API</strong>: A API que será consumida (p.ex. channels).</li>
<li><strong>Versão</strong>: O número da versão da API. Na URI a versão deve ser precedida pela letra &quot;v&quot; seguida pelo número da versão a ser consumida (p.ex. v1, v2, v25).</li>
<li><strong>Recurso</strong>: O recurso a ser consumido dentro de uma API. Utilizando como exemplo a API <code>channels</code>, a mesma possui 5 recursos:

<ul>
<li>branches</li>
<li>banking-agents</li>
<li>electronic-channels</li>
<li>phone-channels</li>
<li>shared-automated-teller-machines</li>
</ul></li>
</ul>

<p>A versão minor será repassada apenas no <em>header</em> do <em>payload</em> de resposta, orientando a instituição receptora sobre quais serão os dados no retorno.   </p>

<p>Como exemplo, para realizar o consumo do método <code>electronic-channels</code> da API <code>channels</code> na versão <code>1</code>, a URI ficaria com a seguinte estrutura:  </p>

<p><code>&lt;host&gt;/open-banking/channels/v1/electronic-channels</code></p>

<h2 id='cabecalhos-http'>Cabeçalhos HTTP</h2>

<p>Cabeçalhos HTTP suportados e suas funções.</p>

<h3 id='cabecalho-de-requisicao'>Cabeçalho de requisição</h3>

<table><thead>
<tr>
<th style="text-align: left">Nome do cabeçalho</th>
<th style="text-align: left">Descrição</th>
<th style="text-align: left">Obrigatório</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left"><strong>Content-Type</strong></td>
<td style="text-align: left">Representa o formato do payload de requisição, por padrão/default definido como application/json;charset UTF-8. Obrigatório para chamadas PUT e POST. Os transmissores poderão implementar tratamento para outros padrões, sendo obrigatório apenas o suporte ao padrão.</td>
<td style="text-align: left">Não</td>
</tr>
<tr>
<td style="text-align: left"><strong>Accept</strong></td>
<td style="text-align: left">Especifica o tipo de resposta.<br/>Se especificado, deve ser definido como <code>application/json</code>, a menos que o <em>endpoint</em> explicitamente suporte outro formato.<br/>Se for definido um valor não suportado pelo <em>endpoint</em>, será retornado o código HTTP 406. Se não especificado, o padrão será <code>application/json</code>.</td>
<td style="text-align: left">Não</td>
</tr>
<tr>
<td style="text-align: left"><strong>Accept-Encoding</strong></td>
<td style="text-align: left">Especifica os tipos de encoding(geralmente algoritmo de compressão) que são suportados pelo cliente, com previsão de suporte ao gzip por parte dos transmissores, sendo que o padrão é a transmissão dos dados não compactados e esta orientação aplica-se aos Dados Abertos.</td>
<td style="text-align: left">Não</td>
</tr>
<tr>
<td style="text-align: left"><strong>If-Modified-Since</strong></td>
<td style="text-align: left">Condiciona o resultado da requisição para que o recurso só seja enviado caso tenha sido atualizado após a data fornecida. Utiliza o padrão da RFC 7232, sessão 3.3: <em>If-Modified-Since</em> do protocolo HTTP.</td>
<td style="text-align: left">Não</td>
</tr>
<tr>
<td style="text-align: left"><strong>x-fapi-auth-date</strong></td>
<td style="text-align: left">Data em que o usuário logou pela última vez com o receptor</td>
<td style="text-align: left">Condicional</td>
</tr>
<tr>
<td style="text-align: left"><strong>x-fapi-customer-ip-address</strong></td>
<td style="text-align: left">O endereço IP do usuário se estiver atualmente logado com o receptor</td>
<td style="text-align: left">Condicional</td>
</tr>
<tr>
<td style="text-align: left"><strong>x-fapi-interaction-id</strong></td>
<td style="text-align: left">Um UID RFC4122 usado como um ID de correlação. Se fornecido, o transmissor deve &quot;reproduzir&quot; esse valor no cabeçalho de resposta</td>
<td style="text-align: left">Não</td>
</tr>
<tr>
<td style="text-align: left"><strong>Authorization</strong></td>
<td style="text-align: left">Cabeçalho HTTP padrão. Permite que as credenciais sejam fornecidas dependendo do tipo de recurso solicitado</td>
<td style="text-align: left">Sim</td>
</tr>
<tr>
<td style="text-align: left"><strong>x-idempotency-key</strong></td>
<td style="text-align: left">Cabeçalho HTTP personalizado. Identificador de solicitação exclusivo para suportar a idempotência</td>
<td style="text-align: left">Condicional</td>
</tr>
<tr>
<td style="text-align: left"><strong>x-jws-signature</strong></td>
<td style="text-align: left">Cabeçalho contendo uma assinatura JWS separada do corpo do payload</td>
<td style="text-align: left">Condicional</td>
</tr>
<tr>
<td style="text-align: left"><strong>x-customer-user-agent</strong></td>
<td style="text-align: left">Indica o user agent que o usuário utiliza</td>
<td style="text-align: left">Condicional</td>
</tr>
</tbody></table>

<h3 id='cabecalho-de-resposta'>Cabeçalho de resposta</h3>

<table><thead>
<tr>
<th style="text-align: left">Nome do cabeçalho</th>
<th style="text-align: left">Descrição</th>
<th style="text-align: left">Obrigatório</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left"><strong>Content-Encoding</strong></td>
<td style="text-align: left">Cabeçalho que indica o tipo de <em>encoding</em> (geralmente algoritmo de compressão) que foi utilizado para envio da resposta.</td>
<td style="text-align: left">Não</td>
</tr>
<tr>
<td style="text-align: left"><strong>Content-Type</strong></td>
<td style="text-align: left">Representa o formato do <em>payload</em> de resposta. Deverá ser <code>application/json</code> a menos que o <em>endpoint</em> requisitado suporte outro formato e este formato tenha sido solicitado através do cabeçalho <code>Accept</code> no momento da requisição.</td>
<td style="text-align: left">Sim</td>
</tr>
<tr>
<td style="text-align: left"><strong>x-v</strong></td>
<td style="text-align: left">Cabeçalho que indica a versão implementada da API pela instituição financeira. Deve ser preenchido com um número positivo, exemplo: <code>x-v : 2</code></td>
<td style="text-align: left">Sim</td>
</tr>
<tr>
<td style="text-align: left"><strong>Retry-After</strong></td>
<td style="text-align: left">Cabeçalho que indica o tempo (em segundos) que o cliente deverá aguardar para realizar uma nova tentativa de chamada. Este cabeçalho deverá estar presente quando o código HTTP de retorno for <code>429 Too many requests</code></td>
<td style="text-align: left">Não</td>
</tr>
<tr>
<td style="text-align: left"><strong>Last-Modified</strong></td>
<td style="text-align: left">Informa a data e hora em que o recurso foi modificado pela última vez. Utiliza o padrão da RFC 7232, sessão 2.2: <em>Last-Modified</em> do protocolo HTTP.</td>
<td style="text-align: left">Não</td>
</tr>
<tr>
<td style="text-align: left"><strong>x-jws-signature</strong></td>
<td style="text-align: left">Cabeçalho contendo uma assinatura JWS separada do corpo do payload</td>
<td style="text-align: left">Condicional</td>
</tr>
<tr>
<td style="text-align: left"><strong>x-fapi-interaction-id</strong></td>
<td style="text-align: left">Um UID RFC4122 usado como um ID de correlação. O transmissor deve usar o mesmo valor recebido na requisição para o cabeçalho de resposta recebido na requisição, caso não tenha sido fornecido, deve se usar um UUID RFC4122</td>
<td style="text-align: left">Não</td>
</tr>
<tr>
<td style="text-align: left"><strong>x-rate-limit</strong></td>
<td style="text-align: left">Indica o limite de requisições na API no tempo</td>
<td style="text-align: left">Condicional</td>
</tr>
<tr>
<td style="text-align: left"><strong>x-rate-limit-remaining</strong></td>
<td style="text-align: left">Indica o número de requisições restantes</td>
<td style="text-align: left">Condicional</td>
</tr>
<tr>
<td style="text-align: left"><strong>x-rate-limit-time</strong></td>
<td style="text-align: left">Informa o tempo do limite ou tempo para reset desse limite</td>
<td style="text-align: left">Condicional</td>
</tr>
</tbody></table>

<h2 id='codigos-de-resposta-http'>Códigos de resposta HTTP</h2>

<p>Os códigos de resposta HTTP devem ser utilizados conforme tabela abaixo.</p>

<h3 id='codigos'>Códigos</h3>

<table><thead>
<tr>
<th style="text-align: left">Situação</th>
<th style="text-align: left">Código HTTP</th>
<th style="text-align: left">Notas</th>
<th style="text-align: left">POST</th>
<th style="text-align: left">GET</th>
<th style="text-align: left">DELETE</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">Consulta concluída com sucesso.</td>
<td style="text-align: left">200 OK.</td>
<td style="text-align: left"></td>
<td style="text-align: left">Não</td>
<td style="text-align: left">Sim</td>
<td style="text-align: left">Não</td>
</tr>
<tr>
<td style="text-align: left">Execução normal. A solicitação foi bem sucedida.</td>
<td style="text-align: left">201 Created.</td>
<td style="text-align: left">A operação resulta na criação de um novo recurso.</td>
<td style="text-align: left">Sim</td>
<td style="text-align: left">Não</td>
<td style="text-align: left">Não</td>
</tr>
<tr>
<td style="text-align: left">Operação de exclusão concluída com sucesso.</td>
<td style="text-align: left">204 No Content.</td>
<td style="text-align: left"></td>
<td style="text-align: left">Não</td>
<td style="text-align: left">Não</td>
<td style="text-align: left">Sim</td>
</tr>
<tr>
<td style="text-align: left">A resposta não foi modificada desde a última chamada</td>
<td style="text-align: left">304 Not Modified</td>
<td style="text-align: left"></td>
<td style="text-align: left">Não</td>
<td style="text-align: left">Sim</td>
<td style="text-align: left">Não</td>
</tr>
<tr>
<td style="text-align: left">A requisição foi malformada, omitindo atributos obrigatórios, seja no <em>payload</em> ou através de atributos na URL.</td>
<td style="text-align: left">400 Bad Request.</td>
<td style="text-align: left">A operação solicitada não será realizada.</td>
<td style="text-align: left">Sim</td>
<td style="text-align: left">Sim</td>
<td style="text-align: left">Sim</td>
</tr>
<tr>
<td style="text-align: left">Cabeçalho de autenticação ausente/inválido ou <em>token</em> inválido.</td>
<td style="text-align: left">401 Unauthorized.</td>
<td style="text-align: left">A operação foi recusada devido a um problema de autenticação.</td>
<td style="text-align: left">Sim</td>
<td style="text-align: left">Sim</td>
<td style="text-align: left">Sim</td>
</tr>
<tr>
<td style="text-align: left">O <em>token</em> tem escopo incorreto ou uma política de segurança foi violada.</td>
<td style="text-align: left">403 Forbidden.</td>
<td style="text-align: left">A operação foi recusada devido a falta de permissão para execução.</td>
<td style="text-align: left">Sim</td>
<td style="text-align: left">Sim</td>
<td style="text-align: left">Sim</td>
</tr>
<tr>
<td style="text-align: left">O recurso solicitado não existe ou não foi implementado.</td>
<td style="text-align: left">404 Not Found.</td>
<td style="text-align: left"></td>
<td style="text-align: left">Sim</td>
<td style="text-align: left">Sim</td>
<td style="text-align: left">Sim</td>
</tr>
<tr>
<td style="text-align: left">O consumidor tentou acessar o recurso com um método não suportado.</td>
<td style="text-align: left">405 Method Not Allowed.</td>
<td style="text-align: left"></td>
<td style="text-align: left">Sim</td>
<td style="text-align: left">Sim</td>
<td style="text-align: left">Sim</td>
</tr>
<tr>
<td style="text-align: left">A solicitação continha um cabeçalho Accept diferente dos tipos de mídia permitidos ou um conjunto de caracteres diferente de UTF-8.</td>
<td style="text-align: left">406 Not Acceptable.</td>
<td style="text-align: left"></td>
<td style="text-align: left">Sim</td>
<td style="text-align: left">Sim</td>
<td style="text-align: left">Sim</td>
</tr>
<tr>
<td style="text-align: left">Indica que o recurso não está mais disponível.</td>
<td style="text-align: left">410 Gone.</td>
<td style="text-align: left"></td>
<td style="text-align: left">Sim</td>
<td style="text-align: left">Sim</td>
<td style="text-align: left">Sim</td>
</tr>
<tr>
<td style="text-align: left">A operação foi recusada porque o payload está em um formato não suportado pelo endpoint.</td>
<td style="text-align: left">415 Unsupported Media Type.</td>
<td style="text-align: left"></td>
<td style="text-align: left">Sim</td>
<td style="text-align: left">Não</td>
<td style="text-align: left">Não</td>
</tr>
<tr>
<td style="text-align: left">A solicitação foi bem formada, mas não pôde ser processada devido à lógica de negócios específica da solicitação.</td>
<td style="text-align: left">422 Unprocessable Entity.</td>
<td style="text-align: left">Se aplicável ao <em>endpoint</em>, espera-se que esse erro resulte em um <em>payload</em> de erro.</td>
<td style="text-align: left">Sim</td>
<td style="text-align: left">Sim</td>
<td style="text-align: left">Não</td>
</tr>
<tr>
<td style="text-align: left">A operação foi recusada, pois muitas solicitações foram feitas dentro de um determinado período ou o limite global de requisições concorrentes foi atingido.</td>
<td style="text-align: left">429 Too Many Requests.</td>
<td style="text-align: left">A limitação é um <a href="#requisitos-nao-funcionais">Requisito Não Funcional</a>. O titular dos dados deve incluir o cabeçalho <code>Retry-After</code> na resposta indicando quanto tempo o consumidor deve esperar antes de tentar novamente a operação.</td>
<td style="text-align: left">Sim</td>
<td style="text-align: left">Sim</td>
<td style="text-align: left">Sim</td>
</tr>
<tr>
<td style="text-align: left">Ocorreu um erro no <em>gateway</em> da API ou no microsserviço.</td>
<td style="text-align: left">500 Internal Server Error.</td>
<td style="text-align: left">A operação falhou.</td>
<td style="text-align: left">Sim</td>
<td style="text-align: left">Sim</td>
<td style="text-align: left">Sim</td>
</tr>
<tr>
<td style="text-align: left">O serviço está indisponível no momento.</td>
<td style="text-align: left">503 Service Unavailable.</td>
<td style="text-align: left"></td>
<td style="text-align: left">Sim</td>
<td style="text-align: left">Sim</td>
<td style="text-align: left">Sim</td>
</tr>
<tr>
<td style="text-align: left">O servidor não pôde responder em tempo hábil.</td>
<td style="text-align: left">504 Gateway Timeout.</td>
<td style="text-align: left">Retornado se ocorreu um tempo limite, mas um reenvio da solicitação original é viável (caso contrário, use 500 <em>Internal Server Error</em>).</td>
<td style="text-align: left">Sim</td>
<td style="text-align: left">Sim</td>
<td style="text-align: left">Sim</td>
</tr>
</tbody></table>

<h2 id='convencoes-de-payload'>Convenções de payload</h2>

<p>Esta seção do padrão descreve as estruturas padrões de requisição e resposta para todos os <em>endpoints</em> das APIs, assim como as convenções de nomenclatura para os atributos.</p>

<h3 id='estrutura-de-requisicao'>Estrutura de requisição</h3>

<blockquote>
<p>Estrutura da requisição</p>
</blockquote>

<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"..."</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>

<p>Cada requisição deve ser um objeto JSON contendo um objeto <code>data</code> para armazenar os dados primários da requisição.</p>

<p>No mesmo nível do objeto <code>data</code>, poderá existir um objeto <code>meta</code> se assim for especificado pelo <em>endpoint</em>.
O objeto <code>meta</code>  é usado para fornecer informações adicionais ao <em>endpoint</em>, como parâmetros de paginação, contagens de paginação ou outros propósitos complementares ao funcionamento da API.</p>

<p>A definição do conteúdo para o objeto <code>data</code> será definida separadamente para cada <em>endpoint</em>.</p>

<h3 id='estrutura-de-resposta'>Estrutura de resposta</h3>

<blockquote>
<p>Estrutura de resposta</p>
</blockquote>

<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"..."</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:{</span><span class="w">
    </span><span class="s2">"..."</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"..."</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>

<p>Cada endpoint retornará um objeto JSON contendo os atributos abaixo:</p>

<ul>
<li>Se a resposta for bem-sucedida (200 OK), o objeto JSON irá conter:

<ul>
<li>obrigatóriamente um objeto <code>data</code></li>
<li>obrigatóriamente um objeto <code>links</code></li>
<li>opcionalmente um objeto <code>meta</code>, se necessário pela definição do endpoint requisitado</li>
</ul></li>
<li>Se a resposta for malsucedida (não 200 OK), o objeto JSON poderá conter:

<ul>
<li>um objeto <code>errors</code> (conforme a definição específica do endpoint)</li>
</ul></li>
</ul>

<p>A definição do conteúdo para os objetos <code>data</code> e <code>meta</code> será definida separadamente para cada endpoint.</p>

<p>O objeto <code>links</code> irá conter hypermedia (referências para recursos relacionados) para outros recursos da API requisitada.</p>

<p>O objeto de <code>links</code> sempre irá conter o atributo <code>self</code> que irá apontar para a URI da solicitação atual.</p>

<blockquote>
<p>Estrutura de resposta de erros</p>
</blockquote>

<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
        </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">,</span><span class="w">
        </span><span class="nl">"detail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"meta"</span><span class="p">:{</span><span class="w">
    </span><span class="s2">"..."</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>

<ul>
<li>O objeto <code>errors</code> será um array de zero ou mais objetos. Os atributos deste objeto serão os descritos abaixo:

<ul>
<li>obrigatoriamente o atributo <code>code</code> contendo um código de erro específico do <em>endpoint</em>;</li>
<li>obrigatoriamente o atributo <code>title</code> contendo um título legível por humanos do erro deste erro específico;</li>
<li>obrigatoriamente o atributo <code>detail</code> contendo uma descrição legível por humanos deste erro específico;</li>
<li>opcionalmente o objeto <code>meta</code> contendo dados adicionais sobre o <em>endpoint</em> que seja relevante para o erro.</li>
</ul></li>
</ul>

<h3 id='convencoes-de-nomenclatura-de-atributos'>Convenções de nomenclatura de atributos</h3>

<p><b>Caracteres válidos em nomes de atributos</b></p>

<p>Todos os nomes de objetos e atributos definidos nos objetos JSON de requisição e resposta devem ser nomeados seguindo o padrão camelCase, tendo seu nome composto apenas por letras (a-z, A-Z) e números (0-9).</p>

<p>Qualquer outro caractere não deve ser usado nos nomes dos objetos e atributos, com exceção do caractere <code>-</code> (hífen), que poderá ser utilizado apenas conforme descrito na seção <a href="#introducao-extensibilidade">Extensibilidade</a>.</p>

<p><b>Estilo de nomeação de atributos</b></p>

<p>Os nomes dos objetos e atributos devem ser nomes significativos e em língua inglesa. Quando houver diferença entre inglês americano e inglês britânico no termo a ser utilizado, deverá ser utilizado o termo em inglês britânico.
P.ex. Utilizar o termo <em>Post Code</em> (Reino Unido) ao invés de <em>Zip Code</em> (Estados Unidos).</p>

<p><em>Arrays</em> devem ser nomeados no plural. Demais atributos deverão ser nomeados no singular.</p>

<h3 id='convencoes-de-propriedade-dos-atributos'>Convenções de propriedade dos atributos</h3>

<p><b>Tipos de dados dos atributos</b></p>

<p>Cada atributo deverá estar associado a um tipo de dado. A lista de tipos de dados válidos está definida na seção <a href="#introducao-tipos-de-dados-comuns">tipos de dados comuns</a>. Se um tipo de dado personalizado é necessário para um atributo, o mesmo deverá ser classificado como uma string com uma descrição clara de como o valor da propriedade deve ser interpretado.</p>

<p><b>Atributos Obrigatórios / Opcionais</b></p>

<p>Segundo Instrução Normativa nº 34, BCB de 2020: ‘Todos os elementos que compõem as especificações das APIs (endpoints, operações, parâmetros, propriedades de respostas etc.) devem ser explicitamente declarados como “Obrigatório”, “Opcional” ou “Condicional”, caso sejam obrigatórios apenas em certas condições’.</p>

<p>Os atributos obrigatórios devem estar presentes e ter um valor não nulo, seja em uma requisição ou resposta, para que payload seja considerado válido.</p>

<p>Os atributos condicionais podem ter uma restrição vinculada a eles, tornando-os obrigatórios conforme a situação descrita na coluna &#39;restrição&#39; do dicionário de dados.</p>

<p><b>Atributos vazios / nulos</b></p>

<p>Um atributo omitido (ou seja, um atributo que não está presente no <em>payload</em>) será considerado equivalente a um atributo que esteja presente com o valor <code>null</code>.</p>

<p>Uma <em>string</em> vazia (<code>“”</code>) não será considerada equivalente a <code>null</code>.</p>

<p>O valor booleano <code>false</code> não será considerado equivalente a <code>null</code>. Os atributos booleanos opcionais, por definição, possuirão três valores possíveis: verdadeiro (<code>true</code>), falso (<code>false</code>) e indeterminado (<code>null</code>).</p>

<p>Na situação onde o campo a ser informado no payload seja obrigatório e a Instituição, seja consumidora no envio ou transmissora no retorno, não a possuir, deve-se implementar o valor padronizado: “NA” - Não se Aplica, com exceção dos campos declarados como ENUM que deverão ser sempre preenchidos com os valores válidos para o ENUM correspondente.</p>

<h2 id='convencoes-de-nomenclatura'>Convenções de nomenclatura</h2>

<p>Todos os nomes devem ser autoexplicativos, sem redundância de termos e sem ambiguidade de entendimento, além de seguir o padrão <em>Lower Camel Case</em> (primeira letra de cada termo maiúscula, com exceção do primeiro termo, que fica todo em minúsculas e sem espaços ou pontuações entre os termos). Ex: “areaCode”.</p>

<p>Os nomes das estruturas (composição de atributos sobre um assunto) que podem ter mais de uma ocorrência devem sempre estar no plural.</p>

<p>Os nomes dos atributos devem:</p>

<ul>
<li><p>Sempre estar no singular</p></li>
<li><p>Nos casos em que o nome não ficar claro, devem ser incluídos mais termos para esclarecer o entendimento</p></li>
<li><p>Para garantir o entendimento e a padronização, nos casos de atributos que tratem dados específicos, sempre devem ser usados termos complementares no fim dos nomes. São esses:</p>

<ul>
<li>nomes = Name (p.ex. ownerName)</li>
<li>datas = Date (p.ex. openingDate)</li>
<li>horários = Time (p.ex. openingTime)</li>
<li>quantidades = Quantity (p.ex. eventLimitQuantity)</li>
<li>textos explicativos = Info* (p.ex. additionalInfo)</li>
</ul>

<p><code>*Para textos explicativos de informações complementares, o nome completo do atributo é “additionalInfo”</code></p></li>
<li><p>Em atributos que sejam indicadores binários (<em>flags</em>), o nome deve estar formatado como pergunta, com um verbo como primeiro termo. Ex: “hasRewardProgram”</p></li>
</ul>

<h2 id='tipos-de-dados-comuns'>Tipos de dados comuns</h2><h3 id='propriedades'>Propriedades</h3>
<table><thead>
<tr>
<th style="text-align: left">Tipo</th>
<th style="text-align: left">Descrição</th>
<th style="text-align: left">Exemplos válidos</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left"><a id="commonFieldAmountString"></a>AmountString</td>
<td style="text-align: left">- Uma <em>string</em> que representa um valor monetário.<br>- Um número positivo, zero ou negativo.<br>- Sem o símbolo da moeda.<br>- Com pelo menos 1 e no máximo 16 dígitos antes do ponto decimal.<br>- Com no mínimo 2 dígitos (mais dígitos são permitidos, porém não obrigatórios).<br>- Sem formatação adicional. Ex: Separador de milhar.</td>
<td style="text-align: left">&quot;1.37&quot;<br>&quot;54.85&quot;<br>&quot;3456928.98&quot;<br>&quot;-2387.02&quot;</td>
</tr>
<tr>
<td style="text-align: left"><a id="commonFieldBoolean"></a>Boolean</td>
<td style="text-align: left">- Valor booleano padrão.</td>
<td style="text-align: left">true<br>false</td>
</tr>
<tr>
<td style="text-align: left"><a id="commonFieldCurrencyString"></a>CurrencyString</td>
<td style="text-align: left">- Uma <em>string</em> que representa a abreviação da moeda conforme especificação ISO-4217.</td>
<td style="text-align: left">&quot;BRL&quot;<br>&quot;USD&quot;<br>&quot;EUR&quot;</td>
</tr>
<tr>
<td style="text-align: left"><a id="commonFieldDateTimeString"></a>DateTimeString</td>
<td style="text-align: left">- Uma <em>string</em> com data e hora conforme especificação RFC-3339, sempre com a utilização de timezone UTC(UTC time format).</td>
<td style="text-align: left">&quot;2020-07-21T08:30:00Z&quot;</td>
</tr>
<tr>
<td style="text-align: left"><a id="commonFieldDurationString"></a>DurationString</td>
<td style="text-align: left">- Uma <em>string</em> que representa um período de duração conforme especificação ISO-8601.</td>
<td style="text-align: left">&quot;P23DT23H&quot;<br>&quot;PT2H30M&quot;</td>
</tr>
<tr>
<td style="text-align: left"><a id="commonFieldEnum"></a>Enum</td>
<td style="text-align: left">- Uma <em>string</em> que representa um domínio de valores<br>- Todos os possíveis valores são definidos.<br>- Os valores devem estar em letras maiúsculas.<br>- Espaços em branco devem ser substituídos por _.<br>- Artigos e preposições devem ser removidos.<br>- Não devem possuir caracteres acentuados.</td>
<td style="text-align: left">&quot;PRIMEIRA_OPCAO&quot;<br>&quot;OUTRA_OPCAO_EXISTENTE&quot;</td>
</tr>
<tr>
<td style="text-align: left"><a id="commonFieldInteger"></a><em>Integer</em></td>
<td style="text-align: left">- Números inteiros.</td>
<td style="text-align: left">-1<br>0<br>1</td>
</tr>
<tr>
<td style="text-align: left"><a id="commonFieldRateString"></a>RateString</td>
<td style="text-align: left">- Uma string que representa um valor percentual, tendo como referência que 100% é igual ao valor 1.<br>- Com pelo menos 1 e no máximo 16 dígitos antes do ponto decimal.<br>- Com no máximo 16 dígitos após o ponto decimal.<br>- Sem formatação adicional. Ex: Separador de milhar.</td>
<td style="text-align: left">&quot;0.01&quot;<br>&quot;0.1&quot;<br>&quot;-0.05&quot;<br>&quot;-0.98365&quot;<br>&quot;0.1023&quot;</td>
</tr>
<tr>
<td style="text-align: left"><a id="commonFieldString"></a><em>String</em></td>
<td style="text-align: left">- Padrão de texto UTF-8 sem restrição de conteúdo.</td>
<td style="text-align: left">&quot;Uma <em>string</em> qualquer.&quot;</td>
</tr>
<tr>
<td style="text-align: left"><a id="commonFieldTimeString"></a>TimeString</td>
<td style="text-align: left">- Uma <em>string</em> que representa a hora conforme especificação RFC-3339,sempre com a utilização de timezone UTC(UTC time format).</td>
<td style="text-align: left">&quot;00:39:57Z&quot;</td>
</tr>
<tr>
<td style="text-align: left"><a id="commonFieldURIString"></a>URIString</td>
<td style="text-align: left">- Uma <em>string</em> que representa URI válida.</td>
<td style="text-align: left">&quot;http://www.google.com.br&quot;</td>
</tr>
<tr>
<td style="text-align: left"><a id="commonFieldCountryCode"></a>CountryCode</td>
<td style="text-align: left">- Código do pais de acordo com o código “alpha3” do ISO-3166.</td>
<td style="text-align: left">&quot;BRA&quot;</td>
</tr>
<tr>
<td style="text-align: left"><a id="commonFieldIbgeCode"></a>IbgeCode</td>
<td style="text-align: left">- Código IBGE de Município. A Tabela de Códigos de Municípios do IBGE apresenta a lista dos municípios brasileiros associados a um código composto de 7 dígitos, sendo os dois primeiros referentes ao código da Unidade da Federação.</td>
<td style="text-align: left">&quot;3550308&quot;</td>
</tr>
<tr>
<td style="text-align: left"><a id="commonFieldDateString"></a>DateString</td>
<td style="text-align: left">- Uma string com data conforme especificação RFC-3339</td>
<td style="text-align: left">&quot;2014-03-19&quot;</td>
</tr>
</tbody></table>

<h2 id='paginacao'>Paginação</h2>
<p>Cada recurso de cada API pode possuir ou não paginação, caso a quantidade de registros retornados justifique a mesma. 
A paginação estará disponível e deverá funcionar independente se o recurso permite filtros por <em>query</em> ou POST. Isso é, filtros e paginação são aplicados de forma independente.</p>

<h3 id='parametros-de-requisicao'>Parâmetros de Requisição</h3>

<blockquote>
<p>Exemplo de query com paginação</p>
</blockquote>

<div class="highlight"><pre class="highlight http tab-http"><code><span class="err">GET {uri}?page=1&amp;page-size=25
</span></code></pre></div>

<p>Quando existir paginação para o recurso deverão ser utilizados os parâmetros de query abaixo para a navegação dos resultados:</p>

<table><thead>
<tr>
<th style="text-align: left">Parâmetro</th>
<th style="text-align: left">Descrição</th>
<th style="text-align: left">Valor Padrão</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">page</td>
<td style="text-align: left">Número da página que está sendo requisitada (o valor da primeira página é 1).</td>
<td style="text-align: left">1</td>
</tr>
<tr>
<td style="text-align: left">page-size</td>
<td style="text-align: left">Quantidade total de registros por páginas.</td>
<td style="text-align: left">25</td>
</tr>
</tbody></table>

<aside class="notice">
O valor padrão será assumido sempre que o parâmetro não estiver preenchido ou estiver nulo
</aside>

<h3 id='atributos-de-resposta'>Atributos de Resposta</h3>

<blockquote>
<p>Exemplo de paginação</p>
</blockquote>

<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"..."</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.banco.com.br/open-banking/products-services/v1/personal-invoice-financing"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"first"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.banco.com.br/open-banking/products-services/v1/personal-invoice-financing"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"prev"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"next"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api.banco.com.br/open-banking/products-services/v1/personal-invoice-financing"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"totalRecords"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"totalPages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>

<p>Além dos dados requisitados, as respostas paginadas também terão em sua estrutura dois objetos adicionais que incluirão parâmetros para facilitar a nagevação das páginas:</p>

<h3 id='links'>Links</h3>

<p>O objeto <code>links</code> passará por revisão subsequente de modo a atender as próximas Fases do Open Banking, em especial a partir da Fase 2. No objeto <code>links</code>, serão retornadas hypermedia (referências para os recursos relacionados) de paginação conforme parâmetros abaixo:</p>

<table><thead>
<tr>
<th style="text-align: left">Parâmetro</th>
<th style="text-align: left">Descrição</th>
<th style="text-align: left">Restrição</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">first</td>
<td style="text-align: left">A URI para requisitar a primeira página.</td>
<td style="text-align: left">Obrigatório se a resposta não for a primeira página.</td>
</tr>
<tr>
<td style="text-align: left">last</td>
<td style="text-align: left">A URI para requisitar a última página.</td>
<td style="text-align: left">Obrigatório se a resposta não for a última página.</td>
</tr>
<tr>
<td style="text-align: left">prev</td>
<td style="text-align: left">A URI para requisitar a página anterior.</td>
<td style="text-align: left">Obrigatório se a resposta não for a primeira página.</td>
</tr>
<tr>
<td style="text-align: left">next</td>
<td style="text-align: left">A URI para requisitar a próxima página.</td>
<td style="text-align: left">Obrigatório se a resposta não for a última página.</td>
</tr>
</tbody></table>

<h3 id='meta'>Meta</h3>

<p>No objeto <code>meta</code>, serão retornadas informações sobre o total de registros disponíveis</p>

<table><thead>
<tr>
<th style="text-align: left">Parâmetro</th>
<th style="text-align: left">Descrição</th>
<th style="text-align: left">Restrição</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">totalRecords</td>
<td style="text-align: left">O número total de registros da requisição.</td>
<td style="text-align: left">Este atributo é obrigatório.</td>
</tr>
<tr>
<td style="text-align: left">totalPages</td>
<td style="text-align: left">O número total de páginas da requisição.</td>
<td style="text-align: left">Este atributo é obrigatório. Se não possuir nenhum registro o valor deve ser 0.</td>
</tr>
</tbody></table>

<aside class="warning">
Para cada um desses atributos o tamanho da página especificado na requisição deverá ser utilizado para o cálculo dos valores.
</aside>

<h3 id='regras-adicionais'>Regras Adicionais</h3>

<ul>
<li>Não é esperado que os provedores implementem paginação com isolamento de transação. Os dados que serão retornados podem mudar entre requisições subsequentes. Isto pode causar situações onde um mesmo registro pode ser retornado em mais de uma página.</li>
<li>O tamanho máximo da página é <code>1000</code> registros para qualquer endpoint (a menos que na documentação desse esteja informando outros valores).</li>
<li>Se for requisitado uma quantidade de registros maior que o suportado, o retorno será o código HTTP <em>status code</em> <code>422</code>
<code>Unprocessable Entity</code>, indicando que o servidor entendeu a requisição, mas não é possível processá-la conforme foi solicitado.</li>
</ul>

<h2 id='formacao-e-estabilidade-do-id'>Formação e Estabilidade do ID</h2>

<p>Dentro desses padrões, a serem melhor especificados a partir da Fase 2 do Open Banking no Brasil, os IDs de recursos são necessários para atender ao seguinte:</p>

<ul>
<li>O ID de um recurso deve ser especificado no <em>endpoint</em> de uma API apenas para obter detalhes do recurso ou para realizar alterações no mesmo.</li>
<li>Se o ID for especificado nos padrões do Open Banking, então ele é obrigatório e deverá ser fornecido pela entidade implementadora da API de acordo com o padrão definido.</li>
<li>Se um ID for especificado, o mesmo deverá ser totalmente desconectado de significados com outras entidades. Por exemplo, um ID não deve ser uma combinação de outros campos ou uma <em>string</em> que possa ter conteúdo sensível que possa ser extraído.</li>
<li>Os IDs devem ser únicos, e sua padronização será detalhada a partir da Fase 2 do Open Banking no Brasil, porém sua unicidade pode estar dentro de um contexto. Por exemplo, um ID de conta corrente deve ser único, porém apenas dentro do contexto de conta corrente.</li>
<li>Nos <em>payloads</em> o nome de campo &quot;id&quot; nunca deverá ser utilizado. Cada campo ID deverá ter um nome significativo, dessa forma independentemente de onde o ID for utilizado entre múltiplos <em>endpoints</em>, ele sempre irá se referir ao seu objeto principal. Por exemplo, IDs para conta deverão ser representados no JSON como &quot;accountId&quot;.</li>
</ul>

<h3 id='idempotencia-principio-adicional'>Idempotência (princípio adicional)</h3>

<p>APIs serão definidas como idempotentes para não causar uma experiência ruim ao consumidor ou aumentar os indicadores de risco falso positivo.
Trata-se de recurso necessário para garantir que não haja duplicidade em caso deperda de comunicação e não deve se limitar aos verbos HTTP, devendo ser aplicado ao design completo da API.</p>

<h3 id='identificadores-unicos-principio-ja-existente'>Identificadores únicos (princípio já existente)</h3>

<p>Um recurso REST deverá ter um identificador exclusivo que possa ser usado para identificar o recurso alvoda API.
Este identificador será usado para criar URLs que permitam endereçar recursos específicos,obedecendo aos padrões definidos nesta documentação,no item Formação e estabilidade do ID.</p>

<h2 id='extensibilidade'>Extensibilidade</h2>

<p>Os padrões de Open Banking podem não cobrir todas as possibilidades de objetos retornados ou APIs que os participantes desejam expor. 
Os participantes podem ter o desejo de realizar inovações sobre os padrões definidos oferecendo mais dados afim de atender demandas específicas de mercado. É nossa intenção que os padrões definidos não apenas permitam estas extensões como também sirvam como base para futuras alterações na própria definição dos padrões.</p>

<p>No entanto, é importante que um participante que esteja querendo estender as APIs não impeça um consumidor que foi projetado para consumir apenas o <em>endpoint</em> padrão funcione corretamente.</p>

<p>Para atender tanto as demandas de quem deseja estender as APIs (participantes) quanto as demandas de quem irá realizar o consumo (consumidor das APIs), foram definidos os critérios abaixo.</p>

<p>É possível estender os padrões nos seguintes aspectos:</p>

<ul>
<li>O participante pode oferecer <strong>uma API</strong> completamente nova que não está coberta nos padrões definidos</li>
<li>O participante pode oferecer <strong>novos endpoints</strong> em uma API que já foi definida no padrão</li>
<li>O participante pode oferecer <strong>campos de entrada e retorno opcionais</strong> para um endpoint que já foi definido no padrão</li>
</ul>

<h3 id='id-dos-participantes'>ID dos participantes</h3>

<blockquote>
<p>Cada participantes terá um ID que representa a sua instituição. Os participantes da atual versão estão listados abaixo:
<ul>
<li>BBAS - Banco do Brasil</li>
<li>BBCD - Bradesco</li>
<li>BTGP - BTG Pactual</li>
<li>CAIX - Caixa Econônica Federal</li>
<li>ITAU - Itau</li>
<li>STDR - Santander</li>
<li>BRGS - Banrisul</li>
<li>BNBR - Banco do Nordeste do Brasil</li>
<li>BNDS - BNDES</li>
<li>CITI - Citibank</li>
<li>SAFR - Safra</li>
<li>BABV - Votorantim</li>
</ul></p>
</blockquote>

<p>Participantes que desejam estender os padrões devem adicionar seu prefixo para identificar todas as extensões.
Campos adicionais no retorno de <em>endpoints</em> existentes ou em novos <em>endpoints</em> devem usar o prefixo do participante. O prefixo deve ser no formato exposto ao lado (4 letras) e não devem haver prefixos duplicados entre os participantes.</p>

<p>Nesta documentação, quando tivermos que nos referir ao prefixo do participante, o termo <code>&lt;PID&gt;</code> será utilizado.</p>

<h3 id='novas-apis'>Novas APIs</h3>

<p>Quando a extensão for a criação de uma nova API, o participante deve adicionar seu prefixo a URI antes do nome da nova API, conforme exemplo abaixo.</p>

<p>Por exemplo, uma API definida pelo padrão seguirá o seguinte formato: 
<code>&lt;host&gt; / open-banking / &lt;api&gt; / &lt;versão&gt; / &lt;recurso&gt;</code></p>

<p>Uma API estendida por um participante deverá estar no formato abaixo:
<code>&lt;host&gt; / open-banking / &lt;PID&gt; / &lt;api&gt; / &lt;versão&gt; / &lt;recurso&gt;</code></p>

<p>Para os <em>endpoints</em> definidos dentro da estrutura acima, os atributos dos <em>payloads</em> não precisam conter o prefixo do participante, pois entende-se que todos os recursos da API estendida não conflitam de nenhum modo com as definidas pelo padrão.</p>

<aside class="warning">
    <b>Importante:</b>
    <ul>
        <li>Este método <b>não deve</b> ser usado para criar duplicações modificadas dos *endpoints* já definidos no padrão.</li>
        <li>Os novos *endpoints* <b>devem</b> atender às convenções e princípios do padrão, incluindo convenções de nomes e tipos de dados.</li>
    </ul>
</aside>

<h3 id='novos-endpoints-em-apis-existentes'>Novos endpoints em APIs existentes</h3>

<p>Quando o participante desejar adicionar um novo <em>endpoint</em> em uma API já especificada no padrão, o participante deve incluir seu <code>&lt;PID&gt;</code> como prefixo do recurso que será implementado.</p>

<p>Por exemplo, assumindo a existência do <em>endpoint</em> abaixo para consulta das transações de uma conta:
<code>&lt;host&gt;/open-banking/accounts/v1/accounts/{account ID}/transactions</code></p>

<p>Se o participante deseja adicionar um novo <em>endpoint</em> que resume as transações por um período, então este <em>endpoint</em> poderia ser definido como:
<code>&lt;host&gt;/open-banking/accounts/v1/accounts/{account ID}/&lt;PID&gt;-balance-movement</code></p>

<aside class="warning">
    <b>Importante:</b>
    <ul>
        <li>O prefixo deve ser adicionado antes do nome do recurso seguido por um hífen. (-)</li>
        <li>Como o *endpoint* é novo, os atributos do *payload* de requisição e resposta não precisam conter o prefixo do participante.</li>
        <li>Se um *endpoint* possuir múltiplos níveis na URI do recurso, apenas o recurso mais a direita deverá possuir o prefixo do participante. </li>
        <li>Os novos *endpoints* <b>devem</b> atender às convenções e princípios do padrão, incluindo convenções de nomes e tipos de dados.</li>
    </ul>
</aside>

<h3 id='campos-de-retorno-adicionais-em-um-endpoint-existente'>Campos de retorno adicionais em um endpoint existente</h3>

<p>Quando o participante desejar adicionar um novo campo ao <em>payload</em> de resposta, o atributo deverá receber o prefixo do participante seguido por um hífen <code>&lt;PID&gt;-</code>.</p>

<p>Se um objeto estiver sendo adicionado ao <em>payload</em> de resposta, apenas o nome do objeto precisa receber o prefixo. Qualquer atributo dentro do novo objeto pode ser nomeado normalmente.</p>

<aside class="warning">
    <b>Importante:</b>
    <ul>
        <li>Campos existentes <b>não devem</b> ser modificados. Isto inclui adicionar novas opções em campos do tipo Enum.</li>
        <li>Um campo obrigatório <b>não deve</b> se tornar opcional como resultado de uma extensão.</li>
        <li>*Payloads* de requisição também podem ser estendidos, porém o resultado ainda deve respeitar os padrões definidos caso o campo de extensão não tenha sido utilizado (por definição, campos adicionais no *payload* de *request* devem ser opcionais).</li>
        <li>Parâmetros de *query* <b>podem</b> ser adicionados desde que seguidas as mesmas premissas de um novo campo no *payload* de requisição (com prefixo, não obrigatório e sem efeitos colaterais caso não seja informado).</li>
        <li>Parâmetros por *header* <b>podem</b> ser adicionados desde que seguidas as mesmas premissas de um novo campo no *payload* de requisição. No entanto, seu prefixo deve estar no formato `x-<PID>-`.</li>
        <li>Novos campos <b>devem</b> atender os padrões definidos de nomenclatura e tipos de dados.</li>
    </ul>
</aside>

<h3 id='parametros-query-adicionais'>Parâmetros query adicionais</h3>

<p>Quando for adicionado um novo parâmetro de <em>query</em> a um <em>endpoint</em> existente, o novo parâmetro deve ter o prefixo <code>&lt;PID&gt;-</code>, evitando assim colisões com parâmetros já existentes.</p>

<h3 id='filtro-de-dados'>Filtro de Dados</h3>

<p>Opcionalmente, a entidade transmissora de dados poderá realizar filtro de dados através de <em>query</em> de entrada, baseado em campos que julgue relevante para a melhor experiência do cliente.<br>
A informação de quais possibilidades estarão disponíveis (<em>query parameter</em>) deverá constar em documentação adicional disponibilizada pela entidade transmissora.    </p>

<h3 id='extensao-do-versionamento'>Extensão do versionamento</h3>

<p>Como descrito na seção <a href="#introducao-versionamento">versionamento</a>, o versionamento existe apenas no nível das APIs e não no nível dos <em>endpoints</em>, no entanto caso seja necessário realizar versionamento de um <em>endpoint</em> customizado, o participante poderá utilizar o <em>header</em> <code>x-&lt;PID&gt;-v</code> para que o consumidor possa especificar qual versão do <em>endpoint</em> está requisitando.</p>
<h1 id='glossario'>Glossário</h1>
<p><h2 id='glossario'>Glossário</h2><h3 id='agencia-branch'><a id="glossarioAgencia">Agência (Branch)</a></h3>
<p>É a dependência destinada ao atendimento aos clientes, ao público em geral e aos associados de cooperativas de crédito, no exercício de atividades da instituição, não podendo ser móvel ou transitória</p>
<h3 id='adiantamento-a-depositante-unarranged-account-overdraft'><a id="glossarioAdiantamentoDepositante">Adiantamento a Depositante (Unarranged Account Overdraft)</a></h3>
<p>O valor que o banco libera na conta-corrente do cliente, em casos excepcionais, o valor necessário para cobrir algum saque, pagamento, débito automático ou cheque, quando o saldo disponível não é suficiente.</p>
<h3 id='bandeira-credit-card-network'><a id="glossarioBandeira">Bandeira (Credit Card Network)</a></h3>
<p>São instituições que autorizam o uso de sua marca e de sua tecnologia por emissores e credenciadoras de estabelecimentos. Essas marcas aparecem nos cartões e nos estabelecimentos credenciados.</p>
<h3 id='cartao-multiplo-multiple-creditcard'><a id="glossarioCartaoMultiplo">Cartão Múltiplo (Multiple CreditCard)</a></h3>
<p>Trata-se de um único cartão que possui mais de uma função, ou seja, que pode ser utilizado como débito, crédito e para a movimentação da conta.</p>
<h3 id='cbo-cbo-code'><a id="glossarioCBO">CBO (Cbo Code)</a></h3>
<p>A Classificação Brasileira de Ocupações (CBO) é um documento que retrata a realidade das profissões do mercado de trabalho brasileiro. Foi instituída com base legal na Portaria nº 397, de 10.10.2002. Trata-se de um sistema de classificação responsável pela codificação dos títulos e conteúdos dos cargos e ocupações do mercado de trabalho brasileiro</p>
<h3 id='cheque-especial-arranged-overdraft'><a id="glossarioChequeEspecial">Cheque Especial (Arranged Overdraft)</a></h3>
<p>É uma operação de crédito, a exemplo do empréstimo, mas que é pré-aprovada e vinculada a uma conta de depósitos à vista. Tem o objetivo de cobrir movimentações financeiras quando não há mais saldo disponível na conta.</p></p>

<p>O banco disponibiliza ao cliente um limite de crédito rotativo que, embora apareça no extrato da conta, não é um recurso do cliente. Quando utilizado esse valor, o banco pode cobrar juros sobre o valor usado, ou seja, sobre o saldo devedor.</p>

<p><em>Fonte: <a href="https://www.bcb.gov.br/detalhenoticia/402/noticia">link</a></em></p>

<h3 id='cnae-cnae-code'><a id="glossarioCNAE">CNAE (Cnae Code)</a></h3>

<p>Trata-se de um código utilizado para identificar quais são as atividades econômicas exercidas por uma empresa. A Classificação Nacional de Atividades Econômicas - CNAE é oficialmente adotada pelo Sistema Estatístico Nacional e pelos órgãos federais gestores de registros administrativos</p>

<h3 id='cnpj-cnpj-number'><a id="glossarioCNPJ">CNPJ (CNPJ Number)</a></h3>

<p>Código gerido pela Secretaria da Receita Federal e utilizado para identificação das empresas no Cademp. O CNPJ corresponde ao número de inscrição no Cadastro de Pessoa Jurídica. Composto por: os oito primeiros números à esquerda (XX. XXX. XXX) formam a &quot;raiz&quot; ou base, que identifica a empresa de forma única. Os quatro seguintes números de ordem das filiais da empresa. Normalmente a empresa matriz tem este campo preenchido com &#39;0001&#39;. Os dois últimos números correspondem ao dígito verificador. composição do CNPJ pode ser assim representada, conforme ex. &#39;50.685.362/0001-35&#39;.</p>

<h3 id='codigo-compe-compecode'><a id="glossarioCompe">Código Compe (compeCode)</a></h3>

<p>O Compe (Sistema de Compensação de Cheques e Outros Papéis) é um sistema que identifica e processa as compensações bancárias. Ele é representado por um código de três dígitos que serve como identificador de bancos, sendo assim, cada instituição bancária possui um número exclusivo.</p>

<h3 id='codigo-ocupacao-receita-federal-receita-federal-code'><a id="glossarioCodigoOcupacaoRF">Código Ocupação Receita Federal – Receita Federal Code</a></h3>

<p>Código da atividade profissional relacionada com a principal fonte pagadora dos seus rendimentos, assim entendida a que pagou maior rendimento independentemente de escolaridade ou de formação acadêmica</p>

<p><em>Fonte: <a href="http://www.receita.fazenda.gov.br/publico/programas/irpf/2010/Orientacoes/ManualPreenchimentoDAAIRPF2010.pdf">link</a></em></p>

<h3 id='conta-individual-sole-account'><a id="glossarioContaIndividual">Conta Individual (Sole Account)</a></h3>

<p>Tipo de conta que comporta apenas um titular.</p>

<h3 id='conta-conjunta-nao-solidaria-joint-account-and'><a id="glossarioContaConjuntaNaoSolidaria">Conta Conjunta Não-solidária (Joint Account And)</a></h3>

<p>Tipo de conta que comporta mais de um titular, em que os titulares dependem da autorização de “pelo menos” um diferente titular para realização de movimentações em contas.</p>

<h3 id='conta-conjunta-solidaria-joint-account-or'><a id="glossarioContaConjuntaSolidaria">Conta Conjunta Solidária (Joint Account Or)</a></h3>

<p>Tipo de conta que comporta mais de um titular, tendo todos os titulares livre movimentação sem que seja exigida a autorização de outros titulares.</p>

<h3 id='conta-de-deposito-a-vista-current-account'><a id="glossarioContaDepositoVista">Conta de Depósito à Vista (Current Account)</a></h3>

<p>Conhecida popularmente pelo nome de conta corrente. É a maneira mais comum de manter dinheiro em uma instituição financeira. Funciona como um cofre, em que o cliente deposita seu dinheiro e pode ter acesso a serviços como pagamento de contas, saques, transferências, emissão de cheques e realização de compras com cartão de débito, entre outros. Para guardar o dinheiro e oferecer serviços como os citados, a instituição financeira pode cobrar tarifas, mas o cliente é quem escolhe se prefere pagar uma tarifa individualizada por serviço que utilizar ou uma tarifa única que dá direito a um pacote de serviços.</p>

<h3 id='conta-de-pagamento-pos-paga-credit-card'><a id="glossarioContaPagamentoPosPaga">Conta de Pagamento Pós-paga (Credit Card)</a></h3>

<p>Referente a cartão de crédito. Instrumento de pagamento que possibilita a aquisição de produtos e serviços com liquidação futura, de acordo com requisitos predeterminados, tais como limite de crédito e validade. O pagamento do valor correspondente ao produto ou ao serviço adquirido será efetuado ao emissor do cartão de crédito em data previamente acordada.</p>

<h3 id='conta-de-pagamento-pre-paga-prepaid-payment-account'><a id="glossarioContaPagamentoPrePaga">Conta de Pagamento Pré-paga (Prepaid Payment Account)</a></h3>

<p>Destinada à execução de transações de pagamento em moeda eletrônica realizadas com base em fundos denominados em reais previamente aportados.</p>

<h3 id='conta-de-poupanca-savings-account'><a id="glossarioContaPoupanca">Conta de Poupança (Savings Account)</a></h3>

<p>A conta de depósitos de poupança, popularmente conhecida como conta poupança, conta de poupança ou ainda caderneta de poupança, é um tipo de investimento criado com o objetivo de estimular a economia popular. Assim, para abrir e manter uma conta de poupança, o cliente não paga tarifas, não paga imposto de renda sobre o dinheiro aplicado e ainda pode depositar pequenos valores, que passam a gerar rendimentos mensalmente. Se um valor depositado na conta de poupança não for mantido aplicado por pelo menos um mês, isto é, se for resgatado antes, não ocorrerá remuneração desse dinheiro.</p>

<h3 id='correspondente-bancario-banking-agent'><a id="glossarioCorrespondenteBancario">Correspondente Bancário (Banking Agent)</a></h3>

<p>Empresas, integrantes ou não do Sistema Financeiro Nacional, contratadas por instituições financeiras e demais instituições autorizadas a funcionar pelo Banco Central do Brasil para a prestação de serviços de atendimento aos clientes e usuários dessas instituições. Os correspondentes mais conhecidos são as lotéricas e o banco postal.</p>

<h3 id='cpf-cadastro-de-pessoa-fisica-cpf-number'><a id="glossarioCPF">CPF - Cadastro de Pessoa Física (CPF Number)</a></h3>

<p>O CPF é o Cadastro de Pessoa Física. Ele é um documento emitido pela Receita Federal e serve para identificar os contribuintes. O CPF é uma numeração com 11 dígitos, que só mudam por decisão judicial</p>

<h3 id='credito-credit'><a id="glossarioCredito">Crédito (Credit)</a></h3>

<p>É um termo geral, utilizado para nomear as diferentes maneiras com que bancos, financeiras e outras instituições emprestam dinheiro a seus clientes. Ou seja, quando essas instituições emprestam dinheiro para alguém ou financiam alguma compra de uma pessoa, elas estão concedendo um crédito. Exemplo de uso: Em uma operação de crédito, quem empresta o dinheiro é chamado credor, e quem toma o dinheiro emprestado é chamado devedor.</p>

<p><em>Fonte: <a href="https://www.bcb.gov.br/content/cidadaniafinanceira/documentos_cidadania/Informacoes_gerais/glossario_cidadania_financeira.pdf">link</a></em></p>

<h3 id='credito-rotativo-overdraft'><a id="glossarioCreditoRotativo">Crédito Rotativo (Overdraft)</a></h3>

<p>É um tipo de empréstimo que os bancos concedem para os clientes terem a possibilidade de não pagar, na data do vencimento, o valor total da fatura do cartão de crédito. Isto é, por causa do crédito rotativo, é possível que o cliente pague, no dia do vencimento, qualquer valor entre o pagamento mínimo e o total da fatura. A diferença entre o valor total que deveria ter sido pago e o valor que o cliente efetivamente pagou na data do vencimento é financiada pelo banco e será incluída, acrescida de juros, na fatura do mês seguinte. Quando o cliente não paga o total da fatura, é como se ele estivesse automaticamente pegando emprestado o valor que ele deixou de pagar.</p>

<h3 id='custo-efetivo-total-cet'><a id="glossarioCET">Custo Efetivo Total (CET)</a></h3>

<p>Custo Efetivo Total. Corresponde a todos os encargos e despesas incidentes nas operações de crédito e de arrendamento mercantil financeiro, contratadas ou ofertadas a pessoas físicas, microempresas ou empresas de pequeno porte. Deve ser informado pelas instituições financeiras e pelas sociedades de arrendamento mercantil antes da contratação de operações de crédito e de arrendamento mercantil e também em qualquer outro momento, a pedido do cliente. Também deve constar dos informes publicitários das instituições quando forem veiculadas ofertas específicas (com divulgação da taxa de juros cobrada, do valor das prestações, etc).</p>

<p><em>Fonte: Resolução 3.517, de 6/12/2007. <a href="https://www.bcb.gov.br/acessoinformacao/glossario">link</a></em></p>

<h3 id='debito-debit'><a id="glossarioDebito">Débito (Debit)</a></h3>

<p>De uma forma geral, significa dívida. Exemplo de uso: Estou em débito com o Fernando, devo R$50 a ele. Ver também: crédito, credor, devedor, dívida.</p>

<p>Débito (no extrato) Em um extrato bancário, os débitos, marcados com a letra “D” ao lado do valor registrado, informam as saídas de dinheiro na conta-corrente. Exemplo de uso: Fiz uma compra com a função débito do cartão e apareceu o valor da compra, com um “D”, no extrato da minha conta, diminuindo o saldo.</p>

<p><em>Fonte: <a href="https://www.bcb.gov.br/content/cidadaniafinanceira/documentos_cidadania/Informacoes_gerais/glossario_cidadania_financeira.pdf">link</a></em></p>

<h3 id='debito-automatico-direct-debit'><a id="glossarioDebitoAutomatico">Débito Automático (Direct Debit)</a></h3>

<p>Débitos autorizados pelo titular de conta de depósitos ou de conta de pagamento mantidas nas instituições mencionadas</p>

<h3 id='direito-creditorio-descontado-invoice-financing'><a id="glossarioDireitoCreditorioDescontado">Direito Creditório Descontado (Invoice Financing)</a></h3>

<p>É o direito de receber dinheiro ou títulos, sejam eles oriundos de operações financeiras, comerciais, imobiliárias ou mesmo de ativos financeiros e investimentos. Esta opção abrange tanto pessoas físicas quanto entidades. Normalmente, ele “existe” na forma de um título.</p>

<h3 id='dependencia-branch'><a id="glossarioDependencia">Dependência (Branch)</a></h3>

<p>Dependência de instituições financeiras e demais instituições, autorizadas a funcionar pelo Banco Central do Brasil, destinada à prática das atividades para as quais a instituição esteja regularmente habilitada. (Agência é a dependência destinada ao atendimento aos clientes e ao público em geral no exercício de atividades da instituição, não podendo ser móvel ou transitória)</p>

<h3 id='emprestimo-loan'><a id="glossarioEmprestimo">Empréstimo (Loan)</a></h3>

<p>É o mecanismo utilizado para ter disponível, no presente, uma quantia que só se conseguiria alcançar no futuro, fazendo poupança. O valor emprestado, mais os juros e encargos cobrados pela instituição financeira, vira uma dívida, que deverá ser paga na forma e no prazo combinados (valor e quantidade de parcelas, por exemplo). No empréstimo, o valor emprestado não tem destinação específica, isto é, a pessoa pode utilizar o dinheiro que pegou emprestado onde e como quiser.</p>

<h3 id='emprestimo-cartao-consignado-payroll-loan'><a id="glossarioEmprestimoCartaoConsignado">Empréstimo Cartão Consignado (Payroll Loan)</a></h3>

<p>É um tipo de operação de crédito contratada no Cartão de Crédito, na qual o pagamento das compras do titular são descontadas diretamente em folha ou benefício do INSS</p>

<h3 id='encargo-charge'><a id="glossarioEncargo">Encargo (Charge)</a></h3>

<p>As instituições financeiras e as sociedades de arrendamento mercantil podem cobrar de seus clientes, no caso de atraso no pagamento ou na liquidação de obrigações, exclusivamente os seguintes encargos: I - juros remuneratórios, por dia de atraso, sobre a parcela vencida; II - multa, nos termos da legislação em vigor; e III - juros de mora, nos termos da legislação em vigor.</p>

<p><em>Fonte: <a href="https://www.bcb.gov.br/pre/normativos/busca/downloadNormativo.asp?arquivo=/Lists/Normativos/Attachments/50345/Res_4558_v1_O.pdf">link</a></em></p>

<h3 id='ente-consignante-cnpjconsignee'><a id="glossarioEnteConsignante">Ente Consignante (CnpjConsignee)</a></h3>

<p>É a empresa pública ou privada que mantém convênio com entidades Consignatárias afim de descontar no contracheque de seus funcionários os valores mensais referente as operações financeiras contratadas pelos mesmos obedecendo a regra da margem consignável.</p>

<p>Os entes consignantes podem ser : </p>

<ul>
<li>Privado - Destinado a funcionários de empresas do setor privado</li>
<li>Público - (prefeituras, estados, órgãos) - Destinado a servidores públicos federais, estaduais ou municipais</li>
<li>INSS - Destinado a beneficiários (aposentados e / ou pensionistas) do INSS.</li>
</ul>

<h3 id='fatura-bill'><a id="glossarioFatura">Fatura (Bill)</a></h3>

<p>Fatura é o documento através do qual o emissor realiza a prestação de contas ao portador titular. Nos meses em que ocorrer movimentação, o emissor do cartão de crédito enviará a Fatura discriminando as respectivas transações do período.</p>

<h3 id='financiamento-financing'><a id="glossarioFinanciamento">Financiamento (Financing)</a></h3>

<p>Parcelamento. Compra parcelada. Compra a prazo. É um crédito que a pessoa obtém para comprar um bem, como uma casa, um carro, um eletrodoméstico. O pagamento do bem é feito de forma parcelada por meio de carnês, boletos de cobrança, débitos em conta corrente, cartão de crédito, cheques etc. O financiamento pode incluir custos como juros, tarifas, impostos, entre outros encargos.</p>

<h3 id='garantia-warranty'><a id="glossarioGarantia">Garantia (Warranty)</a></h3>

<p>Ativo que é entregue pelo outorgante da garantia para assegurar uma obrigação à parte que toma a garantia. Os acordos de garantia podem tomar diversas formas legais; as garantias podem ser obtidas por transferência de títulos ou penhora.</p>

<p><em>Fonte: <a href="https://www.bcb.gov.br/acessoinformacao/glossario">link</a></em></p>

<h3 id='identificacao-identification'><a id="glossarioIdentificacao">Identificação (Identification)</a></h3>

<p>Agrupador das informações relativas a Identificação ou seja a ação e o efeito de identificar de forma única a pessoa através de seus dados cadastrais</p>

<h3 id='identificador-padronizado-da-operacao-de-credito-ipoc-code'><a id="glossarioIPOC">Identificador Padronizado da Operação de Crédito – Ipoc Code</a></h3>

<p>O identificador padronizado da operação de crédito é atribuído a todas as operações de crédito informadas ao SCR (Sistema de Informações de Crédito do Banco Central do Brasil – SCR é um instrumento de registro e consulta de informações sobre as operações de crédito, como empréstimos, financiamentos, avais ou fianças, realizadas entre as Instituições Financeiras e seus Clientes). </p>

<p>O IPOC será formado pela concatenação das informações contidas nos campos do SCR abaixo discriminados, respeitando-se a seguinte ordem:</p>

<ol>
<li>CNPJ da instituição</li>
<li>Modalidade da operação</li>
<li>Tipo do cliente</li>
<li>Código do cliente</li>
<li>Código do contrato</li>
</ol>

<p><em>Fonte: <a href="https://www.in.gov.br/web/dou/-/circular-n-3.953-de-10-de-julho-de-2019-191917419">link</a></em></p>

<h3 id='indexador-indexer'><a id="glossarioIndexador">Indexador (Indexer)</a></h3>

<p>É o termo utilizado para se referir aos índices usados como base para corrigir os valores monetários de um determinado ativo. Os índices mais utilizados são IPCA, INPC, IGP-M, CDI, Taxa Selic.</p>

<h3 id='instituicao-financeira-company'><a id="glossarioInstituicaoFinanceira">Instituição Financeira (Company)</a></h3>

<p>Instituições que prestam serviços financeiros e são autorizadas a funcionar pelo Banco Central do Brasil.</p>

<h3 id='limite-flexivel-flexible-limit'><a id="glossarioLimiteFlexivel">Limite Flexível (Flexible Limit)</a></h3>

<p>Geralmente esses cartões não possuem limite oculto inferior a R$ 50 mil, ou seja, é o mesmo que sem limite pré-estabelecido de despesas. Pois são voltados para consumidores de alto poder aquisitivo, sendo considerado um cartão de crédito diferenciado, pois permite ao portador comprar o que quiser.</p>

<h3 id='marca-brand'><a id="glossarioMarca">Marca (Brand)</a></h3>

<p>A marca é em essência uma promessa da empresa em fornecer uma série específica de atributos, benefícios e serviços uniformes aos clientes.</p>

<h3 id='mcc-merchant-category-code'><a id="glossarioMCC">MCC (Merchant Category Code)</a></h3>

<p>O MCC ou o código da categoria do estabelecimento comercial. Os MCCs são agrupados segundo suas similaridades. O MCC é usado para classificar o negócio pelo tipo fornecido de bens ou serviços. Os MCCs são atribuídos por tipo de comerciante (por exemplo, um para hotéis, um para lojas de materiais de escritório, etc.) ou por nome de comerciante (por exemplo, 3000 para a United Airlines).</p>

<h3 id='mes-de-referencia-reference-month'><a id="glossarioMesReferencia">Mês de Referência (Reference Month)</a></h3>

<p>O mês de referência será tratado como “M-1”.</p>

<h3 id='nome-civil-completo-civil-name'><a id="glossarioNomeCivil">Nome Civil Completo (Civil Name)</a></h3>

<p>Nome civil completo da pessoa natural é aquele atribuído à pessoa natural desde o registro de seu nascimento, com o qual será identificada por toda a sua vida, bem como após a sua morte. Trata-se de um Direito fundamental da pessoa natural</p>

<h3 id='nome-social-social-name'><a id="glossarioNomeSocial">Nome Social (Social Name)</a></h3>

<p>O nome social é definido como a adoção/ adequação do senso de identificação do sujeito referenciando o nome que o representa (Decreto Nº 51.180, de 14 de janeiro de 2010), evitando a exposição desnecessária do indivíduo, o constrangimento de ser tratado de uma forma que não condiz com sua condição humana, psicológica, moral, intelectual, emocional e que não o representa. Tem por objetivo o reconhecimento social e individual segundo o Art. 16 do Código Civil, toda pessoa tem direito ao nome, nele compreendidos o prenome e o sobrenome.</p>

<h3 id='pacote-de-servicos-service-bundles'><a id="glossarioPacoteServicos">Pacote de Serviços (Service Bundles)</a></h3>

<p>Cesta de serviços. É uma combinação de diferentes quantidades de serviços bancários (saques, extratos, transferências, cheques e outros) que o cliente pode usar por mês. Antes da contratação de um pacote de serviços, é importante verificar quais os serviços que são efetivamente usados ao longo do mês e se o custo desses serviços, cobrados isoladamente, não é menor que o do pacote de serviços.</p>

<h3 id='pagador-payer'><a id="glossarioPagador">Pagador (Payer)</a></h3>

<p>É a pessoa ou a empresa que deve pagar o valor cobrado em um boleto bancário, normalmente por ter feito uma compra, um financiamento ou por estar pagando por um serviço, como uma mensalidade escolar, por exemplo. O banco recebe o pagamento feito pelo sacado e transfere o valor pago para a conta do beneficiário. No boleto, o campo “pagador” costuma trazer outras informações além do nome do pagador, como o seu endereço. Exemplo de uso: Ao receber um boleto para pagar, a pessoa deve sempre conferir se seus dados estão corretos no campo “pagador”. Se houver algum erro, ela deve procurar o banco que emitiu o boleto</p>

<p><em>Fonte: <a href="https://www.bcb.gov.br/content/cidadaniafinanceira/documentos_cidadania/Informacoes_gerais/glossario_cidadania_financeira.pdf">link</a></em></p>

<h3 id='pagamento-autorizado-authorised-payment'><a id="glossarioPagamentoAutorizado">Pagamento Autorizado (Authorised Payment)</a></h3>

<p>São transações a crédito ou débito que ainda não foram registradas no extrato, mas que a instituição possui autorização do cliente para realizar o débito.</p>

<p><em>Fonte: <a href="https://www.bcb.gov.br/pre/normativos/busca/downloadNormativo.asp?arquivo=/Lists/Normativos/Attachments/47650/Res_3695_v2_L.pdf">link</a></em></p>

<h3 id='posto-de-atendimento-bancario-pab-branch'><a id="glossarioPostoAtendimentoBancario">Posto de Atendimento Bancário - PAB  (Branch)</a></h3>

<p>São as dependências de bancos múltiplos com carteira comercial, instaladas em recinto interno de entidade da administração pública ou de empresa privada e destinadas a prestar todos os serviços para os quais a instituição esteja regularmente habilitada de exclusivo interesse do respectivo governo e de seus funcionários, quando instalados em entidade de administração pública, ou da respectiva empresa, de seus empregados e administradores, quando instalados em dependências de empresa privada.</p>

<h3 id='posto-de-atendimento-eletronico-pae-branch'><a id="glossarioPostoAtendimentoEletronico">Posto de Atendimento Eletrônico – PAE (Branch)</a></h3>

<p>O Posto de Atendimento Bancário Eletrônico, Fixo ou Móvel (PAE), é uma extensão automatizada de dependências bancárias, que pode funcionar até 24 (vinte e quatro) horas por dia, ligada à central de controle e processamento.</p>

<h3 id='prestacao-regular-instalment'><a id="glossarioPrestacaoRegular">Prestação Regular (Instalment)</a></h3>

<p>Refere-se a comprar um produto ou serviço de forma parcelada e assim dividir o pagamento em partes, em prestações a serem pagas ao longo de um período de tempo em intervalos regulares, p.ex. parcelas mensais, onde o vencimento acontecerá regularmente todo dia 10 de cada mês </p>

<h3 id='procurador-procurator'><a id="glossarioProcurador">Procurador (Procurator)</a></h3>

<p>Pessoa autorizada por procuração para dirigir os negócios de outrem ou agir como seu agente, representante, substituto ou advogado.</p>

<h3 id='qualificacao-qualification'><a id="glossarioQualificacao">Qualificação (Qualification)</a></h3>

<p>Considera-se qualificação as informações que permitam as instituições apreciar, avaliar, caracterizar e classificar o cliente com a finalidade de conhecer o seu perfil de risco e sua capacidade econômico-financeira</p>

<h3 id='razao-social-company-name'><a id="glossarioRazaoSocial">Razão Social (Company Name)</a></h3>

<p>A razão social é o nome de registro de uma empresa junto aos órgãos do governo e cartório e é o que vai constar em contratos, escrituras, documentos legais, notas fiscais etc. Ela é criada junto com o CNPJ e também é chamada de Denominação social – exatamente por ser, na prática, o nome da pessoa jurídica</p>

<h3 id='recebedor-payee'><a id="glossarioRecebedor">Recebedor (Payee)</a></h3>

<p>Pessoa natural ou jurídica, destinatário final dos recursos de uma transação de pagamento</p>

<p><em>Fonte: <a href="https://www.bcb.gov.br/pre/normativos/busca/downloadNormativo.asp?arquivo=/Lists/Normativos/Attachments/48841/Res_4282_v1_O.pdf">link</a></em></p>

<h3 id='relacionamento-financial-relation'><a id="glossarioRelacionamento">Relacionamento (Financial Relation)</a></h3>

<p>Considera-se relacionamento as informações que permitam conhecer desde quando a pessoa consultada é cliente da instituição, bem como um indicador dos produtos e serviços que ela consome atualmente e seus representantes</p>

<h3 id='representante-legal-legal-representative'><a id="glossarioRepresentanteLegal">Representante Legal (Legal Representative)</a></h3>

<p>Nome Civil completo da Pessoa Natural que represente uma entidade ou uma empresa e é nomeado em seu ato constitutivo, ou seja, no contrato social ou estatuto social</p>

<h3 id='saldo-account-balance'><a id="glossarioSaldo">Saldo (Account Balance)</a></h3>

<p>Quantia que representa o excedente do total de créditos e do total de débitos de uma conta.</p>

<h3 id='saldo-bloqueado-cash-blocked'><a id="glossarioSaldoBloqueado">Saldo Bloqueado (Cash Blocked)</a></h3>

<p>É um valor que o banco informa estar separado na conta-corrente para o pagamento, ao fim do dia, de alguma obrigação que tem vencimento naquele dia.</p>

<p>Exemplo de uso:</p>

<ul>
<li>Se o saldo da minha conta é de R$1.000, mas eu vejo que tem um saldo provisionado de R$400, isso quer dizer que só posso movimentar R$600, se não quiser entrar no vermelho.</li>
<li>Valor depositado na conta que se encontra bloqueado para utilização, como bloqueios judiciais.</li>
</ul>

<p><em>Fonte: <a href="https://www.bcb.gov.br/content/cidadaniafinanceira/documentos_cidadania/Informacoes_gerais/glossario_cidadania_financeira.pdf">link</a></em></p>

<h3 id='saldo-devedor-outstanding-balance'><a id="glossarioSaldoDevedor">Saldo Devedor (Outstanding Balance)</a></h3>

<p>Corresponde ao valor que falta ser pago de uma dívida. Ao longo do tempo, os juros fazem o saldo devedor crescer, enquanto as amortizações pagas pelo devedor fazem o saldo devedor diminuir. O saldo devedor pode vir tanto de um empréstimo ou financiamento quanto de um pagamento inferior ao valor total de uma fatura de cartão de crédito. Ou ainda, em conta-corrente, o que significa que o cliente está “no vermelho” ou “no negativo”, isto é, entrou no limite de crédito do cheque especial ou utilizou o adiantamento a depositantes. </p>

<h3 id='saldo-disponivel-cash-amount'><a id="glossarioSaldoDisponivel">Saldo Disponível (Cash Amount)</a></h3>

<p>É o valor total à disposição do cliente em sua conta-corrente, que inclui tanto o dinheiro que ele tem depositado nela quanto o limite de cheque especial pré-aprovado pelo banco. 43 Exemplo de uso: Ao consultar o extrato bancário, para saber quanto dinheiro seu de fato tem depositado em conta, o cliente não pode considerar o saldo disponível.</p>

<p><em>Fonte: <a href="https://www.bcb.gov.br/content/cidadaniafinanceira/documentos_cidadania/Informacoes_gerais/glossario_cidadania_financeira.pdf">link</a></em></p>

<h3 id='sexo-sex'><a id="glossarioSexo">Sexo (Sex)</a></h3>

<p>“Conjunto de características anatomofisiológicas que distinguem o homem e a mulher: Sexo masculino; sexo feminino”. No caso de não ser feminino nem masculino é classificado como outros.</p>

<h3 id='sistema-de-amortizacao-constante-sac'><a id="glossarioSAC">Sistema de Amortização Constante (SAC)</a></h3>

<p>É aquele em que o valor da amortização permanece igual até o final. Os juros cobrados sobre o parcelamento não entram nesta conta.</p>

<h3 id='sistema-de-amortizacao-misto-sam'><a id="glossarioSAM">Sistema de Amortização Misto (SAM)</a></h3>

<p>Cada prestação (pagamento) é a média aritmética das prestações respectivas no Sistemas Price e no Sistema de Amortização Constante (SAC)</p>

<h3 id='sistema-frances-de-amortizacao-price'><a id="glossarioPrice">Sistema Francês de Amortização (Price)</a></h3>

<p>As parcelas são fixas do início ao fim do contrato. Ou seja, todas as parcelas terão o mesmo valor, desde a primeira até a última. Nos primeiros pagamentos, a maior parte do valor da prestação corresponde aos juros. Ao longo do tempo, a taxa de juros vai decrescendo. Como o valor da prestação é fixo, com o passar das parcelas, o valor de amortização vai aumentando.</p>

<h3 id='tarifa-fee'><a id="glossarioTarifa">Tarifa (Fee)</a></h3>

<p>A Resolução 3.919, de 25/11/2010, classifica em quatro modalidades os tipos de serviços prestados às pessoas físicas: </p>

<ol>
<li>serviços essenciais – não podem ser cobrados; </li>
<li>serviços prioritários – relacionados a contas de depósitos, transferências de recursos, operações de crédito e de arrendamento mercantil, cartão de crédito básico e cadastro, somente podendo ser cobrados os serviços constantes da Lista de Serviços da Tabela I anexa à (Resolução CMN 3.919, de 2010, devendo ainda ser observados a padronização, as siglas e os fatos geradores da cobrança, também estabelecidos por meio da citada Tabela I; </li>
<li>serviços especiais – legislação e regulamentação específicas definem as tarifas e as condições em que são aplicáveis, a exemplo dos serviços referentes ao crédito rural, ao Sistema Financeiro da Habitação (SFH), ao Fundo de Garantia do Tempo de Serviço (FGTS), ao Fundo PIS/PASEP, às chamadas contas-salário, e às operações de microcrédito de que trata a Resolução 4.000, de 2011; </li>
<li>serviços diferenciados – podem ser cobrados desde que explicitadas ao cliente ou ao usuário as condições de utilização e de pagamento</li>
</ol>

<p>Fonte: <a href="https://www.bcb.gov.br/acessoinformacao/glossario">link</a></p>

<h3 id='taxa-efetiva-effectivetax'><a id="glossarioTaxaEfetiva">Taxa Efetiva (EffectiveTax)</a></h3>

<p>É a taxa de juros em que a unidade referencial coincide com a unidade de tempo da capitalização. Como as unidades de medida de tempo da taxa de juros e dos períodos de capitalização são iguais, usa-se exemplos simples como 1% ao mês, 60% ao ano.</p>

<h3 id='taxa-nominal-nominaltax'><a id="glossarioTaxaNominal">Taxa nominal (NominalTax)</a></h3>

<p>É uma taxa de juros em que a unidade referencial não coincide com a unidade de tempo da capitalização. Ela é sempre fornecida em termos anuais, e seus períodos de capitalização podem ser diários, mensais, trimestrais ou semestrais.</p>

<h3 id='taxa-referencial-tr-referential-rate'><a id="glossarioTaxaReferencial">Taxa Referencial – TR (Referential Rate)</a></h3>

<p>É a taxa de juros de referência. É uma taxa calculada pelo Banco Central do Brasil e utilizada para determinar o rendimento de investimentos, como a caderneta de poupança e a correção de financiamentos imobiliários.</p>

<h3 id='terminais-de-autoatendimento-compartilhados-shared-automatic-teller-machine'><a id="glossarioTerminaisAutoAtendimentoCompartilhados">Terminais de Autoatendimento Compartilhados (Shared Automatic Teller Machine)</a></h3>

<p>É o compartilhamento dos terminais de autoatendimento (ATM - dispositivo eletromecânico que permite aos usuários, geralmente usando cartões de plástico legíveis em máquina, a realização de um ou mais tipos de operações, tais como saques, depósitos, emissão de extratos e saldos, realização de pagamentos de contas e títulos, transferência de fundos e outro) para aumentar a eficiência do sistema de pagamento de varejo.</p>

<h3 id='transacao-agendada-scheduled-payment'><a id="glossarioTransacaoAgendada">Transação Agendada (Scheduled Payment)</a></h3>

<p>O usuário poderá agendar uma transação de DOC, TED, PIX ou boleto bancário para uma determinada data futura</p>

<p><em>Fontes: <a href="https://www.bcb.gov.br/detalhenoticia/327/noticia">link 1</a> e <a href="https://www.bcb.gov.br/content/cidadaniafinanceira/documentos_cidadania/Cartilha_Migrantes_Refugiados/cartilhaBC-Port_v3.pdf">link 2</a></em></p>

<h3 id='transacoes-realizadas-completed-transaction'><a id="glossarioTransacaoRealizada">Transações Realizadas (Completed Transaction)</a></h3>

<p>Operações segmentadas efetuadas por tipo de acesso físico (agências e postos tradicionais, caixas de autoatendimento e correspondentes bancários) ou remoto (home e office banking, call centers, smartphones e PDAs) e por tipo de transações( Bloqueto de cobrança e convênios, depósitos, ordem de transferência de crédito, empréstimos e financiamentos, saques, outras transações financeiras, consultas a extratos e saldos e outras transações não financeiras)</p>

<p><em>Fontes: <a href="https://www.bcb.gov.br/nor/relcidfin/cap01.html#nota13*">link 1</a> e <a href="https://dadosabertos.bcb.gov.br/dataset/25166-quantidade-de-outras-transacoes-financeiras-por-canal-nao-presencial">link 2</a></em></p>

<h3 id='unidade-administrativa-desmembrada-uad-branch'><a id="glossarioUnidadeAdministrativaDesmembrada">Unidade Administrativa Desmembrada (UAD) - (Branch)</a></h3>

<p>É a dependência destinada à execução de atividades administrativas da instituição, tal como atividades contábeis e administrativas de natureza interna, desde que tal unidade esteja instalada no mesmo Município da sede do grupo financeiro, ou de uma agência da instituição e é vedado o atendimento ao público.</p>
<h1 id='seguranca-consumo'>Segurança - Consumo</h1>
<h2 id='visao-geral'>Visão geral</h2>

<p>As APIs de <em>Open Banking</em> estão dividas em dois escopos:  </p>

<ul>
<li><em>open-data</em></li>
<li><em>customer-data</em></li>
</ul>

<p>Segue, a continuação, um <em>overview</em> das camadas de segurança básicas para atender os contextos <em>Open-data</em>:</p>

<table><thead>
<tr>
<th>Camada</th>
<th>Descrição</th>
<th>Explicação</th>
</tr>
</thead><tbody>
<tr>
<td>Física</td>
<td><em>Firewall</em></td>
<td>Equipamentos e produtos como filtros, <em>proxys</em> e <em>firewalls</em> direcionados ao controle e segurança da rede física.</td>
</tr>
<tr>
<td>Transporte</td>
<td>HTTP - TLS 1.2</td>
<td>Protocolo de criptografia que fornece segurança na comunicação sobre a rede física.</td>
</tr>
<tr>
<td>Gestão</td>
<td>API <em>Gateway</em> / <em>Manager</em></td>
<td><em>Gateway</em> e <em>Manager</em> para gerenciar a publicação da API com controles de <em>throttling</em>, quotas e outros.</td>
</tr>
</tbody></table>

<h2 id='cors'>CORS</h2><h3 id='contexto-open-data'>Contexto Open-Data</h3>
<p>O <em>Cross-Origin Resource Sharing</em> (CORS) para todas as origens (valor &quot; * &quot;) será permitido nos seguintes <em>endpoints</em>:</p>

<ul>
<li>Open Data APIS

<ul>
<li>Canais de Atendimento</li>
<li>Produtos e Serviços</li>
</ul></li>
</ul>

<h2 id='endpoints'>Endpoints</h2><h3 id='contexto-open-data'>Contexto Open-data</h3>
<p>Não haverá <em>endpoints</em> específicos para Autorização e Autenticação com o intuito de maximizar o uso do <em>Open-data</em>.</p>

<p>Será opcional a disponibilização de um <em>endpoint</em> para validação WKS:</p>

<p><code>api.banco.com.br/openbanking/security/v1/.well-known/jwks.json</code></p>

<h2 id='glossario-de-seguranca'>Glossário de Segurança</h2>

<table><thead>
<tr>
<th>Sigla</th>
<th>Descrição</th>
<th>Informação</th>
</tr>
</thead><tbody>
<tr>
<td>API</td>
<td>Interface de programação de aplicativo</td>
<td>Uma interface de programação de aplicativo é um conjunto de rotinas, protocolos e ferramentas para construir aplicativos de software. Uma API especifica como os componentes de software devem interagir.</td>
</tr>
<tr>
<td>FAPI</td>
<td>Financial API</td>
<td>Especificação técnica de API  e define requisitos técnicos adicionais para o setor financeiro</td>
</tr>
<tr>
<td>CIBA</td>
<td>Client Initiated Backchannel Authentication</td>
<td>A autenticação de backchannel iniciada pelo cliente (CIBA) é um dos padrões mais recentes da OpenID Foundation.  são categorizados como &quot;fluxo desacoplado&quot;,  Ele permite novas maneiras de obter o consentimento do usuário final</td>
</tr>
<tr>
<td>Oauth</td>
<td></td>
<td>O OAuth é um protocolo de autorização para API&#39;s web voltado a permitir que aplicações client acessem um recurso protegido em nome de um usuário.</td>
</tr>
<tr>
<td>OIDC</td>
<td>OpenID Connect</td>
<td>OpenID Connect é um protocolo de identidade simples com padrão aberto</td>
</tr>
<tr>
<td>JWT</td>
<td>JSON Web Token</td>
<td>é uma técnica definida na RFC 7519 para autenticação remota entre duas partes. Ele é uma das formas mais utilizadas para autenticar usuários em APIs RESTful.</td>
</tr>
<tr>
<td>JWS</td>
<td>JSON Web Signature</td>
<td>é uma forma de garantir a integridade das informações em um formato altamente serializado</td>
</tr>
<tr>
<td>SHA256</td>
<td>Secure Hash Algorithm</td>
<td>é um conjunto de funções criptográficas de hash</td>
</tr>
<tr>
<td>PKCE</td>
<td>Proof Key for Code Exchange</td>
<td>Chave de prova para troca de código por clientes públicos Oauth</td>
</tr>
<tr>
<td>MAC</td>
<td>Código de Autenticação de Mensagem</td>
<td>Permite que as declarações sejam assinadas digitalmente ou protegidas por integridade utilizando JWS</td>
</tr>
<tr>
<td>ICP-Brasil</td>
<td>Infraestrutura de Chaves Públicas Brasileira</td>
<td>na definição oficial, “uma cadeia hierárquica de confiança que viabiliza a emissão de certificados digitais para identificação virtual do cidadão</td>
</tr>
<tr>
<td>AC</td>
<td>Autoridade Certificadora</td>
<td></td>
</tr>
<tr>
<td>AR</td>
<td>Autoridade de Registro</td>
<td></td>
</tr>
<tr>
<td>TLS</td>
<td>Transport Layer Security</td>
<td></td>
</tr>
<tr>
<td>ECDSA</td>
<td>Elliptic Curve Digital Signature Algorithm</td>
<td>é um algoritmo de  método de assinatura digital de documentos utilizando criptografia baseada em curvas elípticas.</td>
</tr>
<tr>
<td>ECDHE</td>
<td>Elliptic-curve Diffie–Hellman</td>
<td>é um protocolo de contrato chave que permite que duas partes, cada uma com um par de chaves público-privado de curva elíptica, estabeleçam um segredo compartilhado em um canal inseguro</td>
</tr>
<tr>
<td>AES</td>
<td>Advanced Encryption Standard</td>
<td>algoritmos de criptografia de bloco simétrico com uma chave de criptografia de 256 bits</td>
</tr>
<tr>
<td>Autenticação mútua</td>
<td></td>
<td>Chamamos de autenticação mútua quando ambos cliente e servidor apresentam certificados para serem validados pelo par.</td>
</tr>
<tr>
<td>CSR</td>
<td>Certificate Signing Request</td>
<td>Contém informação que irá ser incluída no seu certificado como o nome da empresa/organização, common name (domínio), localidade e país. Também contém a chave pública (public key) que será incluída no seu certificado. Normalmente é também criada uma chave privada (private key) ao mesmo tempo que é criado o CSR</td>
</tr>
<tr>
<td>TPP</td>
<td>Instituições Provedoras - Provedores terceirizados</td>
<td>As instituições provedoras são organizações que usam APIs desenvolvidas pelos ASPSP para acessar contas de clientes, a fim de fornecer serviços de informações de contas</td>
</tr>
<tr>
<td>ASPSP</td>
<td>Instituições Transmissoras - Provedor de serviços de pagamento de manutenção de contas</td>
<td>Um ASPSP é qualquer instituição financeira que oferece uma conta de pagamento com acesso online. Os ASPSPs devem fornecer acesso para permitir que terceiros (TPP) registrados acessem as informações da conta através de APIs</td>
</tr>
<tr>
<td>SSA</td>
<td>Software Statement Assertion</td>
<td>SSA é um JSON Web Token (JWT) que contém metadados sobre uma instância de aplicativo client desenvolvida por um TPP. O JWT é emitido e assinado pelo OpenBanking Directory.</td>
</tr>
<tr>
<td>End User</td>
<td></td>
<td>Identificação de usuário final que possui as informações que se deseja acessar</td>
</tr>
<tr>
<td>Back-End</td>
<td></td>
<td>Aplicação ou código que da inteligência de negocio as ações solicitadas via API , código que efetivamente realiza a função desejada</td>
</tr>
<tr>
<td>Json</td>
<td>JavaScript Object Notation</td>
<td>Json é um modelo para armazenamento e transmissão de informações no formato texto.</td>
</tr>
<tr>
<td>Claims</td>
<td></td>
<td>São escopos/declarações usadas em uma API durante a autenticação para autorizar o acesso aos detalhes de um usuário, como nome e imagem por exemplo. Cada escopo retorna um conjunto de atributos do usuário, que são chamados de declarações.</td>
</tr>
<tr>
<td>Header</td>
<td></td>
<td>É o  cabeçalho de uma solicitação ou resposta que transmite contexto e metadados adicionais sobre a solicitação ou resposta. Por exemplo, em uma mensagem de solicitação podem ser usados para fornecer credenciais de autenticação.</td>
</tr>
<tr>
<td>Payload</td>
<td></td>
<td>O Payload é a Carga Útil do token JWT. É aqui que você coloca informações como a quem o token pertence, qual a expiração dele, quando ele foi criado, entre outras coisas</td>
</tr>
</tbody></table>

<h2 id='referencias-normativas'>Referências normativas</h2>

<table><thead>
<tr>
<th>Referença</th>
<th>Descrição</th>
<th>Versão</th>
</tr>
</thead><tbody>
<tr>
<td>[JSON]</td>
<td>The JavaScript Object Notation (JSON) Data Interchange Format: <a href='https://tools.ietf.org/html/rfc8259' target="_blank">https://tools.ietf.org/html/rfc8259</a></td>
<td>Dec 2017</td>
</tr>
<tr>
<td>[JWT]</td>
<td>JSON Web Token (JWT): <a href='https://tools.ietf.org/html/rfc7519' target="_blank"> https://tools.ietf.org/html/rfc7519</a></td>
<td>May 2015</td>
</tr>
<tr>
<td>[JWS]</td>
<td>JSON Web Signature (JWS): <a href='https://tools.ietf.org/html/rfc7797' target="_blank"> https://tools.ietf.org/html/rfc7797</a></td>
<td>Feb 2016</td>
</tr>
</tbody></table>

<h2 id='referencias-informativas'>Referências informativas</h2>

<table><thead>
<tr>
<th>Referença</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td>[BCP195]</td>
<td>Recomendações para o uso do seguro do Transport Layer Security (TLS) e Datagram Transport Layer Security (DTLS): <a href='https://tools.ietf.org/html/bcp195' target="_blank">https://tools.ietf.org/html/bcp195</a></td>
</tr>
<tr>
<td>[DOS-G]</td>
<td>Guia de segurança sobre DDoS attacks: <a href='https://www.ncsc.gov.uk/collection/denial-service-dos-guidance-collection' target="_blank"> https://www.ncsc.gov.uk/collection/denial-service-dos-guidance-collection</a></td>
</tr>
</tbody></table>
<h1 id='seguranca-participantes'>Segurança - Participantes</h1>
<p><h2 id='governanca'>Governança</h2><h3 id='sobre'>Sobre</h3>
<p>Esta área será oportunamente detalhada nas próximas fases do Open Banking.</p></p>

<p><h2 id='protecao'>Proteção</h2><h3 id='sobre'>Sobre</h3>
<p>Esta área será oportunamente detalhada nas próximas fases do Open Banking.</p></p>

<p><h2 id='deteccao'>Detecção</h2><h3 id='sobre'>Sobre</h3>
<p>Esta área será oportunamente detalhada nas próximas fases do Open Banking.</p></p>

<p><h2 id='reacao'>Reação</h2><h3 id='sobre'>Sobre</h3>
<p>Esta área será oportunamente detalhada nas próximas fases do Open Banking.</p></p>
<h1 id='seguranca-guia'>Segurança - Guia</h1>
<h2 id='introducao-seguranca'>Introdução - Segurança</h2>

<p>Esta seção tem como finalidade auxiliar na auto avaliação aos cumprimentos dos requisitos de segurança da informação relacionados a autorização e autenticação de APIs e End-Users, emissão de certificados digitais e requisitos para o <em>onboarding</em> no Diretório de participantes para as Instituições participantes do Open Banking.</p>

<p>As instituições participantes do Open Banking possuem a obrigação de acompanhar a edição e a revogação de eventuais normas com impacto no tema de forma a estar permanentemente em dia com as determinações legais.
Compõem, de forma não exaustiva, o rol de atos normativos cuja observância é essencial pelas instituições participantes do Open Banking:</p>

<table><thead>
<tr>
<th>Normativa</th>
</tr>
</thead><tbody>
<tr>
<td><a href='https://www.bcb.gov.br/estabilidadefinanceira/exibenormativo?tipo=Resolu%C3%A7%C3%A3o%20Conjunta&numero=1'target="_blank">Resolução Conjunta CMN/BCB nº 1, de 2020</a></td>
</tr>
<tr>
<td><a href='https://www.bcb.gov.br/pre/normativos/busca/downloadNormativo.asp?arquivo=/Lists/Normativos/Attachments/50581/Res_4658_v1_O.pdf'target="_blank">Resolução CMN nº 4.658, de 2018</a></td>
</tr>
<tr>
<td><a href='https://www.bcb.gov.br/pre/normativos/busca/downloadNormativo.asp?arquivo=/Lists/Normativos/Attachments/50645/Circ_3909_v1_O.pdf'target="_blank">Circular BCB nº 3.909, de 2018</a></td>
</tr>
<tr>
<td><a href='https://www.bcb.gov.br/estabilidadefinanceira/exibenormativo?tipo=Instru%C3%A7%C3%A3o%20Normativa%20BCB&numero=37'target="_blank">Resolução BCB nº 37, de 4 de Novembro de 2020</a></td>
</tr>
<tr>
<td><a href='https://www.bcb.gov.br/estabilidadefinanceira/exibenormativo?tipo=Resolu%C3%A7%C3%A3o%20BCB&numero=32'target="_blank">Resolução BCB n° 32 de 29/10/2020</a></td>
</tr>
<tr>
<td><a href='http://www.planalto.gov.br/ccivil_03/_ato2015-2018/2018/lei/L13709.htm'target="_blank">Lei Geral de Proteção de Dados Pessoais (LGPD - Lei nº 13.709, de 2018)</a></td>
</tr>
</tbody></table>

<p>Estas especificações baseiam-se, referenciam, e complementam, quando aplicável, os seguintes documentos:</p>

<table><thead>
<tr>
<th>Referência</th>
</tr>
</thead><tbody>
<tr>
<td><a href='https://tools.ietf.org/html/rfc7525'target="_blank">BCP 195/RFC 7525</a></td>
</tr>
<tr>
<td><a href='https://owasp.org/www-project-api-security/'target="_blank">Owasp API Top 10</a></td>
</tr>
<tr>
<td><a href='https://www.sans.org/top25-software-errors'target="_blank">Sans Top 25 Software Errors</a></td>
</tr>
<tr>
<td><a href='https://cwe.mitre.org/top25/archive/2020/2020_cwe_top25.html'target="_blank">CWE Top 25 Software Weaknesses</td>
</tr>
</tbody></table>

<p>Além desse guia, foi elaborado um checklist para auxiliar os participantes do Open Banking a alcançar um nível adequado de Segurança da Informação, esse checklist pode ser baixado em formato Word ou Excel a seguir.</p>

<p><a href='documents/Autoavaliação_dos_requisitos_de _SI-1.0.docx'>Download Autoavaliação dos requisitos de SI - 1.0.docx</a><br>
<a href='documents/Autoavaliação_dos_requisitos_de _SI-1.0.xlsx'>Download Autoavaliação dos requisitos de SI - 1.0.xlsx</a></p>

<h2 id='perfil-de-seguranca'>Perfil de segurança</h2><h3 id='sobre-os-padroes-de-perfil-de-seguranca-de-api'>Sobre os padrões de perfil de segurança de API.</h3>
<p>É necessário que os participantes do Open Banking adotem padrões de autenticação e autorização para as APIs e <em>End-Users</em>, utilizando <em>frameworks</em> e mecanismos aprovados pelo mercado, garantindo assim, a integridade, a confidencialidade e a disponibilidade dos dados.</p>

<p>Conjunto de referências normativas adotadas pelo Open Banking:</p>

<table><thead>
<tr>
<th>Referência</th>
</tr>
</thead><tbody>
<tr>
<td><a href='https://openid.net/specs/openid-financial-api-part-2.html'target="_blank">FAPI-RW - Financial-grade API - Part 2: Read and Write API Security Profile</a></td>
</tr>
<tr>
<td><a href='https://openid.net/specs/openid-client-initiated-backchannel-authentication-core-1_0.html'target="_blank">CIBA (opcional) - OpenID Connect Client Initiated Backchannel Authentication Flow - Core 1.0</a></td>
</tr>
<tr>
<td><a href='https://tools.ietf.org/html/rfc8259'target="_blank">JSON - The JavaScript Object Notation (JSON) Data Interchange Format</a></td>
</tr>
<tr>
<td><a href='https://tools.ietf.org/html/rfc7519'target="_blank">JWT - JSON Web Token (JWT)</a></td>
</tr>
<tr>
<td><a href='https://tools.ietf.org/html/rfc7797'target="_blank">JWS - JSON Web Signature</a></td>
</tr>
<tr>
<td><a href='https://tools.ietf.org/html/draft-ietf-oauth-mtls-17'target="_blank">MTLS - OAuth 2.0 Mutual TLS Client, Authentication and Certificate Bound, Access Tokens</a></td>
</tr>
<tr>
<td><a href='https://tools.ietf.org/html/rfc6749'target="_blank">OAUTH2 - The OAuth 2.0 Authorization Framework</a></td>
</tr>
<tr>
<td><a href='http://openid.net/specs/openid-connect-core-1_0.html'target="_blank">OIDC - OpenID Connect Core 1.0 incorporating errata set 1</a></td>
</tr>
<tr>
<td><a href='https://tools.ietf.org/html/rfc7009'target="_blank">RFC7009 - OAuth 2.0 Token Revocation</a></td>
</tr>
<tr>
<td><a href='https://tools.ietf.org/html/rfc7662'target="_blank">RFC7662 - OAuth 2.0 Token Introspection</a></td>
</tr>
<tr>
<td><a href='https://tools.ietf.org/html/rfc6750'target="_blank">RFC6750 - The OAuth 2.0 Authorization Framework: Bearer Token Usage</a></td>
</tr>
<tr>
<td><a href='https://tools.ietf.org/html/rfc7591'target="_blank">RFC7591 - OAuth 2.0 Dynamic Client Registration Protocol</a></td>
</tr>
</tbody></table>

<p>Para melhor entendimento do <em>FAPI-Read and Write API Profile</em> e do <em>CIBA-Financial-grade API: Client Initiated Backchannel Authentication Profile</em>,  é preciso ter conhecimento sobre OAuth2 e OpenID Connect.</p>
<h3 id='oauth-2-0'>OAuth 2.0</h3>
<p>OAuth 2.0 é um framework de autorização que habilita um aplicativo a obter acesso limitado para um serviço de terceiro, introduzindo uma camada de autorização e segmentando as funções do <em>client</em>.
Ao invés de utilizar credenciais fornecidas pelo proprietário do recurso, o <em>client</em> recebe um <em>Access Token</em>, contendo o escopo do acesso, tempo de vida, entre outros atributos. Os <em>Access Tokens</em> são emitidos para <em>clients</em> terceiros por um servidor de autorização com a aprovação do proprietário do recurso. </p>

<p>O OAuth 2.0, define 4 papéis. </p>

<ul>
<li><em>End-User</em>: Uma entidade capaz de conceder acesso a recursos protegidos. Quando o proprietário do recurso é um usuário, ele provê o nível de acesso, limitando o escopo de autorização (leitura ou escrita).<br></li>
<li><em>Resource Server</em>: Servidor que hospeda os recursos protegidos, capaz de aceitar e responder a solicitações de recursos protegidos utilizando tokens de acesso.</li>
<li><em>Client</em>: Um aplicativo que faz solicitações a recursos protegidos em nome do proprietário do recurso, com a sua autorização. </li>
<li><em>Authorization Server</em>: É o servidor que emite tokens de acesso ao <em>client</em>, após autenticar com sucesso e obter autorização do <em>End-User</em>. </li>
</ul>
<h3 id='tokens'>Tokens</h3>
<p>O OAuth 2.0 faz o uso de diversos tokens, entre eles, o <em>access token</em>, <em>refresh token</em> e <em>Authorization &quot;code&quot;</em>.</p>

<ul>
<li><em>Access token</em>: Um token de acesso é utilizado por um <em>client</em> para acessar um recurso, geralmente possuem ciclo de vida curto (minutos ou horas), sendo consumidos durante uma sessão. O <em>Access token</em> indica que o client está autorizado a consumir um recurso protegido, respeitando os <em>scopes</em> para qual o token foi emitido. O token pode ser renovado através de um <em>refresh token</em>. O tipo de <em>Access Token</em> será o <em>&quot;Bearer&quot; OAuth Access Token</em>, referenciado em <a href='https://tools.ietf.org/html/rfc6750'target="_blank">[RFC 6750]</a>.</li>
<li><em>Refresh token</em>: Representa uma autorização de longa duração de um <em>client</em>. Esses tokens são trocados entre o <em>client</em> e o <em>Authorization Server</em> e são utilizados para obter (“atualizar”) novos tokens de acesso. </li>
<li><em>Authorization code</em>: É um código de autorização que representa o resultado do processo de autorização bem sucedido do usuário final e é utilizado pelo <em>client</em> para obter acesso e atualizar status dos tokens. </li>
</ul>

<p>É necessário a implementação de um <em>endpoint</em> adicional no <em>Authorization Server</em> que possibilita a revogação do <em>Access Token</em> e do <em>Refresh Token</em>. Um <em>request</em> de revogação invalidará um ou mais Tokens (se aplicável), baseados na mesma concessão de acesso, conforme <a href='https://tools.ietf.org/html/rfc7009'target="_blank">[RFC 7009]</a>.<br>
Também será adotado o <em>OAuth Token Introspection</em> que define um método para um recurso protegido consultar um <em>Authorization Server</em> sobre o estado e os metadados de um Token, conforme <a href='https://tools.ietf.org/html/rfc7662'target="_blank">[RFC 7662]</a>.<br>
Devido a ampla aplicação do uso do OAuth 2.0, as melhores práticas de segurança do OAuth 2.0 estão em constate atualização e podem ser consultadas neste endereço <a href='https://tools.ietf.org/html/draft-ietf-oauth-security-topics-16'target="_blank">https://tools.ietf.org/html/draft-ietf-oauth-security-topics-16</a>.</p>

<p>Início do fluxo de uma API com a obtenção de um <em>Access Token</em>.</p>

<p><img class='lazy' src='images/loading-e35b35a4.gif' data-src='images/security/Initial_API_Flow_Getting_Access_Token-dfe2ea66.png'/></p>

<p>Diagrama – Obtendo um <em>Access Token</em>.</p>

<ol>
<li> Estabelece conexão TLS 1.2 entre o usuário e o <em>client</em>.</li>
<li> Estabelece conexão mTLS 1.2 entre o <em>client</em> e o <em>Authorization Server</em>.</li>
<li> Efetua um POST com as credenciais de autenticação do <em>client</em> e o escopo da solicitação.</li>
<li> Valida a autenticação de credenciais do <em>client</em>, o escopo e o certificado SSL.</li>
<li> Devolve o <em>Access Token</em> com a mensagem HTTP 200 (OK).</li>
<li> Estabelece conexão mTLS 1.2 entre o <em>Client</em> e o <em>Resource Server</em>.</li>
<li> Efetua um POST com o <em>Access Token</em> e o escopo.</li>
<li> Valida o <em>Access Token</em>, o escopo e o certificado.</li>
<li> Resposta com a mensagem HTTP 201 com o ID da transação.</li>
<li>Início do <em>Hybrid Flow</em>.</li>
</ol>

<h2 id='openid-connect-oidc'>OpenID Connect (OIDC)</h2>

<p>O OpenID Connect é uma camada de identidade sobre o protocolo OAuth 2.0, que permite a identificação de um usuário final com base na autenticação realizada por um <em>Authorization Server</em>. 
OpenID Connect permite uma grande variedade de tipos de <em>clients</em>, sendo, <em>clients</em> Web, <em>clients</em> móveis e JavaScript, oferecendo suporte a recursos opcionais, como criptografia de dados de identidade, descoberta de provedores de OpenID e gerenciamento de sessão.<br>
Existem três papéis envolvendo uma solução de OIDC: </p>

<ul>
<li><em>End-User</em>: É o sujeito a ser autenticado.<br></li>
<li>OpenID Provider - OP: O provedor OpenID é um servidor de autorização OAuth 2.0 que implementa OIDC e pode autenticar um usuário e retornar <em>claims</em> sobre o usuário autenticado e o evento de autenticação para uma parte confiável, geralmente um aplicativo.</li>
<li><em>Relying Party</em> – RP: Um <em>client</em> OAuth 2.0 que delega a autenticação de usuários para um provedor de OpenID e solicita <em>claims</em> sobre o usuário do provedor OpenID, geralmente denominado, <em>client</em>.</li>
</ul>

<h3 id='id-token'>ID Token</h3>

<p>O OIDC utiliza o <em>authorization code</em>, <em>access token</em> e <em>refresh token</em> descrito na seção anterior sobre OAuth e define um outro tipo de Token, o <em>ID Token</em>. </p>

<ul>
<li><em>ID Token</em>: Um token utilizado para transmitir <em>claims</em> sobre um evento de autenticação e um usuário autenticado <em>(End-user)</em> para um <em>client</em>. Tokens de identificação são codificados em JSON Web Token (JWT) e deve estar em conformidade com a LGPD.</li>
</ul>

<p><span style="font-family: Courier New">
<strong>{&quot;iss&quot;: &quot;http://YOUR_DOMAIN/&quot;,</strong><br>
<strong>&quot;sub&quot;: &quot;xpto|123456&quot;,</strong><br>
<strong>&quot;aud&quot;: &quot;YOUR_CLIENT_ID&quot;,</strong><br>
<strong>&quot;exp&quot;: &quot;1311281970&quot;,</strong><br>
<strong>&quot;iat&quot;: &quot;1311280970&quot;,</strong><br>
<strong>&quot;id&quot;: &quot;1234567&quot;}</strong><br>
</span></p>

<p><em><strong>UserInfo Endpoint</strong></em>: Retorna <em>claims</em> sobre um usuário autenticado. Chamar o <em>endpoint</em> requer um <em>Access Token</em> e as <em>claims</em> retornadas são regidos pelo <em>Access Token</em>.<br>
Exemplo de resposta bem-sucedida  contendo um <em>ID Token</em> assinado:<br></p>

<p>HTTP/1.1 200 OK<br>
Content-Type: application/json<br>
Cache-Control: no-store<br>
Pragma: no-cache<br></p>

<p><span style="font-family: Courier New">
<strong>{&quot;access_token&quot;: &quot;SlAV32hkKG&quot;,</strong><br>
<strong>&quot;token_type&quot;: &quot;Bearer&quot;,</strong><br>
<strong>&quot;refresh_token&quot;: &quot;8xLOxBtZp8&quot;,</strong><br>
<strong>&quot;expires_in&quot;: &quot;3600&quot;,</strong><br>
<strong>&quot;id_token&quot;: &quot;eyJhbGciOiJSUzI1NiIsImtpZCI6IjFlOWdkazcifQ.ewogImlzc</strong><br>
  <strong>yI6ICJodHRwOi8vc2VydmVyLmV4YW1wbGUuY29tIiwKICJzdWIiOiAiMjQ4Mjg5</strong><br>
  <strong>NzYxMDAxIiwKICJhdWQiOiAiczZCaGRSa3F0MyIsCiAibm9uY2UiOiAibi0wUzZ</strong><br>
  <strong>fV3pBMk1qIiwKICJleHAiOiAxMzExMjgxOTcwLAogImlhdCI6IDEzMTEyODA5Nz</strong><br>
  <strong>AKfQ.ggW8hZ1EuVLuxNuuIJKX_V8a_OMXzR0EHR9R6jgdqrOOF4daGU96Sr_P6q</strong><br>
  <strong>Jp6IcmD3HP99Obi1PRs-cwh3LO-p146waJ8IhehcwL7F09JdijmBqkvPeB2T9CJ</strong><br>
  <strong>NqeGpe-gccMg4vfKjkM8FcGvnzZUN4_KSP0aAp1tOJ1zZwgjxqGByKHiOtX7Tpd</strong><br>
  <strong>QyHE5lcMiKPXfEIQILVq0pc_E2DzL7emopWoaoZTF_m0_N0YzFC6g6EJbOEoRoS</strong><br>
  <strong>K5hoDalrcvRYLSrQAZZKflyuVCyixEoV9GfNQC3_osjzw2PAithfubEEBLuVVk4</strong><br>
  <strong>XUVrWOLrLl0nx7RkKU8NXNHq-rvKMzqg&quot;}</strong><br>
</span></p>

<h2 id='jwt'>JWT</h2>

<p>O formato JWT (JSON Web Token) é projetado para transmitir <em>claims</em> entre duas partes. O JWT consiste em um <em>Header</em>, um <em>payload</em> e uma assinatura. O cabeçalho do <em>ID Token</em> contém informações sobre o tipo de objeto (JWT) e o algoritmo de assinatura utilizado para proteger a integridade dos <em>claims</em> do <em>payload</em>. O algoritmo de assinatura exigido é o PS256 (RSASSA-PSS utilizando SHA-256 e MGF1 com SHA-256). A seção do <em>payload</em> contém as <em>claims</em> sobre um usuário e o evento de autenticação. A seção de assinatura contém uma assinatura digital com base no <em>payload</em> do <em>ID Token</em> e uma chave secreta conhecida pelo provedor OpenID. </p>

<p>O JWT é formado por três seções: <em>Header, Payload</em> e <em>Signature</em>.<br>
O <em>Header</em> contém somente a informação tipo e algoritmo:</p>

<p><span style="font-family: Courier New">
<strong>{&quot;typ&quot;: &quot;JWT&quot;,</strong><br>
<strong>&quot;alg&quot;: &quot; PS256&quot;}</strong><br>
</span></p>

<h3 id='payload'><em>Payload</em></h3>

<p>O <em>Payload</em> é um objeto JSON com as <em>Claims</em> da entidade tratada, normalmente o usuário autenticado.<br>
<em>Claims</em> são informações afirmadas sobre um sujeito, por exemplo um <em>ID Token</em>, pode conter uma <em>claim</em> chamada <em>name</em> que afirma que o usuário autenticado é quem diz ser. Em um JWT uma claim aparece como um par nome/valor em que o nome é sempre uma <em>string</em> e o valor pode conter qualquer conteúdo JSON.
Essas <em>claims</em> podem ser de 3 tipos:</p>

<p><em><strong>Reserved claims</strong></em>: São <em>claims</em> definidas pela especificação do JWT e contém atributos não obrigatórios (mais recomendados) que são usados na validação do token pelos protocolos de segurança das APIs. É possível verificar a lista completa de <em>Reserved Claims</em> em <a href='https://www.iana.org/assignments/jwt/jwt.xhtml#claims'target="_blank">[IANA JSON Web Token Claims Registry]</a>.</p>

<p><span style="font-family: Courier New">
<strong>{&quot;sub&quot;: &quot;Subject, entidade à quem o token pertence, normalmente o ID do usuário&quot;,</strong><br>
<strong>&quot;iss&quot;: &quot;Issuer, emissor do token&quot;,</strong><br>
<strong>&quot;exp&quot;: &quot;Expiration, timestamp de quando o token irá expirar&quot;,</strong><br>
<strong>&quot;iat&quot;: &quot;Issued at, timestamp de quando o token foi criado&quot;,</strong><br>
<strong>&quot;aud&quot;: &quot;Audience, destinatário do token, representa a aplicação que irá usá-lo&quot;}</strong><br>
</span></p>

<p><em><strong>Public claims</strong></em>: atributos utilizados nas aplicações. Normalmente armazenamos as informações do usuário autenticado na aplicação.</p>

<p><span style="font-family: Courier New">
<strong>{&quot;name&quot;: &quot;Joe&quot;,</strong><br>
<strong>&quot;roles&quot;: &quot;Administrator&quot;,</strong><br>
<strong>&quot;permissions&quot;: &quot;Full&quot;}</strong><br>
</span></p>

<p><em><strong>Private claims</strong></em>: são <em>claims</em> personalizadas e contém atributos definidos  para compartilhar informações entre aplicações.</p>

<p><span style="font-family: Courier New">
<strong>{&quot;sub&quot;: &quot;1234567890&quot;,</strong><br>
<strong>&quot;name&quot;: &quot;Jose Doe&quot;</strong><br>
<strong>&quot;admin&quot;: &quot;true&quot;}</strong><br>
</span></p>

<p>Conjunto de <em>claims</em> para um <em>ID Token</em> do Open Banking:</p>

<p><span style="font-family: Courier New">
<strong>{&quot;iss&quot;: &quot;Emissor do token&quot;,</strong><br>
<strong>&quot;sub&quot;: &quot;Identificador único do subject&quot;,</strong><br>
<strong>&quot;openbanking_intent_id&quot;: &quot;Intent ID da solicitação&quot;,</strong><br>
<strong>&quot;aud&quot;: &quot;Público alvo para o qual o ID Token é destinado (deve incluir o Client ID)&quot;,</strong><br>
<strong>&quot;exp&quot;: &quot;Data/hora de expiração do token&quot;,</strong><br>
<strong>&quot;iat&quot;: &quot;Data/hora de emissão do token&quot;,</strong><br>
<strong>&quot;auth_time&quot;: &quot;Data/hora de autenticação do End-user&quot;,</strong><br>
<strong>&quot;nonce&quot;: &quot;Valor string que associa uma sessão do cliente com um ID Token usado para ajudar na mitigação de ataques de replay&quot;,</strong><br>
<strong>&quot;acr&quot;: &quot;Authentication Context Class Reference&quot;,</strong><br>
<strong>&quot;amr&quot;: &quot;Authentication Methods References&quot;,</strong><br>
<strong>&quot;azp&quot;: &quot;Authorized party&quot;,</strong><br>
<strong>&quot;s_hash&quot;: &quot;State hash value&quot;,</strong><br>
<strong>&quot;at_hash&quot;: &quot;Access Token hash value&quot;,</strong><br>
<strong>&quot;c_hash&quot;: &quot;Code hash value&quot;}</strong><br>
</span></p>

<h3 id='assinatura'>Assinatura</h3>

<p>A assinatura é o <em>header</em> e o <em>payload</em> criptografados com um <em>secret</em>.</p>

<p><span style="font-family: Courier New">
<strong>PS256(</strong><br>
<strong>base64UrlEncode(header) + &quot;.&quot; +</strong><br>
<strong>base64UrlEncode(payload),</strong><br>
<strong>secret)</strong><br>
</span></p>

<p>Para obter o token JWT, as três seções <em>header</em> (vermelho), <em>payload</em> (roxo) e <em>signature</em> (azul) são codificadas com Base64-URL e unidas por pontos.</p>

<p><font size="4">
<span style="color:red">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9</span>.<span style="color:purple">eyJz</span><br>
<span style="color:purple">dWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4g</span><br>
<span style="color:purple">RG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ</span>.<span style="color:blue">SflKxwRJSM</span><br>
<span style="color:blue">eKKF2QT4fwpMeJf36POk6yJV_adQssw5c</span><br>
</font></p>

<p><strong>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.</strong> -&gt; <em><strong>Header</strong></em> <br>
<strong>eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.</strong> -&gt; <em><strong>Payload</strong></em> <br>
<strong>SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c</strong> -&gt; <em><strong>Signature</strong></em> <br></p>

<p>Este token JWT deve ser enviado no cabeçalho <em>Authentication</em> HTTP usando o esquema <em>Bearer</em>. O conteúdo do cabeçalho deve seguir este formato:</p>

<p><span style="font-family: Courier New">
<strong>Authorization: Bearer <token></strong>
</span></p>
<h2 id='fluxo-openid-connect-oidc'>Fluxo OpenID Connect (OIDC)</h2>
<p>O OpenID Connect define os seguintes fluxos: </p>

<ul>
<li><em>Authorization Code Flow</em>: Para autenticar um usuário, o <em>client</em> redireciona o usuário para um provedor de OpenID. O provedor OpenID autentica o usuário e redireciona o usuário de volta para o <em>client</em> com um código de autorização. O aplicativo usa o código de autorização para obter um <em>ID Token</em>, <em>Access Token</em> e, opcionalmente, um <em>Refresh Token</em> do <em>endpoint</em> do provedor OpenID. </li>
<li><em>Implicit flow</em>: Todos os tokens são retornados pelo <em>endpoint</em> de autorização, o <em>Endpoint</em> de Token não é utilizado, esse tipo de fluxo é usado principalmente por <em>Clients</em> implementados em um navegador utilizando uma linguagem de script. O <em>Access Token</em> e o <em>ID Token</em> são devolvidos diretamente ao <em>Client</em>, que pode expô-los ao usuário final e aos aplicativos que têm acesso </li>
<li><em>Hybrid flow</em>: O <em>Hybrid Flow</em>, combina elementos do <em>Authorization Code Flow</em> e <em>Implicit Flow</em>, esse modelo permite retornar um <em>ID Token</em> e um <em>Authorization Code</em> como uma resposta ao <em>front-end</em> do <em>client</em>, deixando o <em>backend</em> obter um <em>Access Token</em> e opcionalmente um <em>Refresh Token</em> do <em>endpoint</em> de token utilizando o <em>Authorization Code</em>. Esse padrão de autenticação foi escolhido como mandatório pelo Open Banking e pode ser observado no diagrama a seguir. </li>
</ul>

<p><img class='lazy' src='images/loading-e35b35a4.gif' data-src='images/security/Hybrid_Flow-b6bd4214.png'/></p>

<p>Diagrama - Fluxo <em>Hybrid Flow</em></p>

<ol>
<li> Usuário acessa o aplicativo e faz requisições ao <em>Client</em>. </li>
<li> <em>Client</em> redireciona a requisição de autenticação ao <em>Authorization Server</em>. </li>
<li> O <em>Authorization Server</em> interage com o usuário com a requisição de autenticação e o consentimento sobre o escopo. </li>
<li> Usuário efetua a autenticação e provê o consentimento, o <em>Authorization Server</em> cria ou atualiza uma sessão para o usuário. </li>
<li> <em>Authorization Server</em> direciona o <em>End-User</em> de volta ao <em>client</em> com um código de autorização e, dependendo do tipo da resposta, com parâmetros adicionais. </li>
<li> O <em>Client</em> solicita uma resposta ao <em>Authorization Server</em> com o código de autorização para obter os demais tokens. </li>
<li> O <em>Authorization Server</em> responde com o <em>ID Token</em> e um <em>Access Token</em>. </li>
<li> O <em>Client</em> valida o <em>ID Token</em> e busca o <em>Subject Identifier</em> do <em>End-User</em>. O <em>Authorization Server</em> deve suportar <em>request objects</em> conforme especificado na seção 6.1 (<em>Request Object</em>) do OIDC.
<h2 id='financial-grade-api-fapi'>Financial-grade API (FAPI)</h2>
<p>Financial-grade API, o FAPI, é uma especificação técnica desenvolvida pelo Grupo de Trabalho Financial-grade API da OpenID Foundation. Ele utiliza OAuth 2.0 e OpenID Connect (OIDC) como sua base e define requisitos técnicos adicionais para o setor financeiro e outros setores que exigem maior segurança.</p></li>
</ol>

<p><img class='lazy' src='images/loading-e35b35a4.gif' data-src='images/security/FAPI-d288dca4.png'/></p>

<h3 id='fapi-read-and-write-api-security-profile'>FAPI: <em>Read and Write API Security Profile</em></h3>

<p>É obrigatório o uso do perfil de segurança <em>FAPI-Financial-grade API: Read and Write API Security Profile</em>, referenciado no endereço: <a href='https://openid.net/specs/openid-financial-api-part-2-wd-06.html'target="_blank">https://openid.net/specs/openid-financial-api-part-2-wd-06.html</a>.</p>

<h3 id='fapi-ciba-client-initiated-backchannel-authentication-profile'>FAPI: <em>CIBA-Client Initiated Backchannel Authentication Profile</em></h3>

<p>A autenticação pelo CIBA fornece um fluxo desacoplado, possibilitando autorizar um pagamento por exemplo em um terminal de ponto de venda ou em um posto de combustível.
O perfil de segurança CIBA: <em>Client Initiated Backchannel Authentication Profle</em> será opcional pelos participantes do Open Banking, referenciado no endereço: <a href='https://openid.net/specs/openid-financial-api-ciba.html'target="_blank">https://openid.net/specs/openid-financial-api-ciba.html</a>.</p>

<h2 id='fluxos-de-autenticacao-e-autorizacao'>Fluxos de autenticação e autorização</h2>

<p>Um Autorizador deve usar o protocolo <a href='https://openid.net/connect/'target="_blank">OpenID Connect (OIDC)</a> e o <a href='https://auth0.com/docs/protocols/protocol-oauth2'target="_blank">OAuth 2.0 Authorization Framework</a> para autenticar usuários e obter sua autorização para acessar recursos protegidos.<br>
A autenticação e a autorização representam funções fundamentalmente diferentes, conforme comparativo abaixo:</p>

<table><thead>
<tr>
<th>Autenticação</th>
<th>Autorização</th>
</tr>
</thead><tbody>
<tr>
<td>Determina se os usuários são quem afirmam ser</td>
<td>Determina o que os usuários podem e não podem acessar</td>
</tr>
<tr>
<td>Desafia o usuário a validar credenciais (por exemplo, por meio de senhas, respostas a perguntas de segurança ou reconhecimento facial)</td>
<td>Verifica se o acesso é permitido por meio de políticas e regras</td>
</tr>
<tr>
<td>Normalmente feito antes da autorização</td>
<td>Normalmente feito após autenticação bem-sucedida</td>
</tr>
<tr>
<td>Geralmente, transmite informações por meio de um token de ID</td>
<td>Geralmente, transmite informações por meio de um token de acesso</td>
</tr>
<tr>
<td>Geralmente regido pelo protocolo OpenID Connect (OIDC)</td>
<td>Geralmente regido pela estrutura OAuth 2.0</td>
</tr>
</tbody></table>

<h3 id='camada-de-transporte'>Camada de transporte</h3>

<p>A comunicação entre os aplicativos terceiros e os recursos protegidos, devem ser sempre protegidas utilizando uma conexão TLS versão 1.2 ou superior.  A conexão TLS deve ser estabelecida sempre utilizando o certificado qualificado para a autenticação do site e o certificado deve ser emitido seguindo as normas definidas para o Open Banking.</p>

<h3 id='fluxo-client-credentials'>Fluxo <em>client</em> credentials</h3>

<p>Com aplicativos machine-to-machine (M2M), como serviços em execução no <em>back-end</em>, o sistema autentica e autoriza o <em>Client</em> em vez de um usuário. Para este cenário, esquemas de autenticação típicos como nome de usuário + senha ou logins sociais não fazem sentido.</p>

<p>Em vez disso, as aplicações M2M usam o fluxo  <em>Client</em> <em>Credentials</em> utilizando mTLS (definido em <a href='https://tools.ietf.org/html/rfc8705'target="_blank">OAuth 2.0 Mutual-TLS <em>Client</em> <em>Authentication and Certificate-Bound</em> RFC 8705)</a> e infraestrutura de chave pública (PKI). No qual o <em>Client</em>, o <em>Authorization Server</em> e o Servidor API são autenticados usando certificados X.509. O <em>Access Token</em> também é vinculado ao <em>Client</em> e validado utilizando certificados X.509.</p>

<p>Este método acrescenta uma restrição com chave de confirmação (ou prova de posse) ao <em>Client</em> que deseja utilizar um token emitido, com isso ele mitiga a possibilidade de uso abusivo dos <em>Access Tokens</em> Oauth tradicionais em caso de vazamento.</p>

<p><img class='lazy' src='images/loading-e35b35a4.gif' data-src='images/security/Client_Credentials-4fb58cdc.png'/></p>

<p>Diagrama – Fluxo de credenciais do <em>client</em>.</p>

<ol>
<li> O <em>client</em> e o servidor de autenticação estabelecem uma conexão mTLS, e o <em>Client</em> solicita um <em>Access Token</em>.</li>
<li> O Servidor de Autenticação gera uma impressão digital SHA-256 do certificado do <em>Client</em> e a incorpora em um Access Token JWT. Isto limita o <em>Access Token</em> ao <em>Client</em>.</li>
<li> O servidor de autenticação emite o <em>Access Token</em> como uma resposta ao <em>Client</em>.</li>
<li> Os <em>Clients</em> fazem uma solicitação de recursos ao Servidor API usando o <em>Access Token</em>.</li>
<li> O Servidor de API solicita ao <em>Authorization Server</em> que valide o <em>Access Token</em>.</li>
<li> O Servidor API usa a impressão digital embutida para validar o <em>Access Token</em>.</li>
<li> O Servidor de Autenticação retorna o resultado da validação do token.</li>
<li> O Servidor API responde com o recurso solicitado.</li>
</ol>

<p>Conforme definido na Seção 6.1 do RFC8705, os <em>endpoints</em> utilizados para emissão e validação de tokens que requerem uma conexão mTLS são <em>endpoints</em> convencionais separados por <em>hostname</em> ou porta diferente.</p>

<h3 id='fluxo-do-authorization-code'>Fluxo do <em>Authorization Code</em></h3>

<p>No Fluxo do <em>Authorization Code</em>, o <em>Client</em> pode recuperar um <em>Access Token</em> e, opcionalmente, um <em>Refresh Token</em>. É considerada a escolha mais segura, pois o <em>Access Token</em> é passado diretamente para o servidor que hospeda o <em>Client</em>, sem passar pelo navegador do usuário e correr o risco de exposição.</p>

<p>Como os <em>Clients</em> são aplicativos do lado do servidor em que o código-fonte não é exposto publicamente, eles podem usar o fluxo do <em>Authorization Code</em> (definido no OAuth 2.0  <a href='https://tools.ietf.org/html/rfc6749#section-4.1'target="_blank">[RFC 6749]</a>, seção 4.1 ), que troca um <em>Authorization Code</em> por um token. Seu <em>Client</em> deve estar no lado do servidor, porque durante essa troca, você também deve passar adiante o <em>client</em> <em>secret</em> do seu <em>Client</em>, que deve ser mantido sempre seguro, e deve armazená-lo em seu <em>client</em>.</p>

<p><img class='lazy' src='images/loading-e35b35a4.gif' data-src='images/security/Authorization_code-eb3cdc0a.png'/></p>

<p>Diagrama - Fluxo do código de autorização.</p>

<ol>
<li> O usuário clica em <em>Login</em> no <em>Client</em>.</li>
<li> O <em>client</em> redireciona o usuário para o <em>Authorization Server</em>. </li>
<li> O <em>Authorization Server</em> redireciona o usuário para o <em>prompt</em> de <em>login</em> e autorização.</li>
<li> O usuário se autentica usando uma das opções de login configuradas e verá uma página de consentimento listando as permissões que o Autorizador dará ao <em>Client</em>.</li>
<li> <em>O Authorization Server</em> redireciona o usuário de volta ao <em>client</em> com um <em>Authorization Code</em>, que é válido para um uso.</li>
<li> O <em>client</em> envia esse código para o Authorization Server junto com o  <em>Client</em> ID e o <em>client</em> secret do <em>Client</em>.</li>
<li> O <em>Authorization Server</em> verifica o código, o <em>Client</em> ID e o <em>client</em> <em>secret</em> do <em>client</em>.</li>
<li> O <em>Authorization Server</em> responde com um <em>ID Token</em> e um <em>Access Token</em> (e, opcionalmente, um <em>Refresh Token</em>).</li>
<li> O <em>Client</em> usa o <em>Access Token</em> para chamar uma API para acessar informações sobre o usuário.</li>
<li>A API responde com os dados solicitados.</li>
</ol>

<h2 id='fluxo-de-consentimento'>Fluxo de Consentimento</h2>

<p>Pedidos de revogação de consentimentos feitos pelo usuário final por meio de API´s da instituição receptora devem obrigatoriamente implicar na revogação dos tokens de acesso e de consentimento relacionados por meio de chamadas executadas no servidor de autorização da instituição transmissora responsável pelo consentimento e/ou em API de consentimento mantida pelo transmissor.<br>
A instituição transmissora deve disponibilizar, por meio de API específica para o controle de consentimentos, interface que permita à instituição receptora detentora de consentimentos a verificação do seu estado.<br>
O acesso à API de consentimento deve ser precedido de autenticação e a consulta deve ser restrita ao consentimento a que a instituição receptora teve autorização prévia para acesso, com vistas a garantir que apenas a instituição receptora que registrou o pedido de consentimento possa realizar a consulta sobre o seu estado.
A instituição receptora de dados detentora de consentimentos e de tokens de autorização deve revogá-los, por meio de chamadas específicas às API´s das instituições transmissoras publicadas para esse fim, quando perceber violações à confidencialidade dos tokens ou no fim da prestação dos serviços ao usuário final.</p>

<h3 id='padrao-lodging-intent'>Padrão Lodging Intent</h3>

<p>Essa seção descreve o padrão <em>Lodging Intent</em>, utilizado para parametrizar solicitações de autorização OAuth complexas de maneira confiável e segura.<br>
O OAuth por si, suporta apenas autorizar ações simples de leitura, o parâmetro <em>scope</em> é definido por uma lista delimitada por espaços contendo strings simples, quando se trata de autorizações mais complexas, como o início de um pagamento, o suporte integrado do OAuth não é suficiente.
O padrão <em>Lodging Intent</em> pode ser utilizado para passar informações de forma confiável para o processo de autorização, independente das restrições de comprimento de URL, enquanto as informações também são protegidas contra modificação sem a necessidade de assiná-las digitalmente, reduzindo os custos de implementação.
Executar um processo de autorização utilizando o padrão <em>Lodging Intent</em> e o <em>Code Flow</em>, funciona da seguinte maneira:</p>

<ul>
<li>O <em>client</em> cria um recurso contendo todos os dados necessários para informar o processo de autorização no <em>Authorization Server</em>, a criação do <em>Lodging Intent</em> pode exigir uma autorização própria, nesse caso, o <em>client</em> precisa obter antecipadamente um <em>Access Token</em> com o escopo adequado, normalmente usando a concessão do <em>Client</em> <em>Credentials</em> com o* Authorization Server*.</li>
<li>O serviço de <em>Lodging Intent</em> responde ao <em>client</em> com um id e/ou link para o recurso criado.</li>
<li>O <em>client</em> então envia a referência do recurso com o pedido de autorização para o <em>Authorization Server</em>. O <em>Authorization Server</em> obtém os dados da transação do recurso de hospedagem e depois de autenticar o usuário, utiliza-os para apresentar uma interface de consentimento. Por exemplo, no caso de um pagamento, o <em>Authorization Server</em> mostra ao devedor, o valor e informações adicionais sobre a transação de pagamento ao usuário e pede o seu consentimento.</li>
<li>Se o usuário consentir com a autorização solicitada, o <em>Authorization Server</em> associa os dados de autorização à concessão criada (ou atualizada) e os respectivos <em>Access Tokens</em> emitidos com base nessa concessão. Por último, o <em>Authorization Server</em> precisa fornecer os dados de autorização ao respectivo <em>Resource Server</em>, para que seja incorporado no <em>Access Token</em> ou na resposta de <em>Introspection</em> do Token.</li>
</ul>

<p>Mais detalhes sobre o funcionamento do padrão <em>Lodging Intent</em> pode ser consultado em <a href='https://bitbucket.org/openid/fapi/src/master/Financial_API_Lodging_Intent.md'target="_blank">https://bitbucket.org/openid/fapi/src/master/Financial_API_Lodging_Intent.md </a>.</p>

<h2 id='assinatura-de-mensagens'>Assinatura de mensagens</h2>

<p>A assinatura de mensagens deve ser aplicada a APIs específicas, de acordo com a definição na documentação do <em>Endpoint</em>.<br>
Para a assinatura de mensagens, deve ser suportado o uso de um JWT assinado (JWS).  JWS representa o conteúdo protegido com assinaturas digitais ou com <em>Message Authentication Codes</em> (MACs) utilizando estruturas de dados JSON, referenciado em [RFC 7515]. </p>

<p><img class='lazy' src='images/loading-e35b35a4.gif' data-src='images/security/JWS-efb7fa19.png'/></p>

<p>Estrutura de um token com JWS.</p>

<h2 id='certificados'>Certificados</h2>

<p>Dois tipos de certificados serão emitidos pelo ICP-Brasil para serem utilizados no Open Banking  com as funções de transporte e  assinatura. 
Atributos comuns a ambos os certificados:</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Utilização</th>
</tr>
</thead><tbody>
<tr>
<td>Data de validade</td>
<td>Intervalo de tempo para qual o certificado será válido.</td>
</tr>
<tr>
<td>Data de emissão</td>
<td>Data em que foi emitido o certificado.</td>
</tr>
<tr>
<td>Autoridade Certificadora</td>
<td>AC- Autoridade Certificadora, entidade pública ou privada, subordinada à hierarquia da ICP-Brasil, responsável por emitir, distribuir, renovar, revogar e gerenciar certificados digitais.</td>
</tr>
<tr>
<td>Chave pública e privada</td>
<td>Chaves públicas e privadas.</td>
</tr>
<tr>
<td>Tipo</td>
<td>A1 ou A2 ou A3.</td>
</tr>
<tr>
<td>Código de registro do participante</td>
<td>2.16.76.1.3.3 otherName Código que identifica o participante do Open Banking (CNPJ).</td>
</tr>
<tr>
<td>Nome do participante</td>
<td>2.16.76.1.3.8 otherName Nome que identifica o participante do Open Banking (Nome que consta no CNPJ).</td>
</tr>
<tr>
<td>Código do Diretório (OID 2.16.76.1.3.X)</td>
<td>Campo otherName em certificado de pessoa jurídica, contendo identificação do código de participante junto ao diretório do Open Banking. OID a ser definido.</td>
</tr>
</tbody></table>

<h3 id='transporte'>Transporte</h3>

<p>Certificado de transporte para a proteção e autenticação do canal (mTLS) e será utilizado para criptografar requisições e respostas entre Third Parties e bancos.
Atributos específicos do certificado de transporte:</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Utilização</th>
</tr>
</thead><tbody>
<tr>
<td>Endpoint (OID 2.16.76.1.3.X)</td>
<td>Campo otherName em certificado de pessoa jurídica, contendo endereço de endpoints associados ao Open Banking. OID a ser definido.</td>
</tr>
<tr>
<td>Key Usage</td>
<td>critical, digitalSignature</td>
</tr>
<tr>
<td>extendedKeyUsage</td>
<td>clientAuth, serverAuth</td>
</tr>
</tbody></table>

<h3 id='assinatura'>Assinatura</h3>

<p>O certificado de assinatura de mensagens é utilizado para criar o JWS para assinar o payload JWT durante o processo de onboarding e authorization.
Atributos específicos do certificado de assinatura:</p>

<table><thead>
<tr>
<th>Atributo</th>
<th>Utilização</th>
</tr>
</thead><tbody>
<tr>
<td>Key Usage</td>
<td>critical, digitalSignature, nonRepudiation</td>
</tr>
</tbody></table>

<h3 id='algoritmo-de-criptorgrafia'>Algoritmo de criptorgrafia</h3>

<table><thead>
<tr>
<th>Algoritmo</th>
<th>Bits</th>
</tr>
</thead><tbody>
<tr>
<td>RSA</td>
<td>2048bits ou 4096bits</td>
</tr>
<tr>
<td>(PS256) RSASSA-PSS</td>
<td>SHA-256 e MGF1 com SHA-256</td>
</tr>
</tbody></table>

<h3 id='tipos-de-certificados'>Tipos de certificados</h3>

<table><thead>
<tr>
<th>Tipo</th>
<th>Validade</th>
<th>Processo de geração</th>
<th>Armazenamento</th>
</tr>
</thead><tbody>
<tr>
<td>A1</td>
<td>1 ano</td>
<td>Software</td>
<td>Repositório protegido por senha e/ou identificação biométrica, cifrado por software.</td>
</tr>
<tr>
<td>A2</td>
<td>Até 2 anos</td>
<td>Software</td>
<td>Cartão Inteligente ou Token, ambos sem capacidade de geração de chave e protegidos por senha e/ou identificação biométrico</td>
</tr>
<tr>
<td>A3</td>
<td>Até 5 anos</td>
<td>Hardware</td>
<td>Hardware criptográfico, homologado junto à ICP-Brasil ou com certificação INMETRO.</td>
</tr>
</tbody></table>

<h3 id='requisitos-adicionais'>Requisitos adicionais</h3>

<ul>
<li>Protocolo HTTP versão 1.1.</li>
<li>Criptografia TLS versão 1.2 suportando somente as seguintes cifras:

<ul>
<li>TLS_DHE_RSA_WITH_AES_128_GCM_SHA256</li>
<li>TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</li>
<li>TLS_DHE_RSA_WITH_AES_256_GCM_SHA384</li>
<li>TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384</li>
</ul></li>
<li>Autenticação mútua.</li>
<li>Algoritmo ECDSA.</li>
<li>Algoritmo de troca de chaves de curva elíptica ECDHE.</li>
<li>Criptografia simétrica AES com chave de 128 bits</li>
<li>MAC com SHA de chaves de 256 bits.</li>
</ul>

<h3 id='definicoes'>Definições</h3>

<p>A ICP-Brasil (Infraestrutura de Chaves Públicas Brasileira) consiste em uma cadeia hierárquica composta por uma autoridade gestora de políticas e autoridades certificadoras que utilizam um conjunto de tecnologias, práticas, técnicas e procedimentos para realizar a transação de documentos eletrônicos com segurança. O objetivo da ICP é fazer com que a utilização de criptografia de chaves públicas se torne mais fácil, tendo como principais componentes as autoridades certificadoras, autoridades de registro e o repositório.
Sua hierarquia se dá da seguinte forma:</p>

<ul>
<li>1º. Comitê Gestor (CG);</li>
<li>2º. Autoridade Certificadora (AC Raiz);</li>
<li>3º. Autoridades Certificadoras de 1º e 2º nível (ACs);</li>
<li>4º. Autoridades de Registros (ARs);</li>
<li>5º. usuário final.</li>
</ul>

<p>A validação requer um par de chaves, sendo que uma delas é de conhecimento geral, ou seja, de acesso ao público, e a outra de conhecimento apenas do proprietário. Por isso, seus dados precisam estar contidos em um certificado digital para que seja possível fazer a tramitação do documento.</p>

<p>Além disso, é preciso que a entidade certificadora seja integrante da infraestrutura do governo e receba uma classificação quanto ao seu nível de segurança. Desse modo, é possível garantir a validade jurídica dos documentos eletrônicos, bem como sua autenticidade e integridade.</p>

<p>As Autoridades Certificadoras (ACs) são responsáveis por gerenciar o ciclo de vida dos certificados digitais, controlando os processos de solicitação, emissão e revogação dos mesmos. </p>

<p>A Autoridade de Registro (AR) e o Repositório de Certificados Digitais também recebem tarefas delegadas da AC Raiz. À AR cabe a tarefa de verificar o conteúdo de requisições de certificados, enquanto o Repositório de Certificados Digitais tem como objetivo publicar os certificados digitais e as listas de certificados revogados emitidos por uma ou mais ACs.
No Brasil, a hierarquia da Certificação Digital obedece ao ICP-Brasil, que deve ser:</p>

<ul>
<li>1º nível – Autoridades Certificadoras Raiz (AC Raiz): Instituto Nacional de Tecnologia da Informação.</li>
<li>2º Nível – Autoridades Certificadoras de primeiro nível: Responsável pela emissão, revogação e gerenciamento dos Certificados Digitais de AC.</li>
<li>3º nível – Autoridades Certificadoras de segundo nível: Responsável pela emissão, revogação e gerenciamento dos Certificados Digitais.</li>
<li>4º nível – Autoridades de Registro: Responsável por identificar o usuário e solicitar e emitir os certificados.</li>
</ul>

<p>Após o prazo de encerramento do Certificado Digital, ele é automaticamente expirado e, qualquer documento assinado após a data de vencimento não possui qualquer validade legal. Já os documentos que forem assinados dentro do período de validade do certificado, tem sua validade assegurada por tempo indeterminado.</p>

<p>A Certificação Digital é a tecnologia que permite que as transações eletrônicas sejam realizadas com segurança, por meio de algoritmos matemáticos capazes de garantir que as informações sejam manipuladas com autenticidade, integridade e confiabilidade.</p>

<p>A Assinatura Digital nada mais é que um processo eletrônico que faz uso de chaves criptografadas. De maneira geral, documentos que são assinados digitalmente passam por um processo de codificação das informações eletrônicas, de forma que somente receptor e emissor possam acessar os documentos compartilhados.</p>

<p>O uso do Certificado Digital é utilizado entre outras atividades para validar as transações bancárias on-line. Ou seja, para comprovar a autenticidade do serviço, o banco utiliza um certificado que assegura ao usuário que ele realmente está acessando o servidor do banco. Assim, ao acessar a sua conta bancária, por exemplo, o usuário pode utilizar seu certificado para autenticar-se diante do banco.</p>

<h3 id='guia-das-etapas-de-solicitacao'>Guia das Etapas de Solicitação</h3>

<p><img class='lazy' src='images/loading-e35b35a4.gif' data-src='images/security/ICPBrasil_flow-8b6f8a34.png'/></p>

<p>Diagrama - Solicitação de um certificado digital.</p>

<p>A obtenção de um Certificado Digital compreende 4 etapas:</p>

<ol>
<li> Solicitação: O interessado (pessoa física ou jurídica) deve acessar uma das Autoridades Certificadoras, escolher o tipo e a validade do Certificado Digital e encaminhar para o processo de compra.</li>
<li> Identificação Presencial: Após feita a solicitação, o interessado deve providenciar os documentos necessários para a emissão do certificado escolhido e agendar uma visita presencial em uma das Autoridades de Registro para realizar a identificação.</li>
<li> Validação e Verificação dos documentos: Depois de apresentar os documentos obrigatórios, o interessado deve aguardar a liberação da validação e verificação realizadas pela Autoridade de Registro. Caso esteja em conformidade com as exigências, é possível seguir para o processo de emissão.</li>
<li> Emissão: Na emissão, é gerado um par de chaves RSA com tamanho de 2048 bits e algoritmo de assinatura SHA 256 na mídia criptográfica do usuário.</li>
</ol>

<p>Contudo, antes de requerer um Certificado Digital, o interessado deve analisar qual a finalidade de uso, a forma de armazenamento e o período de validade no qual deve obter seu documento para, então, solicitar o tipo de certificado adequado. É imprescindível que o interessado conheça as características de cada certificado antes de comprá-lo pelo site em uma das Autoridades Certificadoras habilitadas.</p>

<h3 id='emissao-de-certificados-pelo-diretorio-de-participantes'>Emissão de certificados pelo Diretório de Participantes</h3>

<p>O Diretório de Participantes foi escolhido como uma alternativa para a emissão de certificados, tornando-se uma Autoridade Certificadora para emissão de certificados para <em>Clients</em> (aplicativos).</p>

<p><img class='lazy' src='images/loading-e35b35a4.gif' data-src='images/security/Directory_cert_flow-b8c65455.png'/></p>

<p>Diagrama - Emitindo um certificado pelo Diretório</p>

<p>A obtenção de um Certificado Digital pelo Diretório, compreende 3 etapas:</p>

<ol>
<li>Solicitação: O solicitante deve assinar a solicitação (CSR) utilizando o e-CNPJ e efetuar o <em>upload</em> no Diretório de Participantes.</li>
<li>Verificação: O Diretório realiza a verificação, estando em conformidade, prossegue para o processo de emissão.</li>
<li>Emissão: O Diretório emite um certificado e retorna para o solicitante.</li>
</ol>

<h2 id='csr'>CSR</h2>

<p>Esse bloco consiste em um exemplo de como gerar o <em>Certificate Signing Requests</em> (CSR) para o PKI do Open Banking.<br>
Existem vários utilitários para gerar CSRs para serem enviados a uma autoridade certificadora, neste exemplo vamos utilizar OpenSSL para demonstrar como um CSR válido é gerado para enviar ao Open Banking para emitir um certificado x509 de transporte ou assinatura.<br>
OpenSSL é compatível com Windows ou Linux, podendo ser emitido no sistema operacional preferido:<br></p>

<p>Gerando CSR de transporte <br>
<span style="font-family: Courier New">
$ openssl req -new -config transporte.cnf -out transporte.csr -keyout transporte.key
</span></p>

<p>Gerando CSR de assinatura<br>
<span style="font-family: Courier New">
$ openssl req -new -config assinatura.cnf -out assinatura.csr -keyout assinatura.key
</span></p>

<p>Exemplo:</p>

<p><span style="font-family: Courier New">
$ openssl req -new -config /share/ob/transporte.cnf -out transporte.csr -keyout transporte.key<br>
Generating a RSA private key<br>
........................................+++++<br>
............+++++<br>
writing new private key to &#39;assinatura.key&#39;<br>
Enter PEM pass phrase:<br>
Verifying - Enter PEM pass phrase:<br>
-----<br>
You are about to be asked to enter information that will be incorporated<br>
into your certificate request.<br>
What you are about to enter is what is called a Distinguished Name or a DN.<br>
There are quite a few fields but you can leave some blank<br>
For some fields there will be a default value,<br>
If you enter &#39;.&#39;, the field will be left blank.<br>
-----<br>
BR []:BR<br>
</span></p>

<p>O CSR resultante deve ser carregado para o Open Banking PKI para emitir um certificado público de transporte ou assinatura associado à sua chave privada. Os arquivos resultantes devem ser protegidos pelas políticas de segurança da instituição. </p>

<h3 id='perfil-de-solicitacao-de-assinatura-de-certificado-x509-de-transporte'>Perfil de solicitação de assinatura de certificado X509 de transporte</h3>

<p>Este bloco demonstra como gerar um CSR válido por um client que requer um Certificado de transporte X.509 utilizando um arquivo .cnf como base.<br>
O seguinte arquivo de configuração é utilizado para gerar um CSR para um certificado de transporte usando OpenSSL.</p>

<p>Arquivo CNF OPENSSL Transporte apenas de exemplo, as configurações podem variar de acordo com a Autoridade Certificadora e para quem será emitido o certificado, alterar os campos como CNPJ e NOME da instituição:</p>

<p><span style="font-family: Courier New">
# OPENSSL CSR REQUEST CONFIGURATION FILE<br>
# ======================================<br>
otherName = 2.16.76.1.3.3<br>
otherName = 2.16.76.1.3.8<br>
#otherName = 2.16.76.1.3.X #OID a ser confirmado com a informação dos endpoints<br>
subjectAltName=@san<br>
#CNPJ<br>
otherName.1=2.16.76.1.3.3;UTF8:64721803000118<br>
#Nome conforme consta no CNPJ<br>
otherName.2=2.16.76.1.3.8;UTF8:Nome da instituicao<br>
#Endpoints<br>
#otherName.3=2.16.76.1.3.X;UTF8:Endpoints<br>
# OpenSSL may not recognize this OID so need to add.<br>
[ req ]<br>
default_bits = 2048<br>
#ou<br>
#default_bits = 4096<br>
# RSA key size<br>
encrypt_key = yes<br>
# Protect private key: yes or no. yes recommended<br>
default_md = sha256<br>
# MD to use. sha256 recommended<br>
utf8 = yes<br>
# Input is UTF-8.<br>
string_mask = utf8only<br>
# Emit UTF-8 strings<br>
distinguished_name = client_dn<br>
req_extensions = client_reqext<br>
[ client_dn ]<br>
countryName = &quot;BR&quot;<br>
[ client_reqext ]<br>
keyUsage = critical,digitalSignature<br>
subjectKeyIdentifier = hash<br>
extendedKeyUsage = clientAuth, serverAuth<br>
</span></p>

<h3 id='perfil-de-solicitacao-de-assinatura-de-certificado-x509-de-assinatura'>Perfil de solicitação de assinatura de certificado X509 de assinatura</h3>

<p>Este bloco demonstra como gerar um CSR válido por um client que requer um Certificado de assinatura X.509 utilizando um arquivo .cnf como base.<br>
O seguinte arquivo de configuração é utilizado para gerar um CSR para um certificado de assinatura usando OpenSSL.<br></p>

<p>Arquivo CNF OPENSSL de Assinatura apenas de exemplo, as configurações podem variar de acordo com a Autoridade Certificadora e para quem será emitido o certificado, alterar os campos como CNPJ e NOME da instituição:<br></p>

<p><span style="font-family: Courier New">
# OPENSSL CSR REQUEST CONFIGURATION FILE<br>
# ======================================<br>
otherName = 2.16.76.1.3.3<br>
otherName = 2.16.76.1.3.8<br>
subjectAltName=@san<br>
#CNPJ<br>
otherName.1=2.16.76.1.3.3;UTF8:64721803000118<br>
#Nome conforme consta no CNPJ<br>
otherName.2=2.16.76.1.3.8;UTF8:Nome da instituicao<br>
# OpenSSL may not recognize this OID so need to add.<br>
[ req ]<br>
default_bits = 2048<br>
#ou<br>
#default_bits = 4096<br>
# RSA key size<br>
encrypt_key = yes<br>
# Protect private key: yes or no. yes recommended<br>
default_md = sha256<br>
# MD to use. sha256 recommended<br>
utf8 = yes<br>
# Input is UTF-8.<br>
string_mask = utf8only<br>
# Emit UTF-8 strings<br>
distinguished_name = client_dn<br>
req_extensions = client_reqext<br>
[ client_dn ]<br>
countryName = &quot;BR&quot;<br>
[ client_reqext ]<br>
keyUsage = critical,digitalSignature,nonRepudiation<br>
subjectKeyIdentifier = hash<br>
</span></p>

<p>O arquivo CSR OPENSSL resultante pode ser analisado com o seguinte comando:</p>

<p>$ openssl req -new -config assinatura.cnf -out assinatura.csr -keyout assinatura.key</p>

<h2 id='diretorio-de-participantes'>Diretório de participantes</h2><h3 id='introducao'>Introdução</h3>
<p>O Diretório de Participantes do Open Banking é o principal componente de arquitetura que permite que instituições provedoras se registrem e iniciem interações por meio de APIs com instituições transmissoras, também fornece um ambiente de testes.<br>
O Diretório é um serviço de gerenciamento de identidade e acesso que fornece informações de identidade que dão suporte aos participantes do Ecossistema do Open Banking.<br>
O Diretório de Participantes disponibiliza os recursos funcionais necessários para que as instituições provedoras possam se autenticar no Open Banking e também recursos para identificar as instituições transmissoras.<br>
O Registro dos Provedores é obrigatório para usar as APIs fornecidas pelas instituições transmissoras.<br>
As instituições transmissoras devem utilizar as informações técnicas contidas no Diretório para realizar o gerenciamento da identidade e da autorização das aplicações das instituições Participantes, que abrange a identificação, a autorização e a revogação de certificados utilizados no compartilhamento de dados e serviços do escopo do Open Banking.<br></p>

<p>Recursos funcionais do Diretório de Participantes:</p>

<ul>
<li>Gerenciar identidades e acesso: a capacidade de emitir e gerenciar registros de identidade para organizações e pessoas físicas que interagem com o Diretório.</li>
<li>Gerenciar certificados e chaves: A capacidade de fazer upload, gerenciar e remover certificados, chaves de assinatura e chaves de criptografia. A capacidade de emitir, gerenciar e revogar certificados digitais do Open Banking.</li>
<li>Gerenciar informações do Diretório: a capacidade de atualizar e localizar informações mantidas no diretório - por meio de APIs e/ou uma interface de usuário (IU).</li>
</ul>
<h3 id='padroes'>Padrões</h3>
<ul>
<li>Adoção de padrões abertos 

<ul>
<li>O design do Diretório de Participantes do Open Banking será baseado em padrões abertos e amplamente adotados, como  API Restful, <a href='https://openid.net/connect/'target="_blank">OpenID Connect</a> e <a href='https://tools.ietf.org/html/rfc6749'target="_blank">OAuth2</a>.</li>
</ul></li>
<li>Participantes devem estar registrados

<ul>
<li>Os participantes devem ser autorizados e registrados na autoridade competente. </li>
</ul></li>
<li>Uso de certificados 

<ul>
<li>Os participantes que possuem um certificado válido podem se registrar no diretório mais rapidamente e sem a necessidade de realizar etapas manuais.</li>
</ul></li>
</ul>
<h3 id='registro-de-uma-instituicao-provedora'>Registro de uma Instituição Provedora</h3>
<p>O Diretório deverá realizar validações para o Registro de uma instituição receptora, depois destas validações, solicitações e respostas de API e/ou dados de contas podem ser compartilhadas com segurança entre as duas partes. O diretório deve validar, se:</p>

<ul>
<li>A instituição receptora está utilizando um certificado digital.</li>
<li>O certificado se encontra em conformidade com os padrões do Open Banking Brasil.</li>
<li>O certificado não está expirado.</li>
<li>O certificado foi emitido por uma Entidade Emissora válida.</li>
<li>O certificado não foi revogado. </li>
</ul>

<p>Depois que todas as verificações forem realizadas, será estabelecido uma conexão TLS segura, mutuamente autenticada entre o Diretório e a instituição receptora. </p>
<h3 id='funcoes-operacionais-dos-participantes'>Funções Operacionais dos Participantes</h3>
<p><br><br>
<strong>Fluxos para instituições receptoras</strong></p>

<p><img class='lazy' src='images/loading-e35b35a4.gif' data-src='images/security/TPP-7c6a3087.png'/></p>

<p><br>
<br>
<br>
<br>
<br></p>

<p><strong>Fluxos para instituições transmissoras</strong></p>

<p><img class='lazy' src='images/loading-e35b35a4.gif' data-src='images/security/ASPPSP-ab9ca183.png'/></p>
<h3 id='registro-no-diretorio-de-participantes'>Registro no diretório de participantes</h3>
<p>Para poder consumir APIs disponibilizadas por uma instituição transmissora, uma instituição receptora deverá realizar um registro junto a instituição transmissora, esse processo de autenticação do participante deve ser feita de forma centralizada no Diretório de Participantes, sendo necessário a federação do seu portal ao Diretório.
A instituição transmissora deve implementar um processo de integração da instituição receptora ao seu sistema, esse processo deve:</p>

<ul>
<li>Validar se a instituição receptora é autorizada por uma autoridade competente.</li>
<li>Validar as informações da instituição receptora.</li>
</ul>

<p>Após a instituição receptora realizar o registro no Diretório de Participantes, o mesmo poderá realizar o registro de <em>clients</em> (aplicações) na instituição transmissora.
Para a realização do registro de <em>clients</em> no Open Banking, é mandatório a disponibilização do processo de registro de <em>Client</em> dinâmico, conforme <a href='https://tools.ietf.org/html/rfc7591'target="_blank">[RFC 7591]</a>.  </p>

<h2 id='registro-de-client-dinamico'>Registro de <em>Client</em> dinâmico</h2>

<p>O registro de <em>Client</em> dinâmico é mandatório para os participantes do Open Banking. 
Com uma API de registro de client dinâmico do Open Banking, utilizando o padrão de segurança OpenID Connect, as instituições receptoras podem se registrar junto a instituição transmissora.  </p>

<ul>
<li>Para usar o Registro dinâmico de <em>client</em>, uma instituição receptora deve se registrar no Diretório de Participantes e obter um SSA e demais certificados digitais. </li>
<li>O <em>Client</em> envia o SSA a uma instituição transmissora para registro dinâmico na instituição transmissora. </li>
</ul>

<p>O diagrama abaixo mostra o fluxo do registro dinâmico de uma instituição receptora. </p>

<p><img class='lazy' src='images/loading-e35b35a4.gif' data-src='images/security/RegistroDinamicoFluxo-1ded216c.png'/></p>

<p>Diagrama - Fluxo de registro dinâmico.</p>

<p>As instituições receptoras precisam obter o SSA do Diretório de Participantes do Open Banking.<br>
Uma API de Registro dinâmico consiste em <em>endpoints</em>, que realizam a concessão de credencias do <em>client</em> e a autenticação mútua de TLS para autenticar a instituição receptora. A API deve permitir que as seguintes operações sejam realizadas:</p>

<ul>
<li>Registro de um <em>Client</em>. </li>
<li>Recuperar um <em>Client</em>.</li>
<li>Atualizar um <em>Client</em>.</li>
<li>Excluir um <em>Client</em>.</li>
</ul>

<h2 id='teste-e-homologacao'>Teste e homologação</h2>

<p>A fase de teste e homologação, tem como finalidade, garantir que os participantes que desejam operar no Ecossistema do Open Banking, possam fazer isso de forma assertiva e segura. Isso incluí o suporte para as instituições receptoras com a capacidade de testar seus produtos e serviços desde o lançamento, quanto nas atualizações, fornecendo uma série de ferramentas e infraestrutura no serviço de Diretório para garantir que seus produtos tenham sido testados tempestivamente antes de entrar em produção.<br>
É obrigatório o teste e a homologação para instituição receptora e instituição transmissora. Instituições receptoras devem utilizar o serviço de <em>Sandbox</em> fornecido pelo Diretório.<br>
As instituição transmissoras devem prover um ambiente de teste que possibilite as instituições receptoras autorizados a realizarem testes de conexão e testes funcionais de seus produtos e serviços. Este recurso deve refletir ao máximo o ambiente de produção e deve fornecer o acesso aos desenvolvedores com os seguintes aspectos:</p>

<ul>
<li>Funcionalidade: Deve incluir todas as funcionalidades da interface de produção relacionadas aos casos de uso. Deve funcionar de maneira equivalente ou representativa para a interface de produção, incluindo casos de uso negativos e códigos de erro.</li>
<li>Segurança: Deve utilizar o mesmo perfil de segurança das APIs em produção.</li>
<li> <em>On-boarding</em>: Deve replicar o processo de <em>on-boarding</em> das instalações de produção da instituição transmissora, incluindo o <em>on-boarding</em> e a troca de certificados para identificação e assinatura de mensagem.</li>
<li> Certificados: Deve permitir o uso de certificados de teste (que têm o mesmo formato/estrutura dos certificados de produção) de modo que as instituições receptoras possam replicar a funcionalidade relacionados à troca de certificados para identificação e assinatura de mensagens.</li>
<li>Dados de teste: Não deve incluir quaisquer dados reais de usuários finais. O volume e a variação dos dados devem ser suficientes para dar suporte a todos os testes técnicos e funcionais, incluindo paginação (onde for compatível com a interface dedicada).</li>
<li>Contas de teste: Deve fornecer para as instituições receptoras um número de contas de teste que habilitem a funcionalidade e o acesso aos dados que os usuários reais experimentarão na produção.</li>
<li>Autenticação: A instituição transmissora deve fornecer recurso que permita que as instituições receptoras testem os procedimentos de autenticação, inclusive em produção, utilizando suas próprias contas e/ou contas de teste.</li>
<li> Disponibilidade e desempenho: Não deve lidar com volumes de produção (ou seja, não deve ser usada por instituição transmissora ou instituição receptora para teste de estresse), no entanto, deve ter disponibilidade, capacidade, desempenho e outras características suficientes para facilitar a conexão eficaz e realista a testes funcionais da instituição receptora.</li>
<li>Suporte: A instalação deve ter um nível apropriado de suporte para permitir a comunicação de problemas ou questões por instituições receptoras para instituições transmissoras e fornecer soluções eficientes e eficazes. </li>
<li>Documentação: Instituição transmissora devem publicar externamente um resumo das especificações da instalação de teste em seu site, incluindo detalhes de acesso e cobertura de teste. </li>
</ul>

<p>Os testes devem garantir escopo mínimo para cobrir todos os casos de uso e de requisitos de segurança, evidenciados de forma que seja possível garantir que o processo de homologação foi efetuado.<br>
Os testes para instituições receptoras devem acontecer em 3 etapas:</p>

<ul>
<li>Testes de integração: Testes utilizando APIs de um Banco de exemplo no <em>Sandbox</em> do Diretório.</li>
<li>Testes no Ecossistema: Testes realizados no ecossistema apenas em <em>Sandbox</em> para validar novas funcionalidades ou melhorias.</li>
<li>Testes de primeira ocorrência: Testes baseados em acordos entre transmissoras e receptoras efetuados no ambiente de produção.</li>
</ul>

<p>Ainda, recomenda-se que seja feito o teste de conformidade ao FAPI, disponível em <a href='https://openid.net/certification/fapi_op_testing/'target="_blank">https://openid.net/certification/fapi_op_testing/</a>.</p>
<h1 id='especificacoes-de-registro-de-participantes'>Especificações de registro de participantes</h1>
<p><em>Live</em> do Cadastramento - acesse neste <a href="https://www.youtube.com/watch?v=ARUcxUIL1DQ&feature=youtu.be" target="_blank"><em>link</em></a> o tutorial em vídeo.</p>

<p>Passo a passo do Cadastramento - acesse neste <a href='documents/Open_Banking_passo_a_passo_cadastro_v05.pdf' target="_blank"><em>link</em></a> o arquivo com instruções.</p>
<h1 id='problemas-conhecidos-da-especificacao'>Problemas conhecidos da especificação</h1>
<p>Atualmente não há problemas conhecidos</p>
<h1 id='diretrizes-de-experiencia-do-cliente'>Diretrizes de experiência do cliente</h1>
<p>A ser publicada.</p>
<h1 id='diretrizes-operacionais'>Diretrizes operacionais</h1>
<p>A ser publicada.</p>
<h1 id='diretrizes-tecnicas-do-diretorio'>Diretrizes técnicas do diretório</h1>
<p>A ser publicada.</p>
<h1 id='calendario-de-versoes-das-apis'>Calendário de versões das APIs</h1>
<p>A ser publicada.</p>
<h1 id='guias-de-implementacao'>Guias de implementação</h1>
<p>Acesse neste <a href="https://github.com/OpenBanking-Brasil/mock-api" target="_blank"><em>link</em></a> uma implementação de referência da fase 1.</p>

<p>Esta implementação de exemplo permite ao desenvolvedor realizar testes referentes à fase 1 (<em>open-data</em>) do Open Banking Brasil.</p>
<h1 id='tempo-de-indisponibilidade-das-apis'>Tempo de Indisponibilidade das APIs</h1>
<p>A ser publicado.</p>
<h1 id='api-consentimento'>API – Consentimento</h1>
<p>Consulte neste <a href="swagger/swagger_consents.yaml" target="_blank">link</a> a especificação da API de Consentimento.</p>
<h1 id='divulgacao-dos-valores-de-tarifas-e-taxas-de-juros-remuneratorias'>Divulgação dos valores de tarifas e taxas de juros remuneratórias</h1>

<p>Conforme disposto na Circular nº 4.015, art. 3º, para fins de compartilhamento dos valores de tarifas e taxas de juros remuneratórias dos produtos e serviços ofertados, as instituições devem compartilhar uma distribuição de frequência relativa dos valores cobrados e dos clientes.</p>

<p>Segundo o Art. 6º  da Instrução Normativa nº 32 BCB, de 2020: “O compartilhamento da distribuição de frequência relativa dos valores de tarifas e taxas de juros cobrados dos clientes, de que trata o § 2º do art. 3º da Circular nº 4.015, de 2020, deve dar-se com base em quatro faixas de igual tamanho, com explicitação dos valores sobre a mediana e o percentual de clientes em cada uma dessas faixas, além dos valores máximos e mínimos do universo, segmentados em pessoas naturais e jurídicas, bem como por tipo de serviço ou modalidade de operação e por indexador ou referencial, no caso de operações pós-fixadas.</p>

<p>§ 1º  Admite-se que as instituições compartilhem dados relacionados à distribuição de frequência de que trata o caput em base atualizada em periodicidade mensal, divulgada no décimo dia útil de cada mês, a partir de janeiro de 2021, referente a valores cobrados de seus clientes no mês anterior.</p>

<p>§ 2º  A distribuição de frequência relativa a taxas de juros divulgada conforme o § 1º deve corresponder às operações de crédito concedidas no mês anterior”’.</p>

<p>Desta forma, cada instituição deve, no momento de compartilhamento, ordenar sua base em ordem crescente de valores cobrados por tarifas e taxas de juros remuneratórias dos produtos e serviços ofertados durante o mês de apuração, segmentá-la em quatro faixas de mesmo valor e divulgar 10 valores:</p>

<ul>
<li>Valores: máximo e mínimo do universo de clientes (i.e. 2 valores)</li>
<li>Mediana de cada faixa (i.e. 4 valores)</li>
<li>Percentual de clientes em cada faixa (i.e. 4 valores)</li>
</ul>

<p>Devem ser utilizados no cálculo os valores devidos de tarifas e os valores cobrados de taxas de juros remuneratórias disponíveis nas bases de cliente no mês anterior.</p>

<p>Caso haja mais de 1 evento por cliente referente ao mesmo produto e/ou serviço, deverá ser considerado apenas 1 valor, calculado como a média aritmética dos valores das ocorrências daquele cliente.</p>

<p>Para taxas de juros remuneratórias, os valores compartilhados/divulgados serão os que correspondem às concessões no mês da apuração, segmentados em pessoas naturais e jurídicas, bem como por modalidade de operação e por indexador ou referencial, no caso de operações pós-fixadas.</p>

<p>Para tarifas, a segmentação é por pessoas naturais e jurídicas e por tipo de serviço referente a tarifa avulsa (fora do Pacote de Serviço) cobradas no mês de apuração, devendo-se considerar inclusive as de valor zero (ou isentas).</p>

<h2 id='tarifas-apuracao-frequencia-e-valores-correspondentes'>Tarifas – Apuração Frequência e valores correspondentes</h2>

<p><strong>Serviço:</strong> tarifas avulsas cobradas no mês de apuração. (Cada tarifa será informada separadamente, devendo ser informadas tantas tarifas quanto as que satisfizerem os critérios de apuração)
As tarifas de valor zero (ou isentas) fora de pacotes de serviços, caso tenham ocorrido no mês de referência, devem ser consideradas na distribuição de frequência relativa dos valores.</p>

<p><strong>Tipo Pessoa:</strong> PN ou PJ</p>

<p><strong>Período:</strong> Mês fechado, identificado como M-1</p>

<p><strong>Base Clientes:</strong> clientes segregados por tipo de pessoa que tiveram cobrança da mesma tarifa avulsa (não inclusa no Pacote de serviços) no mês de apuração.
Caso haja mais de 1 evento por cliente, referente ao mesmo produto e/ou serviço, deverá ser considerado apenas 1 valor, calculado como a média aritmética dos valores das ocorrências daquele cliente</p>

<p><strong>Processo de Apuração para cada tipo de tarifa que satisfizer critérios de apuração:</strong></p>

<ol>
<li>Identificar clientes com mais de uma ocorrência de evento e calcular a média aritmética  sobre valores cobrados;</li>
<li>Enfileirar os valores em ordem crescente de grandeza;</li>
<li>Definir menor (MenorVL) e maior valor (MaiorVL)  relativos às tarifas enfileiradas em ordem crescente</li>
<li>Definir: ( MaiorVL – MenorVL )  /  4 = Intervalo para definição faixas de valores (e se MenorVL = MaiorVL, então (MaiorVL – 0) / 4</li>
<li>Calcular mediana dos valores em cada faixa</li>
<li>Calcular o percentual de clientes por faixa ( soma dos valores apurados = 100% )</li>
</ol>

<p><strong>Exemplo de Uso:</strong></p>

<ul>
<li>Tarifas – Apuração Frequência e valores correspondentes</li>
</ul>

<p><img class='lazy' src='images/loading-e35b35a4.gif' data-src='images/extras/Exemplo-Tarifas-Apuracao_Frequencia_e_valores_correspondentes-3ba45525.png'/>
<a href='images/extras/Exemplo-Tarifas-Apuracao_Frequencia_e_valores_correspondentes-3ba45525.png' target="_blank">Download do exemplo</a></p>

<ul>
<li>Tarifas – Distribuição de Frequência</li>
</ul>

<p><img class='lazy' src='images/loading-e35b35a4.gif' data-src='images/extras/Exemplo-Tarifas-Distribuicao_de_Frequencia-3f433712.png'/>
<a href='images/extras/Exemplo-Tarifas-Distribuicao_de_Frequencia-3f433712.png' target="_blank">Download do exemplo</a></p>

<h2 id='apuracao-frequencia-taxas-juros-remuneratorios'>Apuração Frequência Taxas Juros remuneratórios</h2>

<p><strong>Modalidade:</strong> relativa às operações de crédito concedidas (contratadas) no mês da apuração (M-1 – mês anterior)</p>

<p><strong>Tipo Pessoa:</strong>  PN ou PJ</p>

<p><strong>Taxa ou Indexador:</strong> referente ao custo da operação contratada e percentual de incidência (conforme Anexo 5: Taxa referencial ou Indexador (Indx), do Documento 3040, BCB) – Dado informativo</p>

<p><strong>Período:</strong> mês fechado, identificado como M-1</p>

<p><strong>Base Clientes:</strong> clientes segregados por tipo de pessoa (contrato) que tomou crédito de mesma Modalidade no mês de apuração. Com mesmo tipo de taxa ou Indexador e mesmo percentual aplicado. Caso haja mais de 1 evento por cliente referente a mesma Modalidade e Indexador deverá ser considerado apenas 1 valor, calculado como a média aritmética dos valores das ocorrências daquele cliente</p>

<p><strong>Processo de Apuração para cada tipo de Indexador/taxa – percentual aplicado para cada Modalidade que satisfizer os critérios de apuração</strong></p>

<p>Para cada Indexador/Taxa e seu percentual, da Modalidade apurada:</p>

<ol>
<li>Identificar clientes com mais de uma ocorrência de evento e calcular a média aritmética  sobre valores cobrados;</li>
<li>Enfileirar os valores em ordem crescente de grandeza;</li>
<li>Definir menor (MenorVL) e maior valor (MaiorVL)  relativos aos valores enfileirados em ordem crescente</li>
<li>Calcular: ( MaiorVL – MenorVL )  /  4 = Intervalo para definição faixas de valores (e se MenorVL = MaiorVL, então 1. (MaiorVL – 0) / 4</li>
<li>Calcular mediana dos valores em cada faixa</li>
<li>Calcular o percentual de clientes por faixa ( soma dos valores apurados = 100% )</li>
</ol>

<p><strong>Exemplos de Uso:</strong></p>

<ul>
<li>Taxas Remuneratórias – Apuração Frequência e valores correspondentes 1</li>
</ul>

<p><img class='lazy' src='images/loading-e35b35a4.gif' data-src='images/extras/Exemplo1-Taxas_Remuneratorias-Apuracao_Frequencia_e_valores_correspondentes-b2a225d2.png'/>
<a href='images/extras/Exemplo1-Taxas_Remuneratorias-Apuracao_Frequencia_e_valores_correspondentes-b2a225d2.png' target="_blank">Download do exemplo</a></p>

<ul>
<li>Taxas Remuneratórias – Apuração Frequência e valores correspondentes 2</li>
</ul>

<p><img class='lazy' src='images/loading-e35b35a4.gif' data-src='images/extras/Exemplo2-Taxas_Remuneratorias-Apuracao_Frequencia_e_valores_correspondentes-e2e1a0dd.png'/>
<a href='images/extras/Exemplo2-Taxas_Remuneratorias-Apuracao_Frequencia_e_valores_correspondentes-e2e1a0dd.png' target="_blank">Download do exemplo</a></p>

<ul>
<li>Distribuição de Frequência</li>
</ul>

<p><img class='lazy' src='images/loading-e35b35a4.gif' data-src='images/extras/Exemplo-Distribuicao_de_Frequencia-7aab3c4f.png'/>
<a href='images/extras/Exemplo-Distribuicao_de_Frequencia-7aab3c4f.png' target="_blank">Download do exemplo</a></p>

<ul>
<li>Distribuição de Frequência Convenções</li>
</ul>

<p><img class='lazy' src='images/loading-e35b35a4.gif' data-src='images/extras/Exemplo-Distribuicao_de_Frequencia_Convencoes-34122bde.png'/>
<a href='images/extras/Exemplo-Distribuicao_de_Frequencia_Convencoes-34122bde.png' target="_blank">Download do exemplo</a></p>

<ul>
<li>Taxas Remuneratórias – Distribuição de Frequência</li>
</ul>

<p><img class='lazy' src='images/loading-e35b35a4.gif' data-src='images/extras/Exemplo-Taxas_Remuneratorias-Distribuicao_de_Frequencia-48457430.png'/>
<a href='images/extras/Exemplo-Taxas_Remuneratorias-Distribuicao_de_Frequencia-48457430.png' target="_blank">Download do exemplo</a></p>
<h1 id='apis-dados-cadastrais-e-transacionais-de-clientes'>APIs - Dados cadastrais e transacionais de clientes</h1>
<p>A ser publicado.</p>
<h1 id='api-iniciacao-de-transacao-de-pagamentos'>API - Iniciação de transação de pagamentos</h1>
<p>A ser publicado.</p>
<h1 id='apis-diretorio-e-service-desk'>APIs - Diretório e Service Desk</h1>
<p>A ser publicado.</p>
<h1 id='requisitos-nao-funcionais'>Requisitos não funcionais</h1>
<h2 id='nivel-de-servico-sla'>Nível de serviço (SLA)</h2>

<p>O suporte eficaz da disponibilidade do <em>Open Banking</em> mantém níveis consistentes de serviços do sistema. 
Níveis de Serviço definidos:  </p>

<ul>
<li>Cada <em>endpoint</em> da API deve estar disponível 95% do tempo durante cada período de 24 horas.<br></li>
<li>Cada <em>endpoint</em> da API deve estar disponível 99.5% do tempo durante cada período de 3 meses.<br></li>
<li>Cada <em>endpoint</em> da API deve retornar o primeiro byte de resposta dentro de 1000ms por 95% das requisiçãos.<br></li>
<li>O tempo de resposta será medido por um cliente externo com uma latência de rede máxima de 50 ms (tempo para o primeiro byte).<br></li>
</ul>

<p>Informativamente, esse nível de serviço representa aproximadamente um <em>downtime</em> máximo de 0,5% por trimestre, o que corresponde a 18s por hora, 7,2min (432s) por dia, 3,6h (216m) por mês e 10,8h (648m) por trimestre.  </p>

<p>A definição de um período de indisponibilidade é qualquer período de tempo em que qualquer um dos <em>endpoints</em> da API definidos na norma é incapaz de fornecer uma resposta confiável a uma solicitação construída de forma apropriada. </p>

<h3 id='checagem-de-disponibilidade'>Checagem de disponibilidade:</h3>

<p>A disponibilidade é checada no <em>endpoint</em> <code>GET /discovery/status</code>, conforme documentada no item <a href="#apiStatus">API de Status</a>.</p>

<p>A cada 30 segundos, a API de status é requisitada com <em>timeout</em> de 1s. </p>

<ul>
<li>Será considerado <em>uptime</em>, se o retorno for:

<ul>
<li>OK.</li>
</ul></li>
<li>Será considerado <em>downtime</em>, se o retorno for:

<ul>
<li><em>PARTIAL_FAILURE</em>;<br></li>
<li><em>SCHEDULED_OUTAGE</em>:

<ul>
<li>Se a requisição for realizada entre o período  de 01h e 07h, o contador de SCHEDULED_OUTAGE é iniciado com 30 segundos acrescidos;<br></li>
<li>Cada nova requisição vai adicionando 30 segundos mais ao contador de SCHEDULED_OUTAGE, até que uma requisição volte outro valor ou a requisição for feita depois das 07h.<br></li>
</ul></li>
<li><em>UNAVAILABLE</em>:

<ul>
<li>Se a requisição for realizada entre o período de 07h e 01h;<br></li>
<li>Se serviço não responder a requisição;<br></li>
<li>O contador de <em>downtime</em> é iniciado com 30 segundos acrescidos;<br></li>
<li>Cada nova requisição adicionará 30 segundos a mais ao contador de <em>downtime</em>, até que uma requisição retorne OK.<br></li>
</ul></li>
</ul></li>
</ul>

<p>O <em>downtime</em> deve ser calculado como o número total de segundos simultâneos por requisição da API, por período de 24 horas, começando e terminando à meia-noite, que qualquer <em>endpoint</em> da API não esteja disponível, dividido por 86.400 (total de segundos em 24 horas) e expresso como uma porcentagem.</p>

<p><strong>A disponibilidade é calculada sendo 100% menos a quantidade em percentual da indisponibilidade.</strong></p>

<ul>
<li>De modo geral, consideram-se os erros 5XX HTTP <em>status codes</em> como erros do servidor, e portanto, atribuíveis ao servidor das APIs;</li>
<li>Erros baseados em 4XX HTTP <em>status code</em> são, em grande parte, atribuídos à ações ou falhas dos receptores, e dessa forma, não devem ser incluídos no cálculo.</li>
</ul>

<p>Não será considerado como <em>downtime</em>:</p>

<ul>
<li>Uma indisponibilidade por mês, por 3h entre 01h e 07h, desde que reportado com uma semana de antecedência ao diretório;</li>
<li>Por tempo não definido, a qualquer momento e sem notificação em caso de resolução de problemas de segurança, desde que aprovado pelo Diretório. Neste caso, as instituições devem garantir o emprego dos melhores esforços para a resolução do problema</li>
</ul>

<h2 id='nivel-de-desempenho'>Nível de desempenho</h2>

<p>O desempenho do <em>endpoint</em> da API será medido no tempo de resposta de cada solicitação, desde o recebimento da solicitação até a entrega da resposta.<br>
Espera-se que o detentor dos dados garanta que a medição do tempo de resposta ocorra o mais próximo possível do receptor dos dados, embora algumas camadas técnicas não estejam no controle do detentor dos dados.<br>
À luz destas considerações, a exigência de desempenho para os detentores dos dados é:  </p>

<ul>
<li>APIs de alta prioridade (<em>status/outages</em>) devem manter percentil 95 em no máximo 1000ms.</li>
<li>APIs de média prioridade (<em>channels/products-services</em>) devem manter percentil 95 em no máximo 1500ms.<br></li>
<li>APIs Admin (ex. <em>metrics</em>) devem manter percentil 95 em no máximo 4000ms.</li>
</ul>

<p>P. ex. Em um dia que a API Produtos e Serviços receba 10.000 chamadas, pelo menos 9.500 delas deveriam ter sido respondidas dentro de um prazo inferior a 1500ms. </p>

<h2 id='limites-de-trafego-de-requisicoes'>Limites de tráfego de requisições</h2>

<p>Os limites de tráfego serão estabelecidos utilizando as seguintes métricas:</p>

<ul>
<li>Transações por Segundo (TPS) - o número de transações simultâneas a cada segundo;</li>
<li>Número de chamadas - o número de chamadas de <em>endpoint</em> iniciadas por uma duração especificada.</li>
</ul>

<p>Cada instituição transmissora, deverá garantir os seguintes limites mínimos de tráfego abaixo especificados para as APIs de Dados Públicos – Fase 1, os quais serão revisados e ajustados em decorrência dos indicadores de uso das APIs, com revisão prevista imediatamente antes da entrada da Fase 2:</p>

<ul>
<li>500 Requisições por minuto por receptora (via endereço IP);</li>
<li>300 TPS globalmente.</li>
</ul>

<p>As chamadas que excedam os seguintes limites de tráfego poderão ser enfileiradas ou rejeitadas por um detentor de dados sem impacto em seu desempenho ou requisitos de disponibilidade.</p>

<p>Requisições que ultrapassem os limites estabelecidos poderão ser rejeitadas utilizando o HTTP <em>status code</em>:<code>429 Too Many</code>
<code>Requests</code>.</p>
<h1 id='guia-de-versionamento'>Guia de Versionamento</h1>
<p>Este anexo tem como objetivo detalhar quando mudanças nas APIs do Open Banking serão consideradas disruptivas (breaking changes) exigindo a criação de uma nova versão maior (major) e quando uma mudança poderá ser tratada como não disruptiva (non breaking changes) podendo ser criada uma versão menor (minor) para comportá-la. </p>

<p>Mudanças em APIs REST podem ocorrer no contrato da API (Open API 3.0) tendo efeitos mais visíveis aos consumidores e, portanto, sendo mais fácil de se mapear os seus impactos; ou podem acontecer em suas regras de negócio/implementação precisando de uma análise mais complexa de quando a mudança traz impactos aos atuais consumidores das APIs. </p>

<p>Nota: Os exemplos contidos neste anexo são meramente ilustrativos e não refletem as APIs definidas nas especificações do Open Banking. </p>

<p>Ele poderá ser acessado clicando <a href='documents/guia_versionamento.pdf' target="_blank">aqui</a>.</p>
<h1 id='suporte-ao-desenvolvedor'>Suporte ao desenvolvedor</h1>
<p>Fale conosco enviando sua sugestão, dúvida ou problema através do site do <em>Service Desk</em>, disponível neste <a href="https://servicedesk.openbankingbrasil.org.br/Login.jsp?navLanguage=pt-BR" target="_blank"><em>link</em></a>.</p>
<h1 id='participantes-open-banking-brasil'>Participantes Open Banking Brasil</h1><h2 id='acesso-a-json-com-dados-dos-participantes'>Acesso a JSON com dados dos participantes</h2>
<p>Os participantes do Open Banking Brasil podem ser consultados a partir do arquivo localizado no <em>link</em> <a href="https://data.directory.openbankingbrasil.org.br/participants" target="_blank">https://data.directory.openbankingbrasil.org.br/participants</a>.</p>

<p>A lista é composta por todos os participantes cadastrados no diretório do Open Banking.</p>

<p>Os campos que contêm informações relevantes para descoberta dos <em>endpoints</em> para a fase 1 são:</p>

<table><thead>
<tr>
<th style="text-align: left">Campo</th>
<th style="text-align: left">Descrição</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left"><strong>OrganisationDetails.OrganisationId</strong></td>
<td style="text-align: left">O Identificador do participante</td>
</tr>
<tr>
<td style="text-align: left"><strong>AuthorisationServers.CustomerFriendlyName</strong></td>
<td style="text-align: left">Nome da marca</td>
</tr>
<tr>
<td style="text-align: left"><strong>OrganisationDetails.RegistrationNumber</strong></td>
<td style="text-align: left">CNPJ</td>
</tr>
<tr>
<td style="text-align: left"><strong>OrganisationDetails.RegisteredName</strong></td>
<td style="text-align: left">Razão Social</td>
</tr>
<tr>
<td style="text-align: left"><strong>OrgDomainRoleClaim.Role</strong></td>
<td style="text-align: left">Papel junto ao Open Banking</td>
</tr>
<tr>
<td style="text-align: left"><strong>OrgDomainRoleClaim.Status</strong></td>
<td style="text-align: left">Status do papel</td>
</tr>
<tr>
<td style="text-align: left"><strong>AuthorisationServers.APIResources.APIFamilyTipe</strong></td>
<td style="text-align: left">URL das APIs</td>
</tr>
<tr>
<td style="text-align: left"><strong>AuthorisationServers.APIResources.APIVersion</strong></td>
<td style="text-align: left"></td>
</tr>
<tr>
<td style="text-align: left"><strong>AuthorisationServers.APIResources.APIEndPoint</strong></td>
<td style="text-align: left"></td>
</tr>
<tr>
<td style="text-align: left"><strong>AuthorisationServers.DeveloperPortalURI</strong></td>
<td style="text-align: left">URL da documentação sobre a API do participante</td>
</tr>
</tbody></table>

<p>A especificação do arquivo de participantes pode ser acessada <a href="swagger/swagger_participants.yaml" target="_blank">aqui</a>.</p>
<h1 id='faq'>FAQ</h1><h3 id='como-tratar-campos-obrigatorios'>Como tratar campos Obrigatórios?</h3>
<p>No Github, item Padrões – <a href="#introducao-convencoes-de-payload">Convenções de payload</a> – Atributos vazios / nulos encontram-se as orientações solicitadas quanto ao tratamento de campos: obrigatórios, opcionais e condicionais.</p>

<p>&quot;Um atributo omitido (ou seja, um atributo que não está presente no <em>payload</em>) será considerado equivalente a um atributo que esteja presente com o valor <code>null</code>.</p>

<p>Uma <em>string</em> vazia (<code>“”</code>) não será considerada equivalente a <code>null</code>.</p>

<p>O valor booleano <code>false</code> não será considerado equivalente a <code>null</code>. Os atributos booleanos opcionais, por definição, possuirão três valores possíveis: verdadeiro (<code>true</code>), falso (<code>false</code>) e indeterminado (<code>null</code>).</p>

<p>Na situação onde o campo a ser informado no payload seja obrigatório e a Instituição, seja consumidora no envio ou transmissora no retorno, não a possuir, deve-se implementar o valor padronizado: “NA” - Não se Aplica, com exceção dos campos declarados como ENUM que deverão ser sempre preenchidos com os valores válidos para o ENUM correspondente.&quot;</p>
<h3 id='como-tratar-campos-opcionais'>Como tratar campos Opcionais?</h3>
<p>No Github, item Padrões – <a href="#introducao-convencoes-de-payload">Convenções de payload</a> – Atributos vazios / nulos encontram-se as orientações solicitadas quanto ao tratamento de campos: obrigatórios, opcionais e condicionais.</p>

<p>&quot;Um atributo omitido (ou seja, um atributo que não está presente no <em>payload</em>) será considerado equivalente a um atributo que esteja presente com o valor <code>null</code>.</p>

<p>Uma <em>string</em> vazia (<code>“”</code>) não será considerada equivalente a <code>null</code>.</p>

<p>O valor booleano <code>false</code> não será considerado equivalente a <code>null</code>. Os atributos booleanos opcionais, por definição, possuirão três valores possíveis: verdadeiro (<code>true</code>), falso (<code>false</code>) e indeterminado (<code>null</code>).</p>

<p>Na situação onde o campo a ser informado no payload seja obrigatório e a Instituição, seja consumidora no envio ou transmissora no retorno, não a possuir, deve-se implementar o valor padronizado: “NA” - Não se Aplica, com exceção dos campos declarados como ENUM que deverão ser sempre preenchidos com os valores válidos para o ENUM correspondente.&quot;</p>
<h3 id='por-que-todos-os-campos-com-dominio-definidos-nao-tem-tamanho-explicitado-no-dicionario-de-dados'>Por que todos os campos com domínio definidos não tem tamanho explicitado no dicionário de dados?</h3>
<p>Por Padrão, explicitado no item <a href="#introducao-tipos-de-dados-comuns">Tipos de Dados Comuns</a>, no Github, todos os possíveis conteúdos de Enum estão declarados. Não é informado o tamanho para este tipo de dado. Cada instituição definirá o tamanho máximo a ser adotado. Como regra observar que o tamanho máximo deve ser igual ou maior ao tamanho total da maior ocorrência da lista.</p>
<h3 id='no-momento-o-compartilhamento-dos-dados-relativos-aos-terminais-de-autoatendimento-compartilhados-e-facultativo'>No momento, o compartilhamento dos dados relativos aos Terminais de autoatendimento compartilhados é facultativo?</h3>
<p>A normativa nº 35 explicita a existência da API de Terminais de autoatendimento compartilhado, por isso o Github traz esta estrutura.
Num primeiro momento, foi declarado através da normativa nº 35 que todos seus atributos são opcionais.</p>
<h3 id='de-que-tipo-de-terminal-o-regulador-esta-se-referindo-pois-temos-algumas-situacoes-distintas-em-nossa-instituicao'>De que tipo de terminal o regulador está se referindo, pois temos algumas situações distintas em nossa instituição:</h3>
<p><strong>1. Terminais de nossa propriedade cujo demais bancos firmam convênio para que seus clientes os utilizem;</strong> </p>

<p><strong>2. Terminais de terceiros como Saque e Pague e Banco 24h, que possuímos convênio para uso de nossos clientes.</strong> </p>

<p><strong>Para o segundo caso, se for esse o foco do pedido do regulador, não teremos os dados de forma atualizada para informar via API, uma vez que tal informação estará disponível no proprietário do terminal, como por exemplo a TecBan? Se precisarmos informar tais dados, não teremos como nos responsabilizar pela veracidade e integridade do mesmo.</strong> </p>

<p>O item 2.4.2, sobre terminais de autoatendimento compartilhados, do ANEXO À INSTRUÇÃO NORMATIVA BCB Nº 35, de 2020, , refere-se exatamente aos terminais de propriedade de terceiros, a exemplo do Saque e Pague e Banco 24h citados, contratados pelas instituições para a prestação de serviços a seus clientes. No que diz respeito à veracidade e à integridade dos dados fornecidos, trata-se de responsabilidade da instituição participante, conforme dispõe o art. 31 da Resolução Conjunta n.º 1, de 2020.</p>
<h3 id='na-normativa-n-35-do-bcb-para-correspondente-bancario-os-atributos-weekday-e-phonestype-aparecem-como-opcional-mas-no-github-aparecem-como-obrigatorios-isto-esta-correto'>Na normativa nº 35, do BCB, para Correspondente Bancário os atributos weekday e phonestype aparecem como opcional, mas no Github aparecem como obrigatórios isto está correto?</h3>
<p>O atributo <code>weekday</code> faz parte da lista <code>availability</code>, assim como <code>phonestype</code> faz parte da lista <code>phones</code>. As listas estão classificadas como opcionais, portanto caso a Instituição não tenha valores para informar em <code>availability</code> ou em <code>phones</code> estas listas como um todo estão classificadas opcionais não aparecerão na resposta solicitada. Porém, caso haja conteúdo a ser informado na lista <code>availability</code> ou <code>phones</code> o preenchimento dos atributos do tipo Enum: <code>weekday</code> ou <code>phonestype</code> passam a ser obrigatórios. Por isso estão assim classificados, seguindo protocolos das melhores práticas.</p>
<h3 id='sendo-consideradas-somente-as-operacoes-contratadas-no-mes-da-apuracao-no-calculo-e-disponibilizacao-de-informacoes-relativas-a-distribuicao-de-frequencia-de-taxas-remuneratorias'>Sendo consideradas somente as operações “contratadas” no mês da apuração no cálculo e disponibilização de informações relativas a distribuição de frequência de Taxas remuneratórias.</h3>
<ul>
<li><p>Modalidades de crédito disponíveis para oferta que não tiveram nenhuma contratação no mês da apuração serão informadas trazendo este conjunto de informações ‘vazio’?</p>

<ul>
<li>R.: Deve-se reportar a modalidade com o valor das taxas e tarifas representados como N/A (justamente para diferenciar de casos em que não oferecemos os produtos, nos quais não reportamos a modalidade, ou no caso de tarifa zerada, que efetivamente viria com um “0”).</li>
</ul></li>
<li><p>Produtos com características de rotativo,  como cartão (rotativo e parcelamento saldo devedor) e cheque especial que têm a incidência das taxas remuneratórias durante a utilização do crédito contratado deverão ter suas taxas remuneratórias informadas na contratação?</p>

<ul>
<li>R.: O entendimento é que seria apenas na referência de contratação de fato, ou seja na utilização do crédito (p.ex. o mês que o cliente entra no especial ou no rotativo)</li>
</ul></li>
</ul>
<h3 id='sendo-consideradas-somente-as-operacoes-quot-contratadas-quot-no-mes-da-apuracao-no-calculo-e-disponibilizacao-de-informacoes-relativas-a-distribuicao-de-frequencia-de-tarifas'>Sendo consideradas somente as operações &quot;contratadas&quot; no mês da apuração no cálculo e disponibilização de informações relativas a distribuição de frequência de Tarifas.</h3>
<ul>
<li><p>Modalidades de crédito como Contas, Cartão, Cheque Especial que têm em suas tarifas de serviços normalmente relacionadas a utilização do crédito durante a vigência do contrato só serão representadas se a utilização da tarifa incidir no mês da contratação?</p>

<ul>
<li>R.: O entendimento é que seria apenas na referência de contratação de fato, ou seja na utilização do crédito (p.ex. o mês que o cliente entra no especial ou no rotativo); desde que a Modalidade de crédito informada ainda seja ofertável.</li>
</ul></li>
<li><p>No caso de se considerar no cálculo da distribuição de frequência sobre Tarifas todas as ocorrências relativas ao mês de apuração, o estoque de operações ainda vigentes de uma modalidade não mais disponível na oferta deve ser desprezada?</p>

<ul>
<li>R.: Sim</li>
</ul></li>
<li><p>Modalidades de crédito comercializadas que têm Tarifas de serviços diferenciadas para funcionários deverão ser consideradas no cálculo da distribuição de frequência? Considerando assim, funcionários consumidores de produto também como clientes?</p>

<ul>
<li>R.: O entendimento é que o funcionário é cliente nos produtos, ele deve sim entrar na conta (ele é um cliente com condições especiais de taxas e tarifas, assim como outros clientes que também conseguem negociar condições especiais por diversos outros motivos).</li>
</ul></li>
</ul>
<h3 id='orientacoes-padroes-e-exemplos-sobre-apuracao-dos-valores-para-a-distribuicao-de-frequencia-de-tarifas-e-taxas-remuneratorias'>Orientações, padrões e exemplos sobre apuração dos valores para a distribuição de frequência de Tarifas e Taxas Remuneratórias</h3>
<p>Podem ser encontradas no item <a href="#api-canais-de-atendimento-divulgacao-dos-valores-de-tarifas-e-taxas-de-juros-remuneratorias">Divulgação dos valores de tarifas e taxas de juros remuneratórias</a>, em API – Produtos Serviços.</p>
<h3 id='e-possivel-incluir-novos-tipos-de-cartao'>É possível incluir novos Tipos de cartão?</h3>
<p>Informamos que nesta fase 1 não serão incluídas novas ocorrências no Enum dos tipos de cartão. Deve-se selecionar a opção &#39;OUTROS&#39; e complementar a informação utilizando o atributo <code>additionaInfo</code>.</p>
<h3 id='como-reportar-agencias-digitais'>Como reportar Agências Digitais?</h3>
<p>Para o item dependências e correspondentes, a grande referência foi o que as instituições já reportam via mensageria regulatória. (UNICAD).  </p>

<p>RESOLUÇÃO Nº 4.072, DE 26 DE ABRIL DE 2012.</p>

<p>Vide 4015 - Art. 2º Os dados sobre os canais de atendimento objeto de compartilhamento de que trata o art. 5º, inciso I, alínea &quot;a&quot;, da Resolução Conjunta nº 1, de 4 de maio de 2020, abrangem, no mínimo, aqueles obrigatoriamente divulgados na forma de dados abertos, de que trata a regulamentação vigente, no caso de dependências próprias e correspondentes no País
RC1 - I - dados sobre: a. canais de atendimento relacionados com: </p>

<ol>
<li>dependências próprias; </li>
<li>correspondentes no País; </li>
<li>canais eletrônicos; e </li>
<li>demais canais disponíveis aos clientes;</li>
</ol>

<p>*IN-*35 - Divulga a versão 1.0 do Manual de Escopo de Dados e Serviços do Open Banking debatido em auto regulação e regulado pelo BACEN.
Não discutimos os itens especificamente, mas entendo que se não está explicito nas regulações vigentes, não há obrigação de report.</p>
<h3 id='as-operacoes-de-repasse-sao-reportadas-no-documento-3050-estatisticas-agregadas-de-credito-e-arrendamento-mercantil-em-financiamento-de-investimentos-com-recursos-do-bndes-e-financiamento-agroindustrial-com-recurso-do-bndes-no-documento-3040-dados-individualizados-de-risco-de-credito-essas-operacoes-sao-reportadas-como-08-02-financiamentos-rurais-investimentos-porem-com-a-origem-do-recurso-como-direcionado-02-bndes-03-finame-devemos-incluir-essas-operacoes-de-repasse-dentro-do-reporte-do-open-banking'>As operações de repasse são reportadas no Documento 3050 – Estatísticas agregadas de Crédito e Arrendamento Mercantil em: Financiamento de investimentos com recursos do BNDES e Financiamento Agroindustrial com recurso do BNDES. No Documento 3040 – Dados Individualizados de Risco de Crédito, essas operações são reportadas como 08.02. Financiamentos Rurais – Investimentos, porém, com a origem do recurso como direcionado (02 – BNDES, 03- Finame). Devemos incluir essas operações de repasse dentro do reporte do Open Banking?</h3>
<p>As operações informadas no documento 3040, que encontram sua Modalidade representada nas listas das APIs constante do Github devem ser informadas no Open Banking. Quanto a fonte do recurso (02 – BNDES, 03- Finame), esta informação não está discriminada para ser disponibilizada.
Para esclarecimento reiteramos que a modalidade 08.02 não faz parte do reporting. Citar a origem dos recursos nunca foi escopo das discussões da fase 1. </p>
<h3 id='temos-participacao-obrigatoria-na-fase-3-porem-queremos-saber-detalhes-sobre-a-participacao-optativa-da-fase-1-e-fase-2-as-duvidas-iniciais-sao'>Temos participação obrigatória na Fase 3, porém queremos saber detalhes sobre a participação optativa da Fase 1 e Fase 2. As dúvidas iniciais são:</h3>
<p><strong>1. Como optativa: Podemos participar da Fase 2 parcialmente?</strong></p>

<p><strong>2. Como optativa: Podemos somente consumir dados da Fase 2?</strong></p>

<p><strong>3. Como optativa: É preciso fazer cadastro do BCB para somente consumir dados da Fase 2?</strong></p>

<p>Salvo possíveis ressalvas do regulador, entendemos, conforme trecho da regulação mais abaixo que não existe participação parcial.</p>

<ol>
<li>O cadastramento para compartilhamento de informações é obrigatório - compartilhamento neste contexto engloba também o consumo de informações.</li>
<li>A participação voluntária na Fase II implica na disponibilização das interfaces dedicadas ao compartilhamento de dados das Fases I e II.</li>
<li>A instituição poderá decidir se consome ou não os dados no ecossistema - como receptora, mas uma vez participante, torna-se obrigatoriamente transmissora - daí a obrigatoriedade de disponibilizar as interfaces dedicadas.</li>
</ol>

<p><a href="https://www.in.gov.br/en/web/dou/-/resolucao-conjunta-n-1-de-4-de-maio-de-2020-255165055">RESOLUÇÃO CONJUNTA Nº 1, DE 4 DE MAIO DE 2020</a></p>

<p>&quot;Seção II</p>

<p>Da Participação no Open Banking</p>

<p>Art. 6º São participantes do Open Banking: 
[...]</p>

<p>§ 1º É obrigatório o compartilhamento dos dados e dos serviços, observados os prazos de implementação mencionados no art. 55:
[...]</p>

<p>§ 3º A participação voluntária de que trata o inciso I, alínea &quot;b&quot;, do caput, pressupõe a disponibilidade de interface dedicada de que trata o art. 23 na condição de instituição transmissora de dados.&quot;</p>
<h3 id='considerar-data-da-concessao-ou-data-da-liberacao-para-o-calculo-da-distribuicao-de-frequencia-para-operacoes-com-caracteristica-de-liberacoes-parciais'>Considerar data da concessão ou data da liberação para o Cálculo da distribuição de frequência para operações com característica de liberações parciais?</h3>
<p>No que diz respeito a contratos de crédito guarda-chuva, entendemos que deveria se entender, para todos os efeitos, que a contratação ocorre na data da liberação do recurso. Entendimento similar já foi dado para contratos de cheque especial, por exemplo, podendo, a nosso entender, também ser replicado no caso ilustrado pelo demandante de operações de crédito rural e de custeio de projetos.</p>
<h3 id='como-devemos-tratar-distribuicao-de-frequencia-sobre-taxas-remuneratorias-para-outras-operacoes-de-credito-relacionadas-ao-produto-cartao'>Como devemos tratar distribuição de frequência sobre taxas remuneratórias para outras operações de crédito relacionadas ao Produto Cartão?</h3>
<p>A princípio não há exigência normativa para se apresentar a distribuição de frequência para essas outras modalidades de crédito relacionadas à cartão de crédito. Conforme a Instrução Normativa BCB 35, de 2020, somente recairia essa exigência, no caso de cartão de crédito, sobre as operações de crédito rotativo e de parcelamento do saldo devedor da fatura, que já são operações que observam alguma espécie de padronização. De qualquer forma, esse é o escopo mínimo de dados, o que não impede que o GT e o conselho deliberativo deliberem por sua expansão em algum momento.</p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="javascript">javascript</a>
                <a href="#" data-language-name="python">python</a>
                <a href="#" data-language-name="java">java</a>
          </div>
      </div>
    </div>
  <script>
    /*Lazy loading para as imagens*/
    document.addEventListener("DOMContentLoaded", function() {
      let lazyImages = [].slice.call(document.querySelectorAll("img.lazy"));
      let active = false;

      const lazyLoad = function() {
        if (active === false) {
          active = true;
          setTimeout(function() {
            lazyImages.forEach(function(lazyImage) {
              if ((lazyImage.getBoundingClientRect().top <= window.innerHeight && lazyImage.getBoundingClientRect().bottom >= 0)) {
                lazyImage.src = lazyImage.dataset.src;
                lazyImage.classList.remove("lazy");
                lazyImages = lazyImages.filter(function(image) {
                  return image !== lazyImage;
                });

                if (lazyImages.length === 0) {
                  document.removeEventListener("scroll", lazyLoad);
                  window.removeEventListener("resize", lazyLoad);
                  window.removeEventListener("orientationchange", lazyLoad);
                }
              }
            });
            active = false;
          }, 200);
        }
      };
      document.addEventListener("scroll", lazyLoad);
      window.addEventListener("resize", lazyLoad);
      window.addEventListener("orientationchange", lazyLoad);
    });
  </script>
  </body>
</html>
